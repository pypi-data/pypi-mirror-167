"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupEvents_tsx"],{"./app/components/acl/role.tsx":(e,i,t)=>{t.d(i,{u:()=>s}),t("../node_modules/core-js/modules/es.array.includes.js");var n=t("../node_modules/react/index.js"),a=t("./app/stores/configStore.tsx"),o=t("./app/utils/isActiveSuperuser.tsx"),r=t("./app/utils/isRenderFunc.tsx");const s=(0,t("./app/utils/withOrganization.tsx").Z)((function(e){let{role:i,organization:t,children:s}=e;const d=a.Z.get("user"),h=(0,n.useMemo)((()=>function(e,i,t){var n,a;if(!e)return!1;if((0,o.M)())return!0;if(!Array.isArray(i.orgRoleList))return!1;const r=i.orgRoleList.map((e=>e.id));if(!r.includes(t)||!r.includes(null!==(n=i.role)&&void 0!==n?n:""))return!1;const s=r.indexOf(t);return r.indexOf(null!==(a=i.role)&&void 0!==a?a:"")>=s}(d,t,i)),[t,i,d]);return(0,r.l)(s)?s({hasRole:h}):h?s:null}))},"./app/components/deviceName.tsx":(e,i,t)=>{t.d(i,{H:()=>s,q:()=>r}),t("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=t("../node_modules/react/index.js");const a={"iPod1,1":"iPod touch","iPod2,1":"iPod touch (2nd generation)","iPod3,1":"iPod touch (3rd generation)","iPod4,1":"iPod touch (4th generation)","iPod5,1":"iPod touch (5th generation)","iPod7,1":"iPod touch (6th generation)","iPod9,1":"iPod touch (7th generation)","iPhone1,1":"iPhone","iPhone1,2":"iPhone 3G","iPhone2,1":"iPhone 3GS","iPhone3,1":"iPhone 4","iPhone3,2":"iPhone 4","iPhone3,3":"iPhone 4","iPhone4,1":"iPhone 4S","iPhone5,1":"iPhone 5","iPhone5,2":"iPhone 5","iPhone5,3":"iPhone 5c","iPhone5,4":"iPhone 5c","iPhone6,1":"iPhone 5s","iPhone6,2":"iPhone 5s","iPhone8,4":"iPhone SE (1st generation)","iPhone7,2":"iPhone 6","iPhone7,1":"iPhone 6 Plus","iPhone8,1":"iPhone 6s","iPhone8,2":"iPhone 6s Plus","iPhone9,1":"iPhone 7","iPhone9,3":"iPhone 7","iPhone9,2":"iPhone 7 Plus","iPhone9,4":"iPhone 7 Plus","iPhone10,1":"iPhone 8","iPhone10,4":"iPhone 8","iPhone10,2":"iPhone 8 Plus","iPhone10,5":"iPhone 8 Plus","iPhone10,3":"iPhone X","iPhone10,6":"iPhone X","iPhone11,8":"iPhone XR","iPhone11,2":"iPhone XS","iPhone11,4":"iPhone XS Max","iPhone11,6":"iPhone XS Max","iPhone12,1":"iPhone 11","iPhone12,3":"iPhone 11 Pro","iPhone12,5":"iPhone 11 Pro Max","iPhone12,8":"iPhone SE (2nd generation)","iPhone13,1":"iPhone 12 mini","iPhone13,2":"iPhone 12","iPhone13,3":"iPhone 12 Pro","iPhone13,4":"iPhone 12 Pro Max","iPad6,7":"iPad Pro (12.9-inch)","iPad6,8":"iPad Pro (12.9-inch)","iPad6,3":"iPad Pro (9.7-inch)","iPad6,4":"iPad Pro (9.7-inch)","iPad7,1":"iPad Pro (12.9-inch, 2nd generation)","iPad7,2":"iPad Pro (12.9-inch, 2nd generation)","iPad7,3":"iPad Pro (10.5-inch)","iPad7,4":"iPad Pro (10.5-inch)","iPad8,1":"iPad Pro (11-inch)","iPad8,2":"iPad Pro (11-inch)","iPad8,3":"iPad Pro (11-inch)","iPad8,4":"iPad Pro (11-inch)","iPad8,5":"iPad Pro (12.9-inch) (3rd generation)","iPad8,6":"iPad Pro (12.9-inch) (3rd generation)","iPad8,7":"iPad Pro (12.9-inch) (3rd generation)","iPad8,8":"iPad Pro (12.9-inch) (3rd generation)","iPad8,9":"iPad Pro (11-inch) (2nd generation)","iPad8,10":"iPad Pro (11-inch) (2nd generation)","iPad8,11":"iPad Pro (12.9-inch) (4th generation)","iPad8,12":"iPad Pro (12.9-inch) (4th generation)","iPad2,5":"iPad mini","iPad2,6":"iPad mini","iPad2,7":"iPad mini","iPad4,4":"iPad mini 2","iPad4,5":"iPad mini 2","iPad4,6":"iPad mini 2","iPad4,7":"iPad mini 3","iPad4,8":"iPad mini 3","iPad4,9":"iPad mini 3","iPad5,1":"iPad mini 4","iPad5,2":"iPad mini 4","iPad11,1":"iPad mini (5th generation)","iPad11,2":"iPad mini (5th generation)","iPad4,1":"iPad Air","iPad4,2":"iPad Air","iPad4,3":"iPad Air","iPad5,3":"iPad Air 2","iPad5,4":"iPad Air 2","iPad11,3":"iPad Air (3rd generation)","iPad11,4":"iPad Air (3rd generation)","iPad13,1":"iPad Air (4th generation)","iPad13,2":"iPad Air (4th generation)","iPad1,1":"iPad","iPad2,1":"iPad 2","iPad2,2":"iPad 2","iPad2,3":"iPad 2","iPad2,4":"iPad 2","iPad3,1":"iPad (3rd generation)","iPad3,2":"iPad (3rd generation)","iPad3,3":"iPad (3rd generation)","iPad3,4":"iPad (4th generation)","iPad3,5":"iPad (4th generation)","iPad3,6":"iPad (4th generation)","iPad6,11":"iPad (5th generation)","iPad6,12":"iPad (5th generation)","iPad7,5":"iPad (6th generation)","iPad7,6":"iPad (6th generation)","iPad7,11":"iPad (7th generation)","iPad7,12":"iPad (7th generation)","iPad11,6":"iPad (8th generation)","iPad11,7":"iPad (8th generation)","AudioAccessory1,1":"HomePod","AudioAccessory1,2":"HomePod","AudioAccessory5,1":"HomePod mini","Watch1,1":"Apple Watch (1st generation)","Watch1,2":"Apple Watch (1st generation)","Watch2,6":"Apple Watch Series 1","Watch2,7":"Apple Watch Series 1","Watch2,3":"Apple Watch Series 2","Watch2,4":"Apple Watch Series 2","Watch3,1":"Apple Watch Series 3","Watch3,2":"Apple Watch Series 3","Watch3,3":"Apple Watch Series 3","Watch3,4":"Apple Watch Series 3","Watch4,1":"Apple Watch Series 4","Watch4,2":"Apple Watch Series 4","Watch4,3":"Apple Watch Series 4","Watch4,4":"Apple Watch Series 4","Watch5,1":"Apple Watch Series 5","Watch5,2":"Apple Watch Series 5","Watch5,3":"Apple Watch Series 5","Watch5,4":"Apple Watch Series 5","Watch5,9":"Apple Watch SE","Watch5,10":"Apple Watch SE","Watch5,11":"Apple Watch SE","Watch5,12":"Apple Watch SE","Watch6,1":"Apple Watch Series 6","Watch6,2":"Apple Watch Series 6","Watch6,3":"Apple Watch Series 6","Watch6,4":"Apple Watch Series 6","AppleTV1,1":"Apple TV (1st generation)","AppleTV2,1":"Apple TV (2nd generation)","AppleTV3,1":"Apple TV (3rd generation)","AppleTV3,2":"Apple TV (3rd generation)","AppleTV5,3":"Apple TV (4th generation)","AppleTV6,2":"Apple TV 4K","AirPods1,1":"AirPods (1st generation)","AirPods2,1":"AirPods (2nd generation)","iProd8,1":"AirPods Pro"};var o=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(i){if("string"!=typeof i)return null;if(null===e)return i;const[t,...n]=i.split(" "),o=a[t];return void 0===o?i:`${o} ${n.join(" ")}`}function s(e){let{value:i,children:t}=e;const a=(0,n.useMemo)((()=>r(i)),[i]);return a?(0,o.tZ)("span",{"data-test-id":"loaded-device-name",children:t?t(a):a}):null}e=t.hmd(e)},"./app/utils/attachmentUrl.tsx":(e,i,t)=>{t.d(i,{Z:()=>d});var n=t("../node_modules/react/index.js"),a=t("./app/components/acl/role.tsx"),o=t("./app/utils/withOrganization.tsx"),r=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){let{attachment:i,organization:t,eventId:n,projectId:o,children:s}=e;return(0,r.tZ)(a.u,{role:t.attachmentsRole,children:e=>{let{hasRole:a}=e;return s(a?`/api/0/projects/${t.slug}/${o}/events/${n}/attachments/${i.id}/`:null)}})}s.displayName="AttachmentUrl";const d=(0,o.Z)((0,n.memo)(s))},"./app/views/organizationGroupDetails/groupEvents.tsx":(e,i,t)=>{t.r(i),t.d(i,{GroupEvents:()=>L,default:()=>R});var n=t("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=t("../node_modules/react/index.js"),r=t("../node_modules/react-router/es/index.js"),s=t("../node_modules/lodash/pick.js"),d=t.n(s),h=t("./app/components/emptyStateWarning.tsx"),c=t("./app/components/environmentPageFilter.tsx"),P=t("./app/components/avatar/userAvatar.tsx"),l=t("./app/components/dateTime.tsx"),p=t("./app/components/deviceName.tsx"),u=t("./app/components/fileSize.tsx"),m=t("./app/components/globalSelectionLink.tsx"),g=t("./app/utils/attachmentUrl.tsx"),v=t("./app/utils/withOrganization.tsx"),A=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends o.Component{renderCrashFileLink(){const{event:e,projectId:i}=this.props;if(!e.crashFile)return null;const t="event.minidump"===e.crashFile.type?"Minidump":"Crash file";return(0,A.tZ)(g.Z,{projectId:i,eventId:e.id,attachment:e.crashFile,children:i=>{var n,a;return i?(0,A.BX)("small",{children:[t,": ",(0,A.tZ)("a",{href:`${i}?download=1`,children:null===(n=e.crashFile)||void 0===n?void 0:n.name})," (",(0,A.tZ)(u.Z,{bytes:(null===(a=e.crashFile)||void 0===a?void 0:a.size)||0}),")"]}):null}})}render(){const{className:e,event:i,orgId:t,groupId:n,tagList:a,hasUser:o}=this.props,r={};i.tags.forEach((e=>{r[e.key]=e.value}));const s=`/organizations/${t}/issues/${n}/events/${i.id}/`;return(0,A.BX)("tr",{className:e,children:[(0,A.tZ)("td",{children:(0,A.BX)("h5",{children:[(0,A.tZ)(m.Z,{to:s,children:(0,A.tZ)(l.Z,{date:i.dateCreated,year:!0,seconds:!0,timeZone:!0})}),(0,A.tZ)("small",{children:i.title.substr(0,100)}),this.renderCrashFileLink()]})}),o&&(0,A.tZ)("td",{className:"event-user table-user-info",children:i.user?(0,A.BX)("div",{children:[(0,A.tZ)(P.Z,{user:i.user,size:24,className:"avatar",gravatar:!1}),i.user.email]}):(0,A.tZ)("span",{children:"â€”"})}),a.map((e=>(0,A.tZ)("td",{children:(0,A.tZ)("div",{children:"device"===e.key?(0,A.tZ)(p.H,{value:r[e.key]}):r[e.key]})},e.key)))]},i.id)}}y.displayName="EventsTableRow";const Z=(0,v.Z)(y);var W=t("./app/locale.tsx");class x extends o.Component{render(){const{events:e,tagList:i,orgId:t,projectId:n,groupId:a}=this.props,o=!!e.find((e=>e.user));return(0,A.BX)("table",{className:"table events-table",children:[(0,A.tZ)("thead",{children:(0,A.BX)("tr",{children:[(0,A.tZ)("th",{children:(0,W.t)("ID")}),o&&(0,A.tZ)("th",{children:(0,W.t)("User")}),i.map((e=>(0,A.tZ)("th",{children:e.name},e.key)))]})}),(0,A.tZ)("tbody",{children:e.map((e=>(0,A.tZ)(Z,{event:e,orgId:t,projectId:n,groupId:a,tagList:i,hasUser:o},e.id)))})]})}}x.displayName="EventsTable";const S=x;var f=t("./app/components/layouts/thirds.tsx"),j=t("./app/components/loadingError.tsx"),b=t("./app/components/loadingIndicator.tsx"),I=t("./app/components/pagination.tsx"),q=t("./app/components/panels/index.tsx"),k=t("./app/components/searchBar.tsx"),E=t("./app/styles/space.tsx"),T=t("./app/utils/parseApiError.tsx"),_=t("./app/utils/withApi.tsx");class L extends o.Component{constructor(e){super(e),(0,n.Z)(this,"handleSearch",(e=>{const i={...this.props.location.query};i.query=e;const{groupId:t,orgId:n}=this.props.params;r.browserHistory.push({pathname:`/organizations/${n}/issues/${t}/events/`,query:i})})),(0,n.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1});const e={...d()(this.props.location.query,["cursor","environment"]),limit:50,query:this.state.query};this.props.api.request(`/issues/${this.props.params.groupId}/events/`,{query:e,method:"GET",success:(e,i,t)=>{var n;this.setState({eventList:e,error:!1,loading:!1,pageLinks:null!==(n=null==t?void 0:t.getResponseHeader("Link"))&&void 0!==n?n:""})},error:e=>{this.setState({error:(0,T.Z)(e),loading:!1})}})}));const i=this.props.location.query;this.state={eventList:[],loading:!0,error:!1,pageLinks:"",query:i.query||""}}UNSAFE_componentWillMount(){this.fetchData()}UNSAFE_componentWillReceiveProps(e){if(this.props.location.search!==e.location.search){const i=e.location.query;this.setState({query:i.query},this.fetchData)}}renderNoQueryResults(){return(0,A.tZ)(h.Z,{children:(0,A.tZ)("p",{children:(0,W.t)("Sorry, no events match your search query.")})})}renderEmpty(){return(0,A.tZ)(h.Z,{children:(0,A.tZ)("p",{children:(0,W.t)("There don't seem to be any events yet.")})})}renderResults(){const{group:e,params:i}=this.props,t=e.tags.filter((e=>"user"!==e.key))||[];return(0,A.tZ)(S,{tagList:t,events:this.state.eventList,orgId:i.orgId,projectId:e.project.slug,groupId:i.groupId})}renderBody(){let e;return e=this.state.loading?(0,A.tZ)(b.Z,{}):this.state.error?(0,A.tZ)(j.Z,{message:this.state.error,onRetry:this.fetchData}):this.state.eventList.length>0?this.renderResults():this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty(),e}render(){return(0,A.tZ)(f.uT,{children:(0,A.tZ)(f.or,{fullWidth:!0,children:(0,A.BX)(w,{children:[(0,A.BX)(N,{children:[(0,A.tZ)(c.Z,{}),(0,A.tZ)(k.Z,{defaultQuery:"",placeholder:(0,W.t)("Search events by id, message, or tags"),query:this.state.query,onSearch:this.handleSearch})]}),(0,A.tZ)(q.s_,{className:"event-list",children:(0,A.tZ)(q.N,{children:this.renderBody()})}),(0,A.tZ)(I.Z,{pageLinks:this.state.pageLinks})]})})})}}L.displayName="GroupEvents";const N=(0,a.Z)("div",{target:"etd8qom1"})("display:grid;gap:",(0,E.Z)(1),";grid-template-columns:max-content 1fr;"),w=(0,a.Z)("div",{target:"etd8qom0"})("display:grid;gap:",(0,E.Z)(2),";"),R=(0,v.Z)((0,_.Z)(L))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupEvents_tsx.8a04afd715716bb35d9168a8b49cc6fd.js.map