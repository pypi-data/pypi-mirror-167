"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectEnvironments_tsx"],{"./app/components/links/listLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>u});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),r=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/classnames/index.js"),d=n.n(a),p=n("../node_modules/lodash/omit.js"),c=n.n(p),l=n("../node_modules/query-string/index.js"),m=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class h extends o.Component{constructor(){super(...arguments),(0,s.Z)(this,"getClassName",(()=>{const e={},{className:t,activeClassName:n}=this.props;return t&&(e[t]=!0),this.isActive()&&n&&(e[n]=!0),d()(e)}))}isActive(){const{isActive:e,to:t,query:n,index:s,router:i}=this.props,o=n?l.parse(n):void 0,r="string"==typeof t?{pathname:t,query:o}:t;return"function"==typeof e?e(r,s):i.isActive(r,s)}render(){const{index:e,children:t,to:n,disabled:s,...i}=this.props,o=c()(i,"activeClassName","css","isActive","index","router","location");return(0,m.tZ)(v,{className:this.getClassName(),disabled:s,children:(0,m.tZ)(r.Link,{...o,onlyActiveOnIndex:e,to:s?"":n,children:t})})}}h.displayName="ListLink",(0,s.Z)(h,"displayName","ListLink"),(0,s.Z)(h,"defaultProps",{activeClassName:"active",index:!1,disabled:!1});const u=(0,r.withRouter)(h),v=(0,i.Z)("li",{shouldForwardProp:e=>"disabled"!==e,target:"er8tqc10"})((e=>e.disabled&&`\n   a {\n    color:${e.theme.disabled} !important;\n    pointer-events: none;\n    :hover {\n      color: ${e.theme.disabled}  !important;\n    }\n   }\n`),";")},"./app/utils/environment.tsx":(e,t,n)=>{function s(e){return e.name?encodeURIComponent(e.name):e.displayName?encodeURIComponent(e.displayName):"none"}function i(e){return e.name||e.displayName||"(No Environment)"}n.d(t,{G:()=>i,z:()=>s})},"./app/utils/recreateRoute.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var s=n("../node_modules/lodash/findLastIndex.js"),i=n.n(s),o=n("./app/utils/replaceRouterParams.tsx");function r(e,t){var n,s;const{routes:r,params:a,location:d,stepBack:p}=t,c=r.map((e=>{let{path:t}=e;return t||""}));let l,m;"string"!=typeof e?(m=r.indexOf(e)+1,l=i()(c.slice(0,m),(e=>"/"===e[0]))):l=i()(c,(e=>"/"===e[0]));let h=c.slice(l,m);void 0!==p&&(h=h.slice(0,p));const u=null!==(n=null==d?void 0:d.search)&&void 0!==n?n:"",v=null!==(s=null==d?void 0:d.hash)&&void 0!==s?s:"",x=`${h.join("")}${"string"!=typeof e?"":e}${u}${v}`;return(0,o.Z)(x,a)}},"./app/views/settings/project/permissionAlert.tsx":(e,t,n)=>{n.d(t,{Z:()=>d});var s=n("./app/components/acl/access.tsx"),i=n("./app/components/alert.tsx"),o=n("./app/locale.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=e=>{let{access:t=["project:write"],...n}=e;return(0,r.tZ)(s.Z,{access:t,children:e=>{let{hasAccess:t}=e;return!t&&(0,r.tZ)(i.Z,{type:"warning",...n,children:(0,o.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")})}})};a.displayName="PermissionAlert";const d=a},"./app/views/settings/project/projectEnvironments.tsx":(e,t,n)=>{n.r(t),n.d(t,{ProjectEnvironments:()=>f,default:()=>k});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),r=n("./app/actionCreators/indicator.tsx"),a=n("./app/components/acl/access.tsx"),d=n("./app/components/button.tsx"),p=n("./app/components/emptyMessage.tsx"),c=n("./app/components/links/listLink.tsx"),l=n("./app/components/loadingIndicator.tsx"),m=n("./app/components/navTabs.tsx"),h=n("./app/components/panels/index.tsx"),u=n("./app/components/sentryDocumentTitle.tsx"),v=n("./app/constants/index.tsx"),x=n("./app/locale.tsx"),Z=n("./app/styles/space.tsx"),j=n("./app/utils/environment.tsx"),g=n("./app/utils/recreateRoute.tsx"),y=n("./app/utils/withApi.tsx"),b=n("./app/views/settings/components/settingsPageHeader.tsx"),w=n("./app/views/settings/project/permissionAlert.tsx"),_=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class f extends o.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{project:null,environments:null,isLoading:!0}),(0,s.Z)(this,"toggleEnv",((e,t)=>{const{orgId:n,projectId:s}=this.props.params;this.props.api.request(`/projects/${n}/${s}/environments/${(0,j.z)(e)}/`,{method:"PUT",data:{name:e.name,isHidden:t},success:()=>{(0,r.S9)((0,x._N)("Updated [environment]",{environment:(0,j.G)(e)}))},error:()=>{(0,r.Iw)((0,x._N)("Unable to update [environment]",{environment:(0,j.G)(e)}))},complete:this.fetchData.bind(this)})}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){this.props.location.pathname.endsWith("hidden/")!==e.location.pathname.endsWith("hidden/")&&this.fetchData()}fetchData(){const e=this.props.location.pathname.endsWith("hidden/");this.state.isLoading||this.setState({isLoading:!0});const{orgId:t,projectId:n}=this.props.params;this.props.api.request(`/projects/${t}/${n}/environments/`,{query:{visibility:e?"hidden":"visible"},success:e=>{this.setState({environments:e,isLoading:!1})}})}fetchProjectDetails(){const{orgId:e,projectId:t}=this.props.params;this.props.api.request(`/projects/${e}/${t}/`,{success:e=>{this.setState({project:e})}})}renderEmpty(){const e=this.props.location.pathname.endsWith("hidden/")?(0,x.t)("You don't have any hidden environments."):(0,x.t)("You don't have any environments yet.");return(0,_.tZ)(p.Z,{children:e})}renderAllEnvironmentsSystemRow(){return this.props.location.pathname.endsWith("hidden/")?null:(0,_.tZ)(A,{name:v.UZ,environment:{id:v.UZ,name:v.UZ,displayName:v.UZ},isSystemRow:!0})}renderEnvironmentList(e){const t=this.props.location.pathname.endsWith("hidden/"),n=t?(0,x.t)("Show"):(0,x.t)("Hide");return(0,_.BX)(o.Fragment,{children:[this.renderAllEnvironmentsSystemRow(),e.map((e=>(0,_.tZ)(A,{name:e.name,environment:e,isHidden:t,onHide:this.toggleEnv,actionText:n,shouldShowAction:!0},e.id)))]})}renderBody(){const{environments:e,isLoading:t}=this.state;return t?(0,_.tZ)(l.Z,{}):(0,_.tZ)(h.N,{children:null!=e&&e.length?this.renderEnvironmentList(e):this.renderEmpty()})}render(){const{routes:e,params:t,location:n}=this.props,s=n.pathname.endsWith("hidden/"),i=(0,g.Z)("",{routes:e,params:t,stepBack:-1});return(0,_.BX)("div",{children:[(0,_.tZ)(u.Z,{title:(0,x.t)("Environments"),projectSlug:t.projectId}),(0,_.tZ)(b.Z,{title:(0,x.t)("Manage Environments"),tabs:(0,_.BX)(m.Z,{underlined:!0,children:[(0,_.tZ)(c.Z,{to:i,index:!0,isActive:()=>!s,children:(0,x.t)("Environments")}),(0,_.tZ)(c.Z,{to:`${i}hidden/`,index:!0,isActive:()=>s,children:(0,x.t)("Hidden")})]})}),(0,_.tZ)(w.Z,{}),(0,_.BX)(h.s_,{children:[(0,_.tZ)(h.V9,{children:s?(0,x.t)("Hidden"):(0,x.t)("Active Environments")}),this.renderBody()]})]})}}function A(e){let{environment:t,name:n,onHide:s,shouldShowAction:i=!1,isSystemRow:r=!1,isHidden:d=!1,actionText:p=""}=e;return(0,_.BX)(N,{children:[(0,_.tZ)(E,{children:r?(0,x.t)("All Environments"):n}),(0,_.tZ)(a.Z,{access:["project:write"],children:e=>{let{hasAccess:n}=e;return(0,_.tZ)(o.Fragment,{children:i&&s&&(0,_.tZ)(L,{size:"xs",disabled:!n,onClick:()=>s(t,!d),children:p})})}})]})}f.displayName="ProjectEnvironments",A.displayName="EnvironmentRow";const N=(0,i.Z)(h.Lv,{target:"e1heia562"})({name:"1tz8p38",styles:"align-items:center;justify-content:space-between"}),E=(0,i.Z)("div",{target:"e1heia561"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),L=(0,i.Z)(d.ZP,{target:"e1heia560"})("margin-left:",(0,Z.Z)(.5),";"),k=(0,y.Z)(f)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectEnvironments_tsx.56dc113731499a98c254114146637546.js.map