"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_projects_missingProjectMembership_tsx"],{"./app/components/projects/missingProjectMembership.tsx":(e,t,s)=>{s.d(t,{Z:()=>P});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("./app/actionCreators/indicator.tsx"),r=s("./app/actionCreators/teams.tsx"),l=s("./app/components/button.tsx"),c=s("./app/components/emptyMessage.tsx"),p=s("./app/components/forms/selectControl.tsx"),d=s("./app/components/panels/index.tsx"),m=s("./app/icons/index.tsx"),h=s("./app/locale.tsx"),u=s("./app/stores/teamStore.tsx"),g=s("./app/styles/space.tsx"),Z=s("./app/utils/withApi.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends n.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!1,error:!1,project:this.props.project,team:""}),(0,o.Z)(this,"getPendingTeamOption",(e=>({value:e,label:(0,b.tZ)(T,{children:(0,h.t)(`#${e}`)})})))}joinTeam(e){this.setState({loading:!0}),(0,r.um)(this.props.api,{orgId:this.props.organization.slug,teamId:e},{success:()=>{this.setState({loading:!1,error:!1}),(0,a.S9)((0,h.t)("Request to join team sent."))},error:()=>{this.setState({loading:!1,error:!0}),(0,a.Iw)((0,h.t)("There was an error while trying to request access."))}})}renderJoinTeam(e,t){const s=u.Z.getBySlug(e);return s?this.state.loading?t.has("open-membership")?(0,b.tZ)(l.ZP,{busy:!0,children:(0,h.t)("Join Team")}):(0,b.tZ)(l.ZP,{busy:!0,children:(0,h.t)("Request Access")}):null!=s&&s.isPending?(0,b.tZ)(l.ZP,{disabled:!0,children:(0,h.t)("Request Pending")}):t.has("open-membership")?(0,b.tZ)(l.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,h.t)("Join Team")}):(0,b.tZ)(l.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,h.t)("Request Access")}):null}getTeamsForAccess(){var e,t;const s=[],o=[];return(null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.teams)&&void 0!==e?e:[]).forEach((e=>{let{slug:t}=e;const i=u.Z.getBySlug(t);i&&(i.isPending?o.push(i.slug):s.push(i.slug))})),[s,o]}render(){var e,t;const{organization:s}=this.props,o=this.state.team,i=null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.teams)&&void 0!==e?e:[],n=new Set(s.features),a=[{label:(0,h.t)("Request Access"),options:this.getTeamsForAccess()[0].map((e=>({value:e,label:(0,h.t)(`#${e}`)})))},{label:(0,h.t)("Pending Requests"),options:this.getTeamsForAccess()[1].map((e=>this.getPendingTeamOption(e)))}];return(0,b.tZ)(j,{children:i.length?(0,b.tZ)(c.Z,{icon:(0,b.tZ)(m.Gy,{size:"xl"}),title:(0,h.t)("You're not a member of this project."),description:(0,h.t)("You'll need to join a team with access before you can view this data."),action:(0,b.BX)(x,{children:[(0,b.tZ)(v,{name:"select",placeholder:(0,h.t)("Select a Team"),options:a,onChange:e=>{const t=e?e.value:null;this.setState({team:t})}}),o?this.renderJoinTeam(o,n):(0,b.tZ)(l.ZP,{disabled:!0,children:(0,h.t)("Select a Team")})]})}):(0,b.tZ)(c.Z,{icon:(0,b.tZ)(m.Gy,{size:"xl"}),children:(0,h.t)("No teams have access to this project yet. Ask an admin to add your team to this project.")})})}}y.displayName="MissingProjectMembership";const j=(0,i.Z)(d.s_,{target:"e1cfryqt3"})("margin:",(0,g.Z)(2)," 0;"),x=(0,i.Z)("div",{target:"e1cfryqt2"})("display:grid;grid-auto-flow:column;gap:",(0,g.Z)(2),";text-align:left;"),v=(0,i.Z)(p.Z,{target:"e1cfryqt1"})({name:"xu0q36",styles:"width:250px"}),T=(0,i.Z)("div",{target:"e1cfryqt0"})({name:"v6ye5b",styles:"display:flex;opacity:0.5;overflow:hidden"}),P=(0,Z.Z)(y)}}]);
//# sourceMappingURL=../sourcemaps/app_components_projects_missingProjectMembership_tsx.af010f7db74417ebb900356b129d0d6d.js.map