(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionReplays_index_tsx-node_modules_lodash__ba-240a92"],{"./app/views/performance/transactionSummary/transactionReplays/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>X});var a=n("../node_modules/react/index.js"),s=n("./app/components/acl/feature.tsx"),o=n("./app/components/alert.tsx"),i=n("./app/components/layouts/thirds.tsx"),r=n("./app/components/loadingIndicator.tsx"),l=n("./app/locale.tsx"),p=n("./app/styles/organization.tsx"),c=n("./app/utils/discover/eventView.tsx"),u=n("./app/utils/queryString.tsx"),d=n("./app/utils/tokenizeSearch.tsx"),m=n("./app/utils/withOrganization.tsx"),y=n("./app/utils/withProjects.tsx"),g=n("./app/views/performance/transactionSummary/pageLayout.tsx"),h=n("./app/views/performance/transactionSummary/tabs.tsx"),f=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),v=n("../node_modules/react-router/es/index.js"),w=n("../node_modules/lodash/first.js"),x=n.n(w),Z=n("../node_modules/lodash/omit.js"),j=n.n(Z),_=n("./app/components/datePageFilter.tsx"),b=n("./app/components/environmentPageFilter.tsx"),z=n("./app/components/events/searchBar.tsx"),S=n("./app/components/organizations/pageFilterBar.tsx"),V=n("./app/components/organizations/pageFilters/parse.tsx"),k=n("./app/components/pagination.tsx"),q=n("./app/styles/space.tsx"),F=n("./app/utils.tsx"),R=n("./app/views/replays/replayTable.tsx"),P=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function L(e){let{eventView:t,isFetching:n,location:a,organization:s,pageLinks:o,replays:r}=e;const l=a.query;return(0,P.BX)(i.or,{fullWidth:!0,children:[(0,P.BX)(E,{children:[(0,P.BX)(S.Z,{condensed:!0,children:[(0,P.tZ)(b.Z,{}),(0,P.tZ)(_.Z,{alignDropdown:"left"})]}),(0,P.tZ)(z.Z,{organization:s,projectIds:t.project,query:l.query,fields:t.fields,onSearch:(p="query",function(e){const t=(0,V.fK)({...a.query||{},[p]:e}),n=["cursor"];(0,F.ri)(e)||n.push(p);const s=j()(t,n);v.browserHistory.push({...a,query:s})})})]}),(0,P.tZ)(R.Z,{isFetching:n,replays:r,showProjectColumn:!1,sort:x()(t.sorts)||{field:"startedAt",kind:"asc"}}),(0,P.tZ)(k.Z,{pageLinks:o})]});var p}L.displayName="ReplaysContent";const E=(0,f.Z)("div",{target:"er3ps120"})("display:grid;gap:",(0,q.Z)(2),";margin-bottom:",(0,q.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:auto 1fr;}"),N=L;n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var A=n("./app/utils/discover/genericDiscoverQuery.tsx"),C=n("./app/utils/replays/fetchReplayList.tsx"),I=n("./app/utils/useApi.tsx");function W(){return(0,P.tZ)(p.JH,{children:(0,P.tZ)(o.Z,{type:"warning",children:(0,l.t)("You don't have access to this feature")})})}function B(e){const{location:t,organization:n,projects:a}=e;return(0,P.tZ)(s.Z,{features:["session-replay-ui"],organization:n,renderDisabled:W,children:(0,P.tZ)(g.ZP,{location:t,organization:n,projects:a,tab:h.Z.Replays,getDocumentTitle:D,generateEventView:Q,childComponent:T})})}function T(e){let{eventView:t,location:n,organization:s,setError:o}=e;const{eventView:l,replays:p,pageLinks:d,isFetching:m,fetchError:y}=function(e){let{eventsWithReplaysView:t,location:n,organization:s}=e;const o=(0,I.Z)(),[i,r]=(0,a.useState)({fetchError:void 0,isFetching:!0,pageLinks:null,replays:[],eventView:void 0}),l=(0,a.useCallback)((async()=>{const e=await async function(e){let{api:t,eventView:n,location:a,organization:s}=e;try{const[e]=await(0,A.AA)(t,`/organizations/${s.slug}/events/`,n.getEventsAPIPayload(a));return e.data.map((e=>String(e.replayId)))}catch(e){return null}}({api:o,eventView:t,location:n,organization:s}),a=c.ZP.fromNewQueryWithLocation({id:"",name:"Replays within a transaction",version:2,fields:C.p8,projects:[],query:`id:[${String(e)}]`},n);a.sorts=(0,c.vp)((0,u.ro)(n.query.sort,C.yw));const i=await(0,C.ZP)({api:o,eventView:a,location:n,organization:s});r({...i,eventView:a})}),[o,t,n,s]);return(0,a.useEffect)((()=>{l()}),[l]),i}({eventsWithReplaysView:t,location:n,organization:s});return(0,a.useEffect)((()=>{o(null==y?void 0:y.message)}),[o,y]),m||!l?(0,P.tZ)(i.or,{fullWidth:!0,children:(0,P.tZ)(r.Z,{})}):p?(0,P.tZ)(N,{eventView:l,isFetching:m,location:n,organization:s,pageLinks:d,replays:p}):(0,P.tZ)(a.Fragment,{children:null})}function D(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,l.t)("Replays")].join(" — "):[(0,l.t)("Summary"),(0,l.t)("Replays")].join(" — ")}function Q(e){let{location:t,transactionName:n}=e;const a=(0,u.ro)(t.query.query,""),s=new d.MY(a);return s.addFilterValues("transaction",[n]),s.addFilterValues("!replayId",[""]),c.ZP.fromNewQueryWithLocation({id:"",name:"Replay events within a transaction",version:2,fields:["replayId","count()"],query:s.formatString(),projects:[]},t)}W.displayName="renderNoAccess",B.displayName="TransactionReplays";const X=(0,y.Z)((0,m.Z)(B))},"../node_modules/lodash/_baseExtremum.js":(e,t,n)=>{var a=n("../node_modules/lodash/isSymbol.js");e.exports=function(e,t,n){for(var s=-1,o=e.length;++s<o;){var i=e[s],r=t(i);if(null!=r&&(void 0===l?r==r&&!a(r):n(r,l)))var l=r,p=i}return p}},"../node_modules/lodash/_baseGt.js":e=>{e.exports=function(e,t){return e>t}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionReplays_index_tsx-node_modules_lodash__ba-240a92.ec6ba6504f421dc00207c1e98038d140.js.map