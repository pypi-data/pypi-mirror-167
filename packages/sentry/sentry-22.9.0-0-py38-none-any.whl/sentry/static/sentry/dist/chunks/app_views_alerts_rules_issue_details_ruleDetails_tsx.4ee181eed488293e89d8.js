"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_rules_issue_details_ruleDetails_tsx"],{"./app/components/charts/areaChart.tsx":(e,t,r)=>{r.d(t,{T:()=>i});var n=r("./app/components/charts/series/lineSeries.tsx"),o=r("./app/components/charts/baseChart.tsx"),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{series:t,stacked:r,colors:i,...a}=e;return(0,s.tZ)(o.Z,{...a,"data-test-id":"area-chart",colors:i,series:t.map(((e,t)=>{let{seriesName:o,data:s,...a}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({...e})}({stack:r?"area":void 0,name:o,data:s.map((e=>{let{name:t,value:r}=e;return[t,r]})),lineStyle:{color:null==i?void 0:i[t],opacity:1,width:.4},areaStyle:{color:null==i?void 0:i[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...a})}))})}i.displayName="AreaChart"},"./app/components/charts/chartZoom.tsx":(e,t,r)=>{r.d(t,{Z:()=>y});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),s=r("../node_modules/moment/moment.js"),i=r.n(s),a=r("../node_modules/query-string/index.js"),l=r("./app/actionCreators/pageFilters.tsx"),d=r("./app/components/charts/components/dataZoomInside.tsx");r("../node_modules/echarts/lib/component/dataZoomSlider.js");const c={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function u(e){return e&&Array.isArray(e)?e:[{...c,...e}]}var p=r("./app/components/charts/components/toolBox.tsx"),m=r("./app/utils/callIfFunction.tsx"),h=r("./app/utils/dates.tsx");const g=e=>e?i().utc(e).format(i().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class Z extends o.Component{constructor(e){var t;super(e),t=this,(0,n.Z)(this,"history",void 0),(0,n.Z)(this,"currentPeriod",void 0),(0,n.Z)(this,"zooming",null),(0,n.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,n.Z)(this,"setPeriod",(function(e){let{period:r,start:n,end:o}=e,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:i,onZoom:d,usePageDate:c}=t.props,u=g(n),p=g(o);s&&t.history.push(t.currentPeriod),(0,m.g)(d,{period:r,start:u,end:p}),t.zooming=()=>{if(c&&i){const e={...i.location.query,pageStart:n?(0,h.v5)(n):void 0,pageEnd:o?(0,h.v5)(o):void 0,pageStatsPeriod:null!=r?r:void 0};a.stringify(e)!==a.stringify(i.location.query)&&i.push({pathname:i.location.pathname,query:e})}else(0,l.dR)({period:r,start:u?(0,h.hC)(u):u,end:p?(0,h.hC)(p):p},i);t.saveCurrentPeriod({period:r,start:n,end:o})}})),(0,n.Z)(this,"handleChartReady",(e=>{(0,m.g)(this.props.onChartReady,e)})),(0,n.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],(0,m.g)(this.props.onRestore,e,t))})),(0,n.Z)(this,"handleDataZoom",((e,t)=>{const r=t.getModel(),{startValue:n,endValue:o}=r._payload.batch[0];if(null===n&&null===o){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=i().utc(n),t=i().utc(o);this.setPeriod({period:null,start:e,end:t},!0)}(0,m.g)(this.props.onDataZoom,e,t)})),(0,n.Z)(this,"handleChartFinished",((e,t)=>{var r;"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const n=null===(r=t._componentsViews)||void 0===r?void 0:r.find((e=>e._features&&e._features.dataZoom));n&&!n._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:r,disabled:n,children:o,xAxisIndex:s,router:i,onZoom:a,onRestore:l,onChartReady:c,onDataZoom:m,onFinished:g,showSlider:Z,chartZoomOptions:y,...f}=this.props,v=null!=e?e:void 0,x=t?(0,h.hC)(t):void 0,E=r?(0,h.hC)(r):void 0;return o(n?{utc:v,start:x,end:E,...f}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:v,start:x,end:E,dataZoom:Z?[...u({xAxisIndex:s,...y}),...(0,d.Z)({xAxisIndex:s,...y})]:(0,d.Z)({xAxisIndex:s,...y}),showTimeInTooltip:!0,toolBox:(0,p.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...f})}}Z.displayName="ChartZoom";const y=Z},"./app/components/charts/components/dataZoomInside.tsx":(e,t,r)=>{r.d(t,{Z:()=>o}),r("../node_modules/echarts/lib/component/dataZoomInside.js");const n={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function o(e){return e&&Array.isArray(e)?e:[{...n,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,r)=>{function n(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function o(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:n(t),...e}}r.d(t,{Z:()=>o})},"./app/components/keyValueTable.tsx":(e,t,r)=>{r.d(t,{G:()=>l,v:()=>a});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=r("../node_modules/react/index.js"),s=r("./app/styles/space.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,n.Z)("dl",{target:"e13z4zle2"})({name:"u4s7v9",styles:"display:grid;grid-template-columns:50% 50%"}),l=e=>{let{keyName:t,value:r}=e;return(0,i.BX)(o.Fragment,{children:[(0,i.tZ)(c,{children:t}),(0,i.tZ)(u,{children:r})]})};l.displayName="KeyValueTableRow";const d=e=>{let{theme:t}=e;return`\nfont-size: ${t.fontSizeMedium};\npadding: ${(0,s.Z)(.5)} ${(0,s.Z)(1)};\nfont-weight: normal;\nline-height: inherit;\n${e=>e.theme.overflowEllipsis};\n&:nth-of-type(2n-1) {\n  background-color: ${t.backgroundSecondary};\n}\n`},c=(0,n.Z)("dt",{target:"e13z4zle1"})(d,";color:",(e=>e.theme.textColor),";"),u=(0,n.Z)("dd",{target:"e13z4zle0"})(d,";color:",(e=>e.theme.subText),";text-align:right;")},"./app/components/pageTimeRangeSelector.tsx":(e,t,r)=>{r.d(t,{Z:()=>p});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=r("./app/components/organizations/timeRangeSelector/index.tsx"),s=r("./app/components/panels/index.tsx"),i=r("./app/locale.tsx"),a=r("./app/styles/space.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{className:t,...r}=e;return(0,l.tZ)(c,{className:t,children:(0,l.tZ)(o.Z,{label:(0,l.tZ)(u,{children:(0,i.t)("Date Range:")}),detached:!0,...r},`period:${r.relative}-start:${r.start}-end:${r.end}-utc:${r.utc}-defaultPeriod:${r.defaultPeriod}`)})}d.displayName="PageTimeRangeSelector";const c=(0,n.Z)(s.s_,{target:"e1hsuxgy1"})("padding:0;margin:0;display:flex;justify-content:center;align-items:center;height:42px;background:",(e=>e.theme.background),";border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";>div{width:100%;align-self:stretch;}>div>div:first-child>div{padding:0 ",(0,a.Z)(2),";}>div>div:last-child:not(:first-child){min-width:calc(100% + 2px);transform:translateX(-1px);right:auto;}"),u=(0,n.Z)("span",{target:"e1hsuxgy0"})("text-align:left;font-weight:600;color:",(e=>e.theme.textColor),";>span:last-child{font-weight:400;}"),p=d},"./app/views/alerts/rules/issue/details/ruleDetails.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ae});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/lodash/pick.js")),i=r.n(s),a=r("../node_modules/moment/moment.js"),l=r.n(a),d=r("./app/components/asyncComponent.tsx"),c=r("./app/components/breadcrumbs.tsx"),u=r("./app/components/button.tsx"),p=r("./app/components/buttonBar.tsx"),m=r("./app/components/idBadge/index.tsx"),h=r("./app/components/layouts/thirds.tsx"),g=r("./app/components/loadingError.tsx"),Z=r("./app/components/loadingIndicator.tsx"),y=r("./app/components/organizations/pageFilters/container.tsx"),f=r("./app/components/organizations/pageFilters/parse.tsx"),v=r("./app/components/pageTimeRangeSelector.tsx"),x=r("./app/components/sentryDocumentTitle.tsx"),E=r("./app/icons/index.tsx"),S=r("./app/locale.tsx"),_=r("./app/styles/space.tsx"),b=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),T=r("./app/views/alerts/rules/metric/details/constants.tsx"),N=r("../node_modules/react-router/es/index.js"),R=r("./app/components/charts/areaChart.tsx"),A=r("./app/components/charts/chartZoom.tsx"),z=r("./app/components/charts/styles.tsx"),I=r("./app/components/panels/index.tsx"),C=r("./app/components/placeholder.tsx"),D=r("./app/utils/getDynamicText.tsx"),w=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class j extends d.Z{componentDidUpdate(e){const{project:t,organization:r,start:n,end:o,period:s,utc:i}=this.props;e.start===n&&e.end===o&&e.period===s&&e.utc===i&&e.organization.id===r.id&&e.project.id===t.id||this.remountComponent()}getDefaultState(){return{...super.getDefaultState(),ruleFireHistory:[]}}getEndpoints(){const{project:e,organization:t,period:r,start:n,end:o,utc:s,rule:i}=this.props;return[["ruleFireHistory",`/projects/${t.slug}/${e.slug}/rules/${i.id}/stats/`,{query:{...r&&{statsPeriod:r},start:n,end:o,utc:s}}]]}renderChart(){const{router:e,period:t,start:r,end:n,utc:o}=this.props,{ruleFireHistory:s}=this.state,i={seriesName:"Alerts Triggered",data:s.map((e=>({name:e.date,value:e.count}))),emphasis:{disabled:!0}};return(0,w.tZ)(A.Z,{router:e,period:t,start:r,end:n,utc:o,usePageDate:!0,children:e=>(0,w.tZ)(R.T,{...e,isGroupedByDate:!0,showTimeInTooltip:!0,grid:{left:(0,_.Z)(.25),right:(0,_.Z)(2),top:(0,_.Z)(3),bottom:0},yAxis:{minInterval:1},series:[i]})})}renderEmpty(){return(0,w.tZ)(I.s_,{children:(0,w.tZ)(I.N,{withPadding:!0,children:(0,w.tZ)(C.Z,{height:"200px"})})})}render(){const{ruleFireHistory:e,loading:t}=this.state,r=e.reduce(((e,t)=>e+t.count),0);return t?this.renderEmpty():(0,w.BX)(I.s_,{children:[(0,w.BX)(B,{withPadding:!0,children:[(0,w.tZ)(O,{children:(0,w.tZ)(z.ws,{children:(0,S.t)("Alerts Triggered")})}),(0,D.Z)({value:this.renderChart(),fixed:(0,w.tZ)(C.Z,{height:"200px",testId:"skeleton-ui"})})]}),(0,w.BX)(F,{children:[(0,w.tZ)(P,{children:(0,S.t)("Total Alerts")}),(0,w.tZ)(X,{children:r.toLocaleString()})]})]})}}j.displayName="AlertChart";const U=(0,N.withRouter)(j),O=(0,o.Z)("div",{target:"ehsccqr4"})("margin-bottom:",(0,_.Z)(3),";"),F=(0,o.Z)(I.jH,{target:"ehsccqr3"})("display:flex;align-items:center;padding:",(0,_.Z)(1)," 20px;"),P=(0,o.Z)(z.OT,{target:"ehsccqr2"})("display:flex;align-items:center;margin:0;font-weight:bold;font-size:",(e=>e.theme.fontSizeMedium),";line-height:1;"),X=(0,o.Z)("div",{target:"ehsccqr1"})("display:flex;align-items:center;margin:0 ",(0,_.Z)(1),";"),B=(0,o.Z)(I.N,{target:"ehsccqr0"})({name:"sgs7ru",styles:"padding-right:6px"});var H=r("../node_modules/react/index.js"),L=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),k=r("./app/components/count.tsx"),M=r("./app/components/dateTime.tsx"),q=r("./app/components/links/link.tsx"),Y=r("./app/components/pagination.tsx"),$=r("./app/utils/events.tsx");class V extends d.Z{constructor(){super(...arguments),(0,n.Z)(this,"shouldRenderBadRequests",!0)}componentDidUpdate(e){const{project:t,organization:r,start:n,end:o,period:s,utc:i,cursor:a}=this.props;e.start===n&&e.end===o&&e.period===s&&e.utc===i&&e.organization.id===r.id&&e.project.id===t.id&&e.cursor===a||this.remountComponent()}getDefaultState(){return{...super.getDefaultState(),groupHistory:null}}getEndpoints(){const{project:e,rule:t,organization:r,period:n,start:o,end:s,utc:i,cursor:a}=this.props;return[["groupHistory",`/projects/${r.slug}/${e.slug}/rules/${t.id}/group-history/`,{query:{per_page:10,...n&&{statsPeriod:n},start:o,end:s,utc:i,cursor:a}}]]}renderLoading(){return this.renderBody()}renderBody(){const{organization:e,rule:t}=this.props,{loading:r,groupHistory:n,groupHistoryPageLinks:o}=this.state;return(0,w.BX)(H.Fragment,{children:[(0,w.tZ)(W,{isLoading:r,isEmpty:0===(null==n?void 0:n.length),emptyMessage:(0,S.t)("No issues exist for the current query."),headers:[(0,S.t)("Issue"),(0,w.tZ)(K,{children:(0,S.t)("Alerts")},"alerts"),(0,w.tZ)(K,{children:(0,S.t)("Events")},"events"),(0,S.t)("Last Triggered")],children:null==n?void 0:n.map((r=>{let{group:n,count:o,lastTriggered:s}=r;const i=(0,$.FC)(n),{title:a}=(0,$.YQ)(n);return(0,w.BX)(H.Fragment,{children:[(0,w.BX)(J,{children:[(0,w.BX)(q.Z,{to:{pathname:`/organizations/${e.slug}/issues/${n.id}/`,query:t.environment?{environment:t.environment}:{}},children:[a,":"]}),(0,w.tZ)(ee,{children:i})]}),(0,w.tZ)(K,{children:(0,w.tZ)(k.Z,{value:o})}),(0,w.tZ)(K,{children:(0,w.tZ)(k.Z,{value:n.count})}),(0,w.tZ)("div",{children:(0,w.tZ)(Q,{date:(0,D.Z)({value:s,fixed:"Mar 16, 2020 9:10:13 AM UTC"}),year:!0,seconds:!0,timeZone:!0})})]},n.id)}))}),(0,w.tZ)(te,{children:(0,w.tZ)(re,{pageLinks:o,size:"xs"})})]})}}const G=V,W=(0,o.Z)(I.KB,{target:"e1sgzy2g6"})("grid-template-columns:1fr 0.2fr 0.2fr 0.5fr;font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,_.Z)(1.5),";",(e=>!e.isEmpty&&(0,L.iv)("&>div{padding:",(0,_.Z)(1)," ",(0,_.Z)(2),";}","")),";"),K=(0,o.Z)("div",{target:"e1sgzy2g5"})({name:"mnwtso",styles:"text-align:right;font-variant-numeric:tabular-nums"}),Q=(0,o.Z)(M.Z,{target:"e1sgzy2g4"})("white-space:nowrap;color:",(e=>e.theme.subText),";"),J=(0,o.Z)("div",{target:"e1sgzy2g3"})((e=>e.theme.overflowEllipsis),";display:flex;gap:",(0,_.Z)(.5),";min-width:200px;"),ee=(0,o.Z)("span",{target:"e1sgzy2g2"})((e=>e.theme.overflowEllipsis),";color:",(e=>e.theme.textColor),";"),te=(0,o.Z)("div",{target:"e1sgzy2g1"})("display:flex;align-items:center;justify-content:flex-end;margin-bottom:",(0,_.Z)(2),";"),re=(0,o.Z)(Y.Z,{target:"e1sgzy2g0"})({name:"1i9vogi",styles:"margin-top:0"});var ne=r("./app/components/avatar/actorAvatar.tsx"),oe=r("./app/components/keyValueTable.tsx"),se=r("./app/components/timeSince.tsx"),ie=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("./app/views/alerts/rules/metric/types.tsx")),ae=r("./app/views/alerts/utils/constants.tsx");function le(e){let{condition:t}=e;return ae.SD.includes(t.id)?t.comparisonType===ie.t6.PERCENT?(0,w.tZ)(H.Fragment,{children:(0,S.t)("Number of events in an issue is %s%% higher in %s compared to %s ago",t.value,t.comparisonInterval,t.interval)}):(0,w.tZ)(H.Fragment,{children:(0,S.t)("Number of events in an issue is more than %s in %s",t.value,t.interval)}):(0,w.tZ)(H.Fragment,{children:t.name})}function de(e){let{action:t,memberList:r,teams:n}=e;if("Member"===t.targetType){const e=r.find((e=>e.user.id===`${t.targetIdentifier}`));return(0,w.tZ)(H.Fragment,{children:(0,S.t)("Send a notification to %s",null==e?void 0:e.email)})}if("Team"===t.targetType){const e=n.find((e=>e.id===`${t.targetIdentifier}`));return(0,w.tZ)(H.Fragment,{children:(0,S.t)("Send a notification to #%s",null==e?void 0:e.name)})}return"sentry.integrations.slack.notify_action.SlackNotifyServiceAction"===t.id?(0,w.tZ)(H.Fragment,{children:t.name.replace(/\(optionally.*\)/,"")}):(0,w.tZ)(H.Fragment,{children:t.name})}function ce(e){let{rule:t,teams:r,memberList:n}=e;return(0,w.BX)(I.N,{children:[(0,w.tZ)(ye,{children:(0,w.BX)(fe,{children:[(0,w.tZ)(Ee,{children:(0,w.tZ)(E.g6,{color:"gray200",isCircled:!0,direction:"right",size:"sm"})}),(0,w.BX)(ve,{children:[(0,w.tZ)(xe,{children:(0,S._N)("[when:When] an event is captured [selector]",{when:(0,w.tZ)(Se,{}),selector:t.conditions.length?(0,S.t)("and %s...",t.actionMatch):""})}),t.conditions.map(((e,t)=>(0,w.tZ)(_e,{children:(0,w.tZ)(le,{condition:e})},t)))]})]})}),t.filters.length?(0,w.tZ)(ye,{children:(0,w.BX)(fe,{children:[(0,w.tZ)(Ee,{children:(0,w.tZ)(E.g6,{color:"gray200",isCircled:!0,direction:"right",size:"sm"})}),(0,w.BX)(ve,{children:[(0,w.tZ)(xe,{children:(0,S._N)("[if:If] [selector] of these filters match",{if:(0,w.tZ)(Se,{}),selector:t.filterMatch})}),t.filters.map(((e,t)=>(0,w.tZ)(_e,{children:e.time?e.name+"(s)":e.name},t)))]})]})}):null,(0,w.tZ)(ye,{children:(0,w.BX)(fe,{children:[(0,w.tZ)(Ee,{children:(0,w.tZ)(E.g6,{isCircled:!0,color:"gray200",direction:"right",size:"sm"})}),(0,w.BX)("div",{children:[(0,w.tZ)(xe,{children:(0,S._N)("[then:Then] perform these actions",{then:(0,w.tZ)(Se,{})})}),t.actions.length?t.actions.map(((e,t)=>(0,w.tZ)(_e,{children:(0,w.tZ)(de,{action:e,memberList:n,teams:r})},t))):(0,w.tZ)(_e,{children:(0,S.t)("Do nothing")})]})]})})]})}function ue(e){var t,r,n;let{rule:o,teams:s,memberList:i}=e;const a=null===(t=o.owner)||void 0===t?void 0:t.split(":")[1],l=a&&{type:"team",id:a,name:""};return(0,w.BX)(H.Fragment,{children:[(0,w.tZ)(Ze,{children:(0,w.BX)(he,{children:[(0,w.tZ)(be,{noMargin:!0,children:(0,S.t)("Last Triggered")}),(0,w.tZ)(ge,{children:o.lastTriggered?(0,w.tZ)(se.Z,{date:o.lastTriggered}):(0,S.t)("No alerts triggered")})]})}),(0,w.BX)(me,{children:[(0,w.tZ)(be,{noMargin:!0,children:(0,S.t)("Alert Conditions")}),(0,w.tZ)(ce,{rule:o,teams:s,memberList:i})]}),(0,w.BX)(me,{children:[(0,w.tZ)(be,{children:(0,S.t)("Alert Rule Details")}),(0,w.BX)(oe.v,{children:[(0,w.tZ)(oe.G,{keyName:(0,S.t)("Environment"),value:(0,w.tZ)(Te,{children:null!==(r=o.environment)&&void 0!==r?r:"-"})}),o.dateCreated&&(0,w.tZ)(oe.G,{keyName:(0,S.t)("Date Created"),value:(0,w.tZ)(se.Z,{date:o.dateCreated,suffix:(0,S.t)("ago")})}),o.createdBy&&(0,w.tZ)(oe.G,{keyName:(0,S.t)("Created By"),value:(0,w.tZ)(Te,{children:null!==(n=o.createdBy.name)&&void 0!==n?n:"-"})}),(0,w.tZ)(oe.G,{keyName:(0,S.t)("Team"),value:l?(0,w.tZ)(ne.Z,{actor:l,size:24}):(0,S.t)("Unassigned")})]})]})]})}le.displayName="TextCondition",de.displayName="TextAction",ce.displayName="Conditions",ue.displayName="Sidebar";const pe=ue,me=(0,o.Z)("div",{target:"emzltbg12"})("margin-bottom:",(0,_.Z)(3),";"),he=(0,o.Z)("div",{target:"emzltbg11"})({name:"10sya4f",styles:"flex:1;display:flex;flex-direction:column;>*:nth-child(2){flex:1;display:flex;align-items:center;}"}),ge=(0,o.Z)("div",{target:"emzltbg10"})("position:relative;display:grid;grid-template-columns:auto auto auto;gap:",(0,_.Z)(.5),";font-size:",(e=>e.theme.fontSizeLarge),";"),Ze=(0,o.Z)("div",{target:"emzltbg9"})("height:60px;display:flex;margin-bottom:",(0,_.Z)(1.5),";"),ye=(0,o.Z)("div",{target:"emzltbg8"})("position:relative;margin-top:",(0,_.Z)(4),";:first-child{margin-top:",(0,_.Z)(1),";}"),fe=(0,o.Z)("div",{target:"emzltbg7"})({name:"bnlinx",styles:"display:flex;align-items:flex-start;flex-grow:1"}),ve=(0,o.Z)("div",{target:"emzltbg6"})("&::before{content:'';position:absolute;height:100%;top:28px;left:",(0,_.Z)(1),";border-right:1px ",(e=>e.theme.gray200)," dashed;}"),xe=(0,o.Z)("div",{target:"emzltbg5"})("margin-bottom:",(0,_.Z)(.5),";font-size:",(e=>e.theme.fontSizeMedium),";font-weight:400;"),Ee=(0,o.Z)("div",{target:"emzltbg4"})("display:flex;align-items:center;padding:",(0,_.Z)(.5)," ",(0,_.Z)(1)," ",(0,_.Z)(.5)," 0;"),Se=(0,o.Z)("span",{target:"emzltbg3"})("display:inline-block;background-color:",(e=>e.theme.purple300),";padding:0 ",(0,_.Z)(.75),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.white),";text-transform:uppercase;text-align:center;font-size:",(e=>e.theme.fontSizeSmall),";font-weight:400;line-height:1.5;"),_e=(0,o.Z)("span",{target:"emzltbg2"})("display:block;background-color:",(e=>e.theme.surface100),";padding:0 ",(0,_.Z)(.75),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.textColor),";font-size:",(e=>e.theme.fontSizeSmall),";margin-bottom:",(0,_.Z)(1),";width:fit-content;font-weight:400;"),be=(0,o.Z)(z.OT,{target:"emzltbg1"})("margin-top:",(e=>e.noMargin?0:(0,_.Z)(2)),";margin-bottom:",(e=>e.noMargin?0:(0,_.Z)(1)),";"),Te=(0,o.Z)("div",{target:"emzltbg0"})((e=>e.theme.overflowEllipsis),";"),Ne=["pageStatsPeriod","pageStart","pageEnd","pageUtc","cursor"];class Re extends d.Z{constructor(){super(...arguments),(0,n.Z)(this,"shouldRenderBadRequests",!0),(0,n.Z)(this,"handleUpdateDatetime",(e=>{const{start:t,end:r,relative:n,utc:o}=e;if(t&&r){const e=o?l().utc:l();return this.setStateOnUrl({pageStatsPeriod:void 0,pageStart:e(t).format(),pageEnd:e(r).format(),pageUtc:null!=o?o:void 0,cursor:void 0})}return this.setStateOnUrl({pageStatsPeriod:n||void 0,pageStart:void 0,pageEnd:void 0,pageUtc:void 0,cursor:void 0})}))}componentDidMount(){const{organization:e,params:t}=this.props;(0,b.Z)("issue_alert_rule_details.viewed",{organization:e,rule_id:parseInt(t.ruleId,10)})}componentDidUpdate(e){const{params:t}=e,{params:r}=this.props;t.ruleId===r.ruleId&&t.orgId===r.orgId&&t.projectId===r.projectId||this.reloadData()}getDefaultState(){return{...super.getDefaultState(),rule:null,memberList:[]}}getEndpoints(){const{orgId:e,ruleId:t,projectId:r}=this.props.params;return[["rule",`/projects/${e}/${r}/rules/${t}/`,{query:{expand:"lastTriggered"}},{allowError:e=>404===e.status}],["memberList",`/organizations/${e}/users/`,{query:{projectSlug:r}}]]}getDataDatetime(){var e,t;const r=null!==(e=null===(t=this.props.location)||void 0===t?void 0:t.query)&&void 0!==e?e:{},{start:n,end:o,statsPeriod:s,utc:i}=(0,f.fK)(r,{allowEmptyPeriod:!0,allowAbsoluteDatetime:!0,allowAbsolutePageDatetime:!0});if(!s&&!n&&!o)return{period:T.N7};if(s)return{period:s};const a="true"===i;return n&&o?a?{start:l().utc(n).format(),end:l().utc(o).format(),utc:a}:{start:l()(n).utc().format(),end:l()(o).utc().format(),utc:a}:{period:T.N7}}setStateOnUrl(e){return this.props.router.push({...this.props.location,query:{...this.props.location.query,...i()(e,Ne)}})}renderLoading(){return(0,w.tZ)(h.uT,{children:(0,w.tZ)(h.or,{fullWidth:!0,children:(0,w.tZ)(Z.Z,{})})})}renderBody(){const{params:e,location:t,organization:r,project:n}=this.props,{orgId:o,ruleId:s,projectId:i}=e,{cursor:a}=t.query,{period:l,start:d,end:g,utc:Z}=this.getDataDatetime(),{rule:f,memberList:v}=this.state;if(!f)return(0,w.tZ)(Ce,{message:(0,S.t)("The alert rule you were looking for was not found.")});if(!n)return(0,w.tZ)(Ce,{message:(0,S.t)("The project you were looking for was not found.")});const _={pathname:`/organizations/${o}/alerts/new/issue/`,query:{project:n.slug,duplicateRuleId:f.id,createFromDuplicate:!0,referrer:"issue_rule_details"}};return(0,w.BX)(y.Z,{skipInitializeUrlParams:!0,skipLoadLastUsed:!0,shouldForceProject:!0,forceProject:n,children:[(0,w.tZ)(x.Z,{title:f.name,orgSlug:o,projectSlug:i}),(0,w.BX)(h.h4,{children:[(0,w.BX)(h.oB,{children:[(0,w.tZ)(c.Z,{crumbs:[{label:(0,S.t)("Alerts"),to:`/organizations/${o}/alerts/rules/`},{label:f.name,to:null}]}),(0,w.tZ)(h.Dx,{children:(0,w.BX)(Ie,{children:[(0,w.tZ)(m.Z,{project:n,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:n.slug}}),f.name]})})]}),(0,w.tZ)(h.kP,{children:(0,w.BX)(p.ZP,{gap:1,children:[(0,w.tZ)(u.ZP,{icon:(0,w.tZ)(E.vU,{}),to:_,children:(0,S.t)("Duplicate")}),(0,w.tZ)(u.ZP,{icon:(0,w.tZ)(E.yl,{}),to:`/organizations/${o}/alerts/rules/${i}/${s}/`,onClick:()=>(0,b.Z)("issue_alert_rule_details.edit_clicked",{organization:r,rule_id:parseInt(s,10)}),children:(0,S.t)("Edit Rule")})]})})]}),(0,w.BX)(h.uT,{children:[(0,w.BX)(h.or,{children:[(0,w.tZ)(ze,{organization:r,relative:null!=l?l:"",start:null!=d?d:null,end:null!=g?g:null,utc:null!=Z?Z:null,onUpdate:this.handleUpdateDatetime}),(0,w.tZ)(U,{organization:r,orgId:o,project:n,rule:f,period:null!=l?l:"",start:null!=d?d:null,end:null!=g?g:null,utc:null!=Z?Z:null}),(0,w.tZ)(G,{organization:r,project:n,rule:f,period:null!=l?l:"",start:null!=d?d:null,end:null!=g?g:null,utc:null!=Z?Z:null,cursor:a})]}),(0,w.tZ)(h.MF,{children:(0,w.tZ)(pe,{rule:f,memberList:v,teams:n.teams})})]})]})}}const Ae=Re,ze=(0,o.Z)(v.Z,{target:"e1niaui32"})("margin-bottom:",(0,_.Z)(2),";"),Ie=(0,o.Z)("div",{target:"e1niaui31"})("display:grid;grid-template-columns:max-content 1fr;grid-column-gap:",(0,_.Z)(1),";align-items:center;"),Ce=(0,o.Z)(g.Z,{target:"e1niaui30"})("margin:",(0,_.Z)(2),";")},"./app/views/alerts/rules/metric/details/constants.tsx":(e,t,r)=>{r.d(t,{N7:()=>i,U2:()=>c,UC:()=>d,e2:()=>l,ud:()=>s,v3:()=>a});var n=r("./app/locale.tsx"),o=r("./app/views/alerts/rules/metric/types.tsx");const s={[o.XH.SIX_HOURS]:(0,n.t)("Last 6 hours"),[o.XH.ONE_DAY]:(0,n.t)("Last 24 hours"),[o.XH.THREE_DAYS]:(0,n.t)("Last 3 days"),[o.XH.SEVEN_DAYS]:(0,n.t)("Last 7 days")},i="7d",a=[{label:(0,n.t)("Last 6 hours"),value:o.XH.SIX_HOURS},{label:(0,n.t)("Last 24 hours"),value:o.XH.ONE_DAY},{label:(0,n.t)("Last 3 days"),value:o.XH.THREE_DAYS},{label:(0,n.t)("Last 7 days"),value:o.XH.SEVEN_DAYS},{label:(0,n.t)("Last 14 days"),value:o.XH.FOURTEEN_DAYS}],l={[o.XH.SIX_HOURS]:6*o.Tb.ONE_HOUR*60*1e3,[o.XH.ONE_DAY]:60*o.Tb.ONE_DAY*1e3,[o.XH.THREE_DAYS]:3*o.Tb.ONE_DAY*60*1e3,[o.XH.SEVEN_DAYS]:7*o.Tb.ONE_DAY*60*1e3,[o.XH.FOURTEEN_DAYS]:14*o.Tb.ONE_DAY*60*1e3},d=(o.XH.FOURTEEN_DAYS,1e4),c=150},"./app/views/alerts/rules/metric/types.tsx":(e,t,r)=>{r.d(t,{F4:()=>s,GM:()=>l,LO:()=>h,Lm:()=>g,Tb:()=>p,Us:()=>m,XH:()=>u,Yh:()=>d,hd:()=>Z,lK:()=>c,lT:()=>o,qz:()=>a,t6:()=>i});var n=r("./app/locale.tsx");let o,s,i,a,l,d,c,u,p,m;!function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"}(o||(o={})),function(e){e.CRITICAL="critical",e.WARNING="warning",e.RESOLVE="resolve"}(s||(s={})),function(e){e.COUNT="count",e.CHANGE="change",e.PERCENT="percent"}(i||(i={})),function(e){e.ERRORS="events",e.TRANSACTIONS="transactions",e.GENERIC_METRICS="generic_metrics",e.SESSIONS="sessions",e.METRICS="metrics"}(a||(a={})),function(e){e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction",e.USER="user",e.SESSION="session"}(l||(l={})),function(e){e.ERROR_DEFAULT="error_default",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(d||(d={})),function(e){e.CRASH_FREE_SESSIONS="percentage(sessions_crashed, sessions) AS _crash_rate_alert_aggregate",e.CRASH_FREE_USERS="percentage(users_crashed, users) AS _crash_rate_alert_aggregate"}(c||(c={})),function(e){e.SIX_HOURS="6h",e.ONE_DAY="1d",e.THREE_DAYS="3d",e.SEVEN_DAYS="10000m",e.FOURTEEN_DAYS="14d",e.THIRTY_DAYS="30d"}(u||(u={})),function(e){e[e.ONE_MINUTE=1]="ONE_MINUTE",e[e.FIVE_MINUTES=5]="FIVE_MINUTES",e[e.TEN_MINUTES=10]="TEN_MINUTES",e[e.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",e[e.THIRTY_MINUTES=30]="THIRTY_MINUTES",e[e.ONE_HOUR=60]="ONE_HOUR",e[e.TWO_HOURS=120]="TWO_HOURS",e[e.FOUR_HOURS=240]="FOUR_HOURS",e[e.ONE_DAY=1440]="ONE_DAY"}(p||(p={})),function(e){e.EMAIL="email",e.SLACK="slack",e.PAGERDUTY="pagerduty",e.MSTEAMS="msteams",e.SENTRY_APP="sentry_app"}(m||(m={}));const h={[m.EMAIL]:(0,n.t)("Emaiâ€‹l"),[m.SLACK]:(0,n.t)("Slack"),[m.PAGERDUTY]:(0,n.t)("Pagerduty"),[m.MSTEAMS]:(0,n.t)("MS Teams"),[m.SENTRY_APP]:(0,n.t)("Notification")};let g;!function(e){e.SPECIFIC="specific",e.USER="user",e.TEAM="team",e.SENTRY_APP="sentry_app"}(g||(g={}));const Z={[g.USER]:(0,n.t)("Member"),[g.TEAM]:(0,n.t)("Team")}},"./app/views/alerts/utils/constants.tsx":(e,t,r)=>{r.d(t,{IR:()=>a,O:()=>i,PX:()=>s,SD:()=>n,Yw:()=>o});const n=["sentry.rules.conditions.event_frequency.EventFrequencyCondition","sentry.rules.conditions.event_frequency.EventUniqueUserFrequencyCondition","sentry.rules.conditions.event_frequency.EventFrequencyPercentCondition"],o={"sentry.rules.conditions.event_frequency.EventFrequencyCondition":"Number of events in an issue is...","sentry.rules.conditions.event_frequency.EventUniqueUserFrequencyCondition":"Number of users affected by an issue is...","sentry.rules.conditions.event_frequency.EventFrequencyPercentCondition":"Percent of sessions affected by an issue is..."},s={count:"more than {value} in {interval}",percent:"{value}% higher in {interval} compared to {comparisonInterval} ago"},i=[["count",s.count],["percent",s.percent]],a=[["5m","5 minutes"],["15m","15 minutes"],["1h","one hour"],["1d","one day"],["1w","one week"],["30d","30 days"]]}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_rules_issue_details_ruleDetails_tsx.50be36df113628172d86ec5aecd0f6e2.js.map