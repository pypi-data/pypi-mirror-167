"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_performance_urls_ts-app_views_performance_trends_changedTransactions_tsx","app_utils_performance_urls_ts"],{"./app/components/events/interfaces/spans/utils.tsx":(t,e,n)=>{n.d(e,{BU:()=>W,IG:()=>E,Io:()=>U,PA:()=>R,PC:()=>N,PQ:()=>X,Rr:()=>A,TC:()=>V,Zv:()=>K,ct:()=>$,h_:()=>P,hw:()=>j,is:()=>B,k9:()=>C,kP:()=>y,ll:()=>H,n0:()=>I,o0:()=>q,on:()=>J,rF:()=>O,ro:()=>D,sT:()=>Q,vu:()=>F,yk:()=>M,yn:()=>k});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/react-router/es/index.js")),r=n("../node_modules/lodash/isNumber.js"),i=n.n(r),o=n("../node_modules/lodash/isString.js"),p=n.n(o),l=n("../node_modules/lodash/maxBy.js"),d=n.n(l),c=n("../node_modules/lodash/set.js"),m=n.n(c),u=n("../node_modules/moment/moment.js"),h=n.n(u),g=n("./app/components/performance/waterfall/treeConnector.tsx"),f=n("./app/types/event.tsx"),v=n("./app/types/utils.tsx"),S=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),_=n("./app/utils/fields/index.ts"),w=n("./app/utils/performance/vitals/constants.tsx"),T=n("./app/utils/performanceForSentry.tsx"),x=n("./app/components/events/interfaces/spans/constants.tsx");const y=t=>{const e=(0,T.Zz)();if(!e||0===t)return;const n=[10,100,200,300,400,500,600,700,800,900,1001].find((e=>t<=e))||-1;e.setTag("ui.spanCount",t),e.setTag("ui.spanCount.grouped",`<=${n}`)},Z=t=>{const{startTimestamp:e,endTimestamp:n}=t;return e>n?{startTimestamp:n,endTimestamp:e}:t};let b;!function(t){t[t.Stable=0]="Stable",t[t.Reversed=1]="Reversed",t[t.Equal=2]="Equal"}(b||(b={}));const E=t=>{const{viewStart:e,viewEnd:n}=t,{startTimestamp:s,endTimestamp:a}=Z({startTimestamp:t.traceStartTimestamp,endTimestamp:t.traceEndTimestamp}),r=a-s,i=s+e*r,o=a-(1-n)*r-i;return t=>{if(r<=0)return{type:"TRACE_TIMESTAMPS_EQUAL",isSpanVisibleInView:!0};if(o<=0)return{type:"INVALID_VIEW_WINDOW",isSpanVisibleInView:!0};const{startTimestamp:e,endTimestamp:n}=Z(t),s=(t=>{const e=t.startTimestamp,n=t.endTimestamp;return e<n?b.Stable:e===n?b.Equal:b.Reversed})(t),a=(e-i)/o,p=(n-i)/o,l=p>0&&a<1;switch(s){case b.Equal:return{type:"TIMESTAMPS_EQUAL",start:a,width:1,isSpanVisibleInView:p>=0&&a<=1};case b.Reversed:return{type:"TIMESTAMPS_REVERSED",start:a,end:p,isSpanVisibleInView:l};case b.Stable:return{type:"TIMESTAMPS_STABLE",start:a,end:p,isSpanVisibleInView:l};default:return s}}};function I(t){return{trace_id:t.traceID,span_id:t.rootSpanID,parent_span_id:t.parentSpanID,start_timestamp:t.traceStartTimestamp,timestamp:t.traceEndTimestamp,op:t.op,description:t.description,data:{},status:t.rootSpanStatus,hash:t.hash,exclusive_time:t.exclusiveTime}}function V(t){return{start:h().unix(t.start).subtract(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS"),end:h().unix(t.end).add(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS")}}function j(t){return"type"in t&&"gap"===t.type}function D(t){if("type"in t){if("orphan"===t.type)return!0;if("gap"===t.type)return t.isOrphan}return!1}function A(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return j(t)?e:t.span_id}function M(t){if(!j(t))return t.op}function R(t){var e;return null==t||null===(e=t.contexts)||void 0===e?void 0:e.trace}function C(t){var e;const n=t.entries.find((t=>t.type===f.UZ.SPANS)),s=null!==(e=null==n?void 0:n.data)&&void 0!==e?e:[],a=R(t),r=a&&a.trace_id||"",o=a&&a.span_id||"",l=a&&a.op||"transaction",d=a&&a.description,c=a&&a.parent_span_id,u=a&&a.status,h=a&&a.hash,g=a&&a.exclusive_time;if(!n||s.length<=0)return{op:l,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:r,rootSpanID:o,rootSpanStatus:u,parentSpanID:c,spans:[],description:d,hash:h,exclusiveTime:g};const S=new Set(s.map((t=>t.span_id)));S.add(o);const _={op:l,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:r,rootSpanID:o,rootSpanStatus:u,parentSpanID:c,spans:s,description:d,hash:h,exclusiveTime:g},w=s.reduce(((t,e)=>{var n;let s=e;const a=function(t){return j(t)?"gap-span":t.parent_span_id}(s),r=a&&S.has(a);var l;l=a,p()(l)&&l.length>0&&r||(s.parent_span_id=o,s={type:"orphan",...s}),(0,v.hu)(s.parent_span_id);const d=null!==(n=t.childSpans[s.parent_span_id])&&void 0!==n?n:[];d.push(s),m()(t.childSpans,s.parent_span_id,d),(!t.traceStartTimestamp||s.start_timestamp<t.traceStartTimestamp)&&(t.traceStartTimestamp=s.start_timestamp);const c=i()(s.timestamp);return t.traceEndTimestamp?c&&s.timestamp>t.traceEndTimestamp?(t.traceEndTimestamp=s.timestamp,t):(s.start_timestamp>t.traceEndTimestamp&&(t.traceEndTimestamp=s.start_timestamp),t):c?(t.traceEndTimestamp=s.timestamp,t):(t.traceEndTimestamp=s.start_timestamp,t)}),_);return Object.values(w.childSpans).forEach((t=>{t.sort(L)})),w}function L(t,e){return D(t)&&!D(e)?1:!D(t)&&D(e)||t.start_timestamp<e.start_timestamp?-1:t.start_timestamp===e.start_timestamp?0:1}function k(t){return"number"!=typeof t&&"orphan"===(null==t?void 0:t.type)}function P(t){return k(t)?t.depth:t}function N(t){var e;const n=null===(e=t.sdk)||void 0===e?void 0:e.name;return!!n&&["sentry.javascript.browser","sentry.javascript.react","sentry.javascript.gatsby","sentry.javascript.ember","sentry.javascript.vue","sentry.javascript.angular","sentry.javascript.nextjs","sentry.javascript.electron","sentry.javascript.remix","sentry.javascript.svelte"].includes(n.toLowerCase())}const q=["mark","paint"];function z(t){const e=Object.keys(t);return Object.values(w.r9).filter((t=>e.includes(t.slug))).some((e=>{const{value:n}=t[e.slug];return"number"==typeof n&&"number"==typeof e.poorThreshold&&n>=e.poorThreshold}))}function B(t,e){if(!t.measurements||!t.startTimestamp)return new Map;const{startTimestamp:n}=t,s=new Set([_.Zl.FCP,_.Zl.FP,_.Zl.FID,_.Zl.LCP,_.Zl.TTFB]),a=Object.keys(t.measurements).filter((t=>s.has(`measurements.${t}`))).map((e=>{const s=t.measurements[e];return{name:e,timestamp:n+s.value/1e3,value:s?s.value:void 0}})),r=new Map;return a.forEach((t=>{const n=t.name,s=t.value,a=e({startTimestamp:t.timestamp,endTimestamp:t.timestamp});if("TIMESTAMPS_EQUAL"!==a.type)return;const i=Math.round(100*a.start);for(const[e]of r)if(Math.abs(e-i)<=x.tJ){const a=r.get(e),{poorThreshold:i}=w.r9[`measurements.${n}`];return a.marks={...a.marks,[n]:{value:s,timestamp:t.timestamp,failedThreshold:!!s&&s>=i}},a.failedThreshold||(a.failedThreshold=z(a.marks)),void r.set(e,a)}const{poorThreshold:o}=w.r9[`measurements.${n}`],p={[n]:{value:s,timestamp:t.timestamp,failedThreshold:!!s&&s>=o}};r.set(i,{marks:p,failedThreshold:z(p)})})),r}function F(t,e){const n=e({startTimestamp:t,endTimestamp:t});switch(n.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:n.start,width:1e-5,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:n.start,width:n.end-n.start,isSpanVisibleInView:n.isSpanVisibleInView};default:return n}}function O(t,e,n,s){return r=>{r.preventDefault();const i=$(t);e(i),a.browserHistory.push({...n,hash:i}),(0,S.Z)("performance_views.event_details.anchor_span",{organization:s,span_id:t})}}function $(t){return`#span-${t}`}function X(t,e){return void 0!==e?`${t.op}.${t.description}.${e}`:`${t.op}.${t.description}`}function H(t){return t.reduce(((t,e)=>{const{start_timestamp:n,timestamp:s}=e.span;let a=t.startTimestamp,r=t.endTimestamp;return n<a&&(a=n),r<s&&(r=s),{startTimestamp:a,endTimestamp:r}}),{startTimestamp:t[0].span.start_timestamp,endTimestamp:t[0].span.timestamp})}function Q(t,e){const{startTimestamp:n,endTimestamp:s}=H(t),a=e({startTimestamp:n,endTimestamp:s});switch(a.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:a.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:a.start,width:1e-5,isSpanVisibleInView:a.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:a.start,width:a.end-a.start,isSpanVisibleInView:a.isSpanVisibleInView};default:return a}}class U{constructor(t){(0,s.Z)(this,"spanDepthsInView",void 0),(0,s.Z)(this,"treeDepthSum",void 0),(0,s.Z)(this,"length",void 0),(0,s.Z)(this,"isRootSpanInView",void 0),this.spanDepthsInView=new Map,this.treeDepthSum=0,this.length=0,this.isRootSpanInView=t}addSpan(t,e){return!this.spanDepthsInView.has(t)&&(this.spanDepthsInView.set(t,e),this.length+=1,this.treeDepthSum+=e,0===e&&(this.isRootSpanInView=!0),!0)}removeSpan(t){if(!this.spanDepthsInView.has(t))return!1;const e=this.spanDepthsInView.get(t);return this.spanDepthsInView.delete(t),this.length-=1,this.treeDepthSum-=e,0===e&&(this.isRootSpanInView=!1),!0}has(t){return this.spanDepthsInView.has(t)}getScrollVal(){return this.isRootSpanInView?0:Math.round(this.treeDepthSum/this.length)*(g.Ll/2)-g.Y9/2}}function W(t){var e;const n=null===(e=d()(t||[],(t=>G[t.level])))||void 0===e?void 0:e.level;if(n)return Y[n]}const Y={fatal:"error",error:"error",default:"error",warning:"warning",sample:"info",info:"info",unknown:"muted"},G={fatal:5,error:4,default:4,warning:3,sample:2,info:1,unknown:0};function K(t,e){const n=String(t).split("."),s=String(e).split(".");if(2!==n.length||2!==s.length)return{start:String(t),end:String(e)};const a=n.reduce(((t,e,n)=>e.length>s[n].length?(t.start.push(e),t.end.push(0===n?s[n].padStart(e.length,"0"):s[n].padEnd(e.length,"0")),t):(t.start.push(0===n?e.padStart(s[n].length,"0"):e.padEnd(s[n].length,"0")),t.end.push(s[n]),t)),{start:[],end:[]});return{start:a.start.join("."),end:a.end.join(".")}}function J(t,e){return!!e&&!t.some((t=>e.has(t.span.span_id)))}},"./app/utils/performance/urls.ts":(t,e,n)=>{n.d(e,{D:()=>r});var s=n("./app/components/events/interfaces/spans/utils.tsx"),a=n("./app/utils.tsx");function r(t,e,n,r,i){const o={...r||{},transaction:n};(0,a.ri)(o.transaction)||delete o.transaction;const p={pathname:`/organizations/${t}/performance/${e}/`,query:o,hash:(0,a.ri)(i)?(0,s.ct)(i):void 0};return(0,a.ri)(p.hash)||delete p.hash,p}},"./app/views/performance/trends/changedTransactions.tsx":(t,e,n)=>{n.d(e,{H:()=>H,Z:()=>ct});var s,a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-router/es/index.js"),o=n("./app/components/button.tsx"),p=n("./app/components/charts/styles.tsx"),l=n("./app/components/count.tsx"),d=n("./app/components/dropdownLink.tsx"),c=n("./app/components/duration.tsx"),m=n("./app/components/emptyStateWarning.tsx"),u=n("./app/components/forms/controls/radioGroup.tsx"),h=n("./app/components/idBadge/index.tsx"),g=n("./app/components/links/link.tsx"),f=n("./app/components/loadingIndicator.tsx"),v=n("./app/components/menuItem.tsx"),S=n("./app/components/pagination.tsx"),_=n("./app/components/panels/index.tsx"),w=n("./app/components/questionTooltip.tsx"),T=n("./app/components/radio.tsx"),x=n("./app/components/tooltip.tsx"),y=n("./app/icons/index.tsx"),Z=n("./app/locale.tsx"),b=n("./app/styles/space.tsx"),E=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),I=n("./app/utils/formatters.tsx"),V=n("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),j=n("./app/utils/queryString.tsx"),D=n("./app/utils/tokenizeSearch.tsx"),A=n("./app/utils/useApi.tsx"),M=n("./app/utils/withOrganization.tsx"),R=n("./app/utils/withProjects.tsx"),C=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),L=n("./app/views/performance/transactionSummary/utils.tsx"),k=n("./app/views/performance/trends/chart.tsx"),P=n("./app/views/performance/trends/types.tsx"),N=n("./app/views/performance/trends/utils.tsx"),q=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function z(t){switch(t){case P.ER.IMPROVED:return(0,Z.t)("Most Improved Transactions");case P.ER.REGRESSION:return(0,Z.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}function B(t,e,n){const s=(0,N.j_)(e),a=(0,j.ro)(t.query[s]);if(!n)return;return n.find((t=>`${t.transaction}-${t.project}`===a))||(n.length>0?n[0]:void 0)}function F(t,e,n){return function(s){const a=(0,N.j_)(n),r={...t.query};s?r[a]=s?`${s.transaction}-${s.project}`:void 0:delete r[a],i.browserHistory.push({pathname:t.pathname,query:r}),(0,E.Z)("performance_views.trends.widget_interaction",{organization:e,widget_type:n})}}function O(t,e,n,a,r,o,p){const l=(0,N.IO)(t,o,p).column,d=(0,j.ro)(t.query.query),c=new D.MY(null!=d?d:""),m=c.getFilterValues(l),u=a===s.GREATER_THAN_EQUALS?">":"<";m&&m.forEach((t=>{(t.startsWith(a)||t.startsWith(u))&&c.removeFilterValue(l,t)})),c.addFilterValues(l,[`${a}${n}`]);const h=c.formatString();i.browserHistory.push({pathname:t.pathname,query:{...t.query,query:String(h).trim()}}),(0,E.Z)("performance_views.trends.change_duration",{organization:e,widget_type:z(r),value:`${a}${n}`})}function $(t){const{location:e,trendChangeType:n,previousTrendFunction:s,previousTrendColumn:a,organization:o,projects:p,setError:l}=t,d=(0,A.Z)(),c=t.trendView.clone(),m=z(n);(0,N.kM)(c,e,n,p);const u=(t=>(e,n,s)=>{const a={};t===P.ER.IMPROVED?a.improvedCursor=e:t===P.ER.REGRESSION&&(a.regressionCursor=e),delete s[(0,N.j_)(t)],i.browserHistory.push({pathname:n,query:{...s,...a}})})(n),h=(0,j.ro)(e.query[N.vt[n]]),g=t=>{(0,E.Z)("performance_views.trends.widget_pagination",{organization:o,direction:t,widget_type:z(n)})};return(0,q.tZ)(V.ZP,{eventView:c,orgSlug:o.slug,location:e,trendChangeType:n,cursor:h,limit:5,setError:t=>l(null==t?void 0:t.message),children:i=>{let{isLoading:l,trendsData:h,pageLinks:v}=i;const _=(0,N.CE)(e),T=(0,N.IO)(e,p,c.project),x=(0,N.RP)(h&&h.events&&h.events.data||[]),y=B(e,n,x),b=(null==h?void 0:h.stats)||{},E=x&&x.slice?x.slice(0,5):[],I=l&&s?s:_.field,V=l&&a?a:T.column,j=(0,Z.t)("This compares the baseline (%s) of the past with the present.",_.legendLabel);return(0,q.BX)(W,{"data-test-id":"changed-transactions",children:[(0,q.BX)(Y,{children:[(0,q.BX)(K,{children:[m,(0,q.tZ)(w.Z,{size:"sm",position:"top",title:j})]}),l?(0,q.tZ)(f.Z,{style:{margin:"237px auto"}}):(0,q.tZ)(r.Fragment,{children:E.length?(0,q.BX)(r.Fragment,{children:[(0,q.tZ)(G,{children:(0,q.tZ)(k.Z,{statsData:b,query:c.query,project:c.project,environment:c.environment,start:c.start,end:c.end,statsPeriod:c.statsPeriod,transaction:y,isLoading:l,...t})}),E.map(((s,a)=>(0,q.tZ)(X,{api:d,currentTrendFunction:I,currentTrendColumn:V,trendView:t.trendView,organization:o,transaction:s,index:a,trendChangeType:n,transactions:E,location:e,projects:p,statsData:b,handleSelectTransaction:F(e,o,n)},s.transaction)))]}):(0,q.tZ)(et,{small:!0,children:(0,Z.t)("No results")})})]}),(0,q.tZ)(S.Z,{pageLinks:v,onCursor:u,paginationAnalyticsEvent:g})]})}})}function X(t){const{transaction:e,transactions:n,trendChangeType:a,currentTrendFunction:o,currentTrendColumn:p,index:c,location:m,organization:g,projects:f,handleSelectTransaction:S,trendView:_}=t,w=N.es[a].default,b=B(m,a,n)===e,E=f.find((t=>{let{slug:n}=t;return n===e.project})),V=e.aggregate_range_2,A=e.aggregate_range_1,M=(0,I.rl)(Math.abs(e.trend_percentage-1),0),R=(0,I.g9)(A/1e3,A<1e3&&A>10?0:2),C=(0,I.g9)(V/1e3,V<1e3&&V>10?0:2),L=(0,Z.t)("Over this period, the %s for %s has %s %s from %s to %s",o,p,a===P.ER.IMPROVED?(0,Z.t)("decreased"):(0,Z.t)("increased"),M,R,C),k=a===P.ER.IMPROVED?A:V,z=a===P.ER.IMPROVED?R:C;return(0,q.BX)(nt,{"data-test-id":"trends-list-item-"+a,children:[(0,q.tZ)(st,{color:w,children:(0,q.tZ)(x.Z,{title:(0,q.BX)(lt,{children:[(0,q.tZ)("span",{children:(0,Z.t)("Total Events")}),(0,q.BX)("span",{children:[(0,q.tZ)(l.Z,{value:e.count_range_1}),(0,q.tZ)(dt,{direction:"right",size:"xs"}),(0,q.tZ)(l.Z,{value:e.count_range_2})]})]}),disableForVisualTest:!0,children:(0,q.tZ)(u.V,{index:c,role:"radio",children:(0,q.tZ)(T.Z,{checked:b,onChange:()=>S(e)})})})}),(0,q.tZ)(U,{...t}),(0,q.tZ)(ot,{children:(0,q.tZ)(x.Z,{title:L,children:(0,q.BX)(r.Fragment,{children:[a===P.ER.REGRESSION?"+":"",(0,I.rl)(e.trend_percentage-1,0)]})})}),(0,q.BX)(d.Z,{caret:!1,anchorRight:!0,title:(0,q.tZ)(J,{size:"xs",icon:(0,q.tZ)(y.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,Z.t)("Actions")}),children:[(0,q.tZ)(v.Z,{onClick:()=>O(m,g,k,s.LESS_THAN_EQUALS,a,f,_.project),children:(0,q.tZ)(tt,{children:(0,Z.t)("Show ≤ %s",z)})}),(0,q.tZ)(v.Z,{onClick:()=>O(m,g,k,s.GREATER_THAN_EQUALS,a,f,_.project),children:(0,q.tZ)(tt,{children:(0,Z.t)("Show ≥ %s",z)})}),(0,q.tZ)(v.Z,{onClick:()=>function(t,e){const n=(0,j.ro)(t.query.query),s=new D.MY(null!=n?n:"");s.addFilterValues("!transaction",[e]);const a=s.formatString();i.browserHistory.push({pathname:t.pathname,query:{...t.query,query:String(a).trim()}})}(m,e.transaction),children:(0,q.tZ)(tt,{children:(0,Z.t)("Hide from list")})})]}),(0,q.BX)(rt,{children:[E&&(0,q.tZ)(x.Z,{title:e.project,children:(0,q.tZ)(h.Z,{avatarSize:16,project:E,hideName:!0})}),(0,q.tZ)(H,{...t})]}),(0,q.tZ)(pt,{color:w,children:(0,q.tZ)(Q,{...t})})]})}!function(t){t.GREATER_THAN_EQUALS=">=",t.LESS_THAN_EQUALS="<="}(s||(s={})),$.displayName="ChangedTransactions",X.displayName="TrendsListItem";const H=t=>{let{transaction:e}=t;const{fromSeconds:n,toSeconds:s,showDigits:a}=(0,N.Kt)(e.aggregate_range_1,e.aggregate_range_2);return(0,q.BX)(it,{children:[(0,q.tZ)(c.Z,{seconds:n,fixedDigits:a?1:0,abbreviation:!0}),(0,q.tZ)(dt,{direction:"right",size:"xs"}),(0,q.tZ)(c.Z,{seconds:s,fixedDigits:a?1:0,abbreviation:!0})]})};H.displayName="CompareDurations";const Q=t=>{let{transaction:e,trendChangeType:n}=t;const{seconds:s,fixedDigits:a,changeLabel:r}=(0,N.wx)(e.trend_difference,n);return(0,q.BX)("span",{children:[(0,q.tZ)(c.Z,{seconds:s,fixedDigits:a,abbreviation:!0})," ",r]})};Q.displayName="ValueDelta";const U=t=>{const{organization:e,trendView:n,transaction:s,projects:a,currentTrendFunction:r,currentTrendColumn:i}=t,o=n.clone(),p=(0,N._H)(s,a),l=(0,L.e1)({orgSlug:e.slug,transaction:String(s.transaction),query:o.generateQueryStringObject(),projectID:p,display:C.D.TREND,trendFunction:r,trendColumn:i});return(0,q.tZ)(at,{to:l,"data-test-id":"item-transaction-name",children:s.transaction})};U.displayName="TransactionSummaryLink";const W=(0,a.Z)("div",{target:"e11bn3w115"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),Y=(0,a.Z)(_.s_,{target:"e11bn3w114"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),G=(0,a.Z)("div",{target:"e11bn3w113"})("padding:",(0,b.Z)(3),";"),K=(0,a.Z)(p.ws,{target:"e11bn3w112"})("border-radius:",(t=>t.theme.borderRadius),";margin:",(0,b.Z)(2)," ",(0,b.Z)(3),";"),J=(0,a.Z)(o.ZP,{target:"e11bn3w111"})({name:"1989ovb",styles:"vertical-align:middle"}),tt=(0,a.Z)("div",{target:"e11bn3w110"})("white-space:nowrap;color:",(t=>t.theme.textColor),";");tt.defaultProps={"data-test-id":"menu-action"};const et=(0,a.Z)(m.Z,{target:"e11bn3w19"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),nt=(0,a.Z)("div",{target:"e11bn3w18"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,b.Z)(1),";border-top:1px solid ",(t=>t.theme.border),";padding:",(0,b.Z)(1)," ",(0,b.Z)(2),";"),st=(0,a.Z)("div",{target:"e11bn3w17"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(t=>t.color),";}"),at=(0,a.Z)(g.Z,{target:"e11bn3w16"})("font-size:",(t=>t.theme.fontSizeMedium),";margin-right:",(0,b.Z)(1),";",(t=>t.theme.overflowEllipsis),";"),rt=(0,a.Z)("div",{target:"e11bn3w15"})("display:flex;align-items:center;font-size:",(t=>t.theme.fontSizeSmall),";"),it=(0,a.Z)("span",{target:"e11bn3w14"})("color:",(t=>t.theme.gray300),";margin:0 ",(0,b.Z)(1),";"),ot=(0,a.Z)("div",{target:"e11bn3w13"})("text-align:right;font-size:",(t=>t.theme.fontSizeMedium),";"),pt=(0,a.Z)("div",{target:"e11bn3w12"})("color:",(t=>t.color),";text-align:right;font-size:",(t=>t.theme.fontSizeSmall),";"),lt=(0,a.Z)("div",{target:"e11bn3w11"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),dt=(0,a.Z)(y.CC,{target:"e11bn3w10"})("margin:0 ",(0,b.Z)(1),";"),ct=(0,R.Z)((0,M.Z)($))},"./app/views/performance/trends/chart.tsx":(t,e,n)=>{n.d(e,{Z:()=>w,k:()=>_}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),r=n("./app/components/charts/chartZoom.tsx"),i=n("./app/components/charts/lineChart.tsx"),o=n("./app/components/charts/transitionChart.tsx"),p=n("./app/components/charts/transparentLoadingMask.tsx"),l=n("./app/components/organizations/pageFilters/parse.tsx"),d=n("./app/locale.tsx"),c=n("./app/utils/dates.tsx"),m=n("./app/utils/discover/charts.tsx"),u=n("./app/utils/discover/fields.tsx"),h=n("./app/utils/getDynamicText.tsx"),g=n("./app/utils/queryString.tsx"),f=n("./app/views/performance/trends/utils.tsx"),v=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function S(t){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:t}]}}function _(t){var e;let{trendChangeType:n,router:_,statsPeriod:w,transaction:T,statsData:x,isLoading:y,location:Z,start:b,end:E,trendFunctionField:I,disableXAxis:V,disableLegend:j,grid:D,height:A,projects:M,project:R}=t;const C=(0,a.a)(),L=t=>{const{selected:e}=t,a=Object.keys(e).filter((t=>!e[t])),r={...Z.query};r[(0,f.P4)(n)]=a;const i={...Z,query:r};s.browserHistory.push(i)},k=f.es[n||""],P=x&&null!=T&&T.project&&null!=T&&T.transaction?x[[T.project,T.transaction].join(",")]:void 0,N=null!==(e=null==P?void 0:P.data)&&void 0!==e?e:[],q=(0,f.CE)(Z,I),z=(0,f.IO)(Z,M,R),B=(0,f.ed)(q.field,z.column),F=function(t,e){return[{seriesName:e||"Current",data:t.map((t=>{let[e,n]=t;return{name:1e3*e,value:n.reduce(((t,e)=>{let{count:n}=e;return t+n}),0)}}))}]}(N,B),{smoothedResults:O,minValue:$,maxValue:X}=(0,f.vq)(F,B),H=b?(0,c.hC)(b):null,Q=E?(0,c.hC)(E):null,{utc:U}=(0,l.fK)(Z.query),W=(0,g.qP)(Z.query[(0,f.P4)(n)]).reduce(((t,e)=>(t[e]=!1,t)),{}),Y=j?{show:!1}:{...S(B),selected:W},G=y,K=y,J=Math.max(X,(null==T?void 0:T.aggregate_range_2)||0,(null==T?void 0:T.aggregate_range_1)||0),tt=Math.min($,(null==T?void 0:T.aggregate_range_1)||Number.MAX_SAFE_INTEGER,(null==T?void 0:T.aggregate_range_2)||Number.MAX_SAFE_INTEGER),et=O?O.map((t=>({...t,color:k.default,lineStyle:{opacity:1}}))):[],nt=function(t,e,n,s){if(!(s&&e.length&&e[0].data&&e[0].data.length))return[];const a=parseInt(e[0].data[0].name,10),r=parseInt(e[0].data.slice(-1)[0].name,10);if(r<a)return[];const i={data:[],color:t.textColor,markLine:{data:[],label:{},lineStyle:{color:t.textColor,type:"dashed",width:1},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},o={fontSize:11,show:!0,color:t.textColor,silent:!0},p={...i,markLine:{...i.markLine},seriesName:"Baseline"},l={...i,markLine:{...i.markLine},seriesName:"Baseline"},c={...i,markLine:{...i.markLine},seriesName:"Period split"},u=.5*(r-a)+a;return p.markLine.data=[[{value:"Past",coord:[a,s.aggregate_range_1]},{coord:[u,s.aggregate_range_1]}]],p.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Past Baseline")}</strong></span>`,(0,m.CX)(s.aggregate_range_1,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},l.markLine.data=[[{value:"Present",coord:[u,s.aggregate_range_2]},{coord:[r,s.aggregate_range_2]}]],l.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Present Baseline")}</strong></span>`,(0,m.CX)(s.aggregate_range_2,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},c.markLine={data:[{xAxis:u}],label:{show:!1},lineStyle:{color:t.textColor,type:"solid",width:2},symbol:["none","none"],tooltip:{show:!1},silent:!0},p.markLine.label={...o,formatter:"Past",position:"insideStartBottom"},l.markLine.label={...o,formatter:"Present",position:"insideEndBottom"},[p,l,c]}(C,O||[],0,T),st=.1*(J-tt),at=[...et,...nt],rt=(0,m.Xp)(at),it={tooltip:{valueFormatter:(t,e)=>(0,m.CX)(t,(0,u.Px)(e))},yAxis:{min:Math.max(0,tt-st),max:J+st,minInterval:rt,axisLabel:{color:C.chartLabel,formatter:t=>(0,m.gu)(t,"duration",void 0,rt)}}};return(0,v.tZ)(r.Z,{router:_,period:w,start:H,end:Q,utc:"true"===U,children:t=>(0,v.BX)(o.Z,{loading:G,reloading:K,children:[(0,v.tZ)(p.Z,{visible:K}),(0,h.Z)({value:(0,v.tZ)(i.w,{height:A,...t,...it,onLegendSelectChanged:L,series:at,seriesOptions:{showSymbol:!1},legend:Y,toolBox:{show:!1},grid:null!=D?D:{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:V?{show:!1}:void 0}),fixed:"Duration Chart"})]})})}_.displayName="Chart";const w=(0,s.withRouter)(_)}}]);
//# sourceMappingURL=../sourcemaps/app_utils_performance_urls_ts-app_views_performance_trends_changedTransactions_tsx.1ec2699965789c337224d15b323f877b.js.map