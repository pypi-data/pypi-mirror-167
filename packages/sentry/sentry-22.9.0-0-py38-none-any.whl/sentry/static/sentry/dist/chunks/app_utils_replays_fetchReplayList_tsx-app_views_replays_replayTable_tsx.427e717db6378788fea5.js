"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_replays_fetchReplayList_tsx-app_views_replays_replayTable_tsx"],{"./app/utils/replays/fetchReplayList.tsx":(e,t,r)=>{r.d(t,{ZP:()=>n,p8:()=>i,yw:()=>o}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("../node_modules/@sentry/hub/esm/exports.js"),a=r("./app/utils/replays/replayDataUtils.tsx");const o="-startedAt",i=["countErrors","duration","finishedAt","id","projectId","startedAt","urls","user"],n=async function(e){let{api:t,organization:r,location:o,eventView:i}=e;try{var n;const e=`/organizations/${r.slug}/replays/`,[{data:s},l,p]=await t.requestPromise(e,{includeAllArgs:!0,query:{...i.getEventsAPIPayload(o),cursor:o.query.cursor}});return{fetchError:void 0,isFetching:!1,pageLinks:null!==(n=null==p?void 0:p.getResponseHeader("Link"))&&void 0!==n?n:"",replays:s.map(a.qC)}}catch(e){return s.Tb(e),{fetchError:e,isFetching:!1,pageLinks:null,replays:[]}}}},"./app/views/replays/replayTable.tsx":(e,t,r)=>{r.d(t,{Z:()=>L});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=r("../node_modules/react/index.js"),o=r("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),i=r("./app/components/alert.tsx"),n=r("./app/components/duration.tsx"),l=r("./app/components/idBadge/projectBadge.tsx"),p=r("./app/components/idBadge/userBadge.tsx"),d=r("./app/components/links/link.tsx"),c=r("./app/components/panels/index.tsx"),m=r("./app/components/scoreBar.tsx"),u=r("./app/constants/chartPalette.tsx"),h=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=new Array(10).fill([u.Z[0][0]]);function y(e){let{replay:t}=e,r=1;if(t){const{countErrors:e,duration:s,urls:a}=t,o=a.length;r=(25*e+5*o+o/(s||1))/10,s<=5&&(r-=10/(s||1)),r=Math.floor(Math.min(10,Math.max(1,r)))}return(0,h.tZ)(m.Z,{size:20,score:r,palette:g,radius:0})}y.displayName="ReplayHighlight";const x=y;var Z=r("./app/components/replays/walker/urlWalker.tsx"),f=r("./app/components/timeSince.tsx"),b=r("./app/icons/index.tsx"),w=r("./app/locale.tsx"),j=r("./app/styles/space.tsx"),v=r("./app/utils/getRouteStringFromRoutes.tsx"),z=r("./app/utils/useLocation.tsx"),k=r("./app/utils/useMedia.tsx"),_=r("./app/utils/useOrganization.tsx"),P=r("./app/utils/useProjects.tsx"),C=r("./app/utils/useRoutes.tsx");function E(e){let{fieldName:t,label:r,sort:s}=e;const a=(0,z.T)(),o="asc"===s.kind?"up":"down",i=(0,h.tZ)(b.CC,{color:"gray300",size:"xs",direction:o});return(0,h.BX)(B,{role:"columnheader","aria-sort":s.field.endsWith(t)?"asc"===s.kind?"ascending":"descending":"none",to:{pathname:a.pathname,query:{...a.query,sort:"desc"===s.kind?t:"-"+t}},children:[r," ",s.field===t&&i]})}function N(e){let{isFetching:t,replays:r,showProjectColumn:s,sort:a,fetchError:i}=e;const n=(0,C.V)(),l=encodeURIComponent((0,v.Z)(n)),p=(0,_.Z)(),d=(0,o.a)(),c=(0,k.Z)(`(min-width: ${d.breakpoints.small})`),m=[(0,w.t)("Session"),s&&c?(0,h.tZ)(E,{sort:a,fieldName:"projectId",label:(0,w.t)("Project")},"projectId"):null,(0,h.tZ)(E,{sort:a,fieldName:"startedAt",label:(0,w.t)("Start Time")},"startedAt"),(0,h.tZ)(E,{sort:a,fieldName:"duration",label:(0,w.t)("Duration")},"duration"),(0,h.tZ)(E,{sort:a,fieldName:"countErrors",label:(0,w.t)("Errors")},"countErrors"),(0,w.t)("Activity")].filter(Boolean);return i&&!t?(0,h.tZ)(R,{headers:m,showProjectColumn:s,isLoading:!1,children:(0,h.tZ)(q,{type:"error",showIcon:!0,children:(0,w.t)("Sorry, the list of replays could not be loaded. This could be due to invalid search parameters or an internal systems error.")})}):(0,h.tZ)(R,{isLoading:t,isEmpty:0===(null==r?void 0:r.length),showProjectColumn:s,headers:m,children:null==r?void 0:r.map((e=>(0,h.tZ)(A,{minWidthIsSmall:c,organization:p,referrer:l,replay:e,showProjectColumn:s},e.id)))})}function A(e){let{minWidthIsSmall:t,organization:r,referrer:s,replay:o,showProjectColumn:i}=e;const{projects:c}=(0,P.Z)(),m=c.find((e=>e.id===o.projectId));return(0,h.BX)(a.Fragment,{children:[(0,h.tZ)(p.Z,{avatarSize:32,displayName:(0,h.tZ)(d.Z,{to:`/organizations/${r.slug}/replays/${null==m?void 0:m.slug}:${o.id}/?referrer=${s}`,children:o.user.displayName||""}),user:{username:o.user.displayName||"",email:o.user.email||"",id:o.user.id||"",ip_address:o.user.ip_address||"",name:o.user.name||""},displayEmail:(0,h.tZ)(Z.j,{urls:o.urls})}),i&&t&&(0,h.tZ)(S,{children:m?(0,h.tZ)(l.Z,{project:m,avatarSize:16}):null}),(0,h.tZ)(S,{children:(0,h.BX)(T,{children:[t&&(0,h.tZ)(I,{color:"gray500",size:"sm"}),(0,h.tZ)(f.Z,{date:o.startedAt})]})}),(0,h.tZ)(S,{children:(0,h.tZ)(n.Z,{seconds:Math.floor(o.duration),exact:!0,abbreviation:!0})}),(0,h.tZ)(S,{children:o.countErrors||0}),(0,h.tZ)(S,{children:(0,h.tZ)(x,{replay:o})})]})}E.displayName="SortableHeader",N.displayName="ReplayTable",A.displayName="ReplayTableRow";const R=(0,s.Z)(c.KB,{target:"e1imgzw05"})((e=>e.showProjectColumn?"grid-template-columns: minmax(0, 1fr) repeat(5, max-content);":"grid-template-columns: minmax(0, 1fr) repeat(4, max-content);"),"@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:minmax(0, 1fr) repeat(4, max-content);}"),B=(0,s.Z)(d.Z,{target:"e1imgzw04"})({name:"1qowyn7",styles:"color:inherit;:hover{color:inherit;}svg{vertical-align:top;}"}),S=(0,s.Z)("div",{target:"e1imgzw03"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),T=(0,s.Z)("div",{target:"e1imgzw02"})("display:grid;grid-template-columns:repeat(2, minmax(auto, max-content));align-items:center;gap:",(0,j.Z)(1),";"),I=(0,s.Z)(b.jt,{target:"e1imgzw01"})({name:"hbxqi1",styles:"position:relative;top:-1px"}),q=(0,s.Z)(i.Z,{target:"e1imgzw00"})({name:"caw15p",styles:"position:relative;bottom:0.5px;grid-column-start:span 99;margin-bottom:0"}),L=N}}]);
//# sourceMappingURL=../sourcemaps/app_utils_replays_fetchReplayList_tsx-app_views_replays_replayTable_tsx.686f0864524ecccbf79ea985f8ff29ec.js.map