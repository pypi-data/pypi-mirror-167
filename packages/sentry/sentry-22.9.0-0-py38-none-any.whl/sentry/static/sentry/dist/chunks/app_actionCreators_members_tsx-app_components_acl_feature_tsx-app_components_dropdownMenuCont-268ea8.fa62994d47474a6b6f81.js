"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actionCreators_members_tsx-app_components_acl_feature_tsx-app_components_dropdownMenuCont-268ea8"],{"./app/actionCreators/members.tsx":(e,t,s)=>{s.d(t,{M4:()=>l,MA:()=>i,R_:()=>d,hS:()=>a}),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/@sentry/hub/esm/exports.js"),o=s("./app/stores/memberListStore.tsx");function r(e){return{...e.user,role:e.role}}async function i(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=`/organizations/${t}/users/`,l=s?{project:s}:{};try{const a=await e.requestPromise(i,{method:"GET",query:l});a||n.$e((e=>{e.setExtras({orgId:t,projectIds:s}),n.Tb(new Error("Members is undefined"))}));const d=null==a?void 0:a.filter((e=>{let{user:t}=e;return t}));return d?(o.Z.loadInitialData(d.map(r)),a):[]}catch(e){n.rJ({resp:e}),n.Tb(e)}return[]}function l(e){return e.reduce(((e,t)=>{for(const s of t.projects)e.hasOwnProperty(s)||(e[s]=[]),e[s].push(t.user);return e}),{})}function a(e,t){let{orgId:s,memberId:n,data:o}=t;return e.requestPromise(`/organizations/${s}/members/${n}/`,{method:"PUT",data:o})}function d(e,t){let{orgId:s,memberId:n,regenerate:o}=t;return e.requestPromise(`/organizations/${s}/members/${n}/`,{method:"PUT",data:{regenerate:o,reinvite:!0}})}},"./app/components/acl/feature.tsx":(e,t,s)=>{s.d(t,{Z:()=>f});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),r=s("./app/stores/hookStore.tsx"),i=s("./app/utils/isRenderFunc.tsx"),l=s("./app/utils/withConfig.tsx"),a=s("./app/utils/withOrganization.tsx"),d=s("./app/utils/withProject.tsx"),u=s("./app/components/alert.tsx"),c=s("./app/locale.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=()=>(0,m.tZ)(u.Z,{type:"info",showIcon:!0,children:(0,c.t)("This feature is coming soon!")});p.displayName="ComingSoon";const g=p;class h extends o.Component{getAllFeatures(){const{organization:e,project:t,config:s}=this.props;return{configFeatures:s.features?Array.from(s.features):[],organization:e&&e.features||[],project:t&&t.features||[]}}hasFeature(e,t){const s=e.match(/^projects:(.+)/),n=e.match(/^organizations:(.+)/),{configFeatures:o,organization:r,project:i}=t;return!!o.includes(e)||(s?i.includes(s[1]):n?r.includes(n[1]):r.includes(e)||i.includes(e))}render(){const{children:e,features:t,renderDisabled:s,hookName:n,organization:o,project:l,requireAll:a}=this.props,d=this.getAllFeatures(),u=!t||t[a?"every":"some"]((e=>this.hasFeature(e,d)));let c=!1!==s&&("function"==typeof s?s:()=>(0,m.tZ)(g,{}));if(n){const e=r.Z.get(n);e.length>0&&(c=e[0])}const p={organization:o,project:l,features:t,hasFeature:u};return u||!1===c?(0,i.l)(e)?e({renderDisabled:s,...p}):u&&e?e:null:c({children:e,...p})}}h.displayName="Feature",(0,n.Z)(h,"defaultProps",{renderDisabled:!1,requireAll:!0});const f=(0,a.Z)((0,d.Z)((0,l.Z)(h)))},"./app/components/dropdownMenuControl.tsx":(e,t,s)=>{s.d(t,{Z:()=>F});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("../node_modules/@react-aria/button/dist/module.js"),i=s("../node_modules/@react-aria/menu/dist/module.js"),l=s("../node_modules/@react-aria/utils/dist/module.js"),a=s("../node_modules/@react-stately/collections/dist/module.js"),d=s("../node_modules/@react-stately/menu/dist/module.js"),u=s("./app/components/dropdownButton.tsx"),c=s("../node_modules/@react-aria/focus/dist/module.js"),m=s("../node_modules/@react-aria/interactions/dist/module.js"),p=s("../node_modules/@react-aria/overlays/dist/module.js"),g=s("../node_modules/@react-aria/separator/dist/module.js"),h=s("../node_modules/@react-stately/tree/dist/module.js"),f=s("./app/components/links/link.tsx"),b=s("./app/components/menuListItem.tsx"),y=s("./app/icons/index.tsx"),v=s("./app/utils/usePrevious.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const w=e=>{var t;let{node:s,isLastNode:n,state:r,onClose:a,closeOnSelect:d,isSubmenuTrigger:u=!1,submenuTriggerRef:c,renderAs:p="li",...g}=e;const h=(0,o.useRef)(null),w=r.disabledKeys.has(s.key),x=r.selectionManager.focusedKey===s.key,{key:P,onAction:j,to:S,label:k,showDividers:z,...M}=s.value,{size:_}=s.props,C=null!=c?c:h,[O,R]=(0,o.useState)(!1),{hoverProps:T}=(0,m.XI)({onHoverChange:R}),D=(0,v.Z)(O),I=(0,v.Z)(x);(0,o.useEffect)((()=>{if((O!==D||x!==I)&&O&&x){if(u)return void r.selectionManager.select(s.key);r.selectionManager.clearSelection()}}),[O,x,D,I,u,s.key,r.selectionManager]);const{keyboardProps:N}=(0,m.v5)({onKeyDown:e=>{if("Enter"===e.key&&S){var t,n;const s=new MouseEvent("click",{ctrlKey:e.ctrlKey,metaKey:e.metaKey});return null===(t=C.current)||void 0===t||null===(n=t.querySelector(`${b.i}`))||void 0===n||n.dispatchEvent(s),void a()}"ArrowRight"===e.key&&u?r.selectionManager.select(s.key):e.continuePropagation()}}),{menuItemProps:A,labelProps:F,descriptionProps:K}=(0,i.iX)({key:s.key,onAction:()=>{S||(u?r.selectionManager.select(s.key):null==j||j(P))},closeOnSelect:!S&&d,onClose:a,isDisabled:w},r,C),B=(0,l.dG)(g,A,T,N),E=null!==(t=s.rendered)&&void 0!==t?t:k,$=z&&!n,q={as:S?f.Z:"div",to:S};return(0,Z.tZ)(b.Z,{ref:C,as:p,"data-test-id":P,label:E,disabled:w,isFocused:x,showDivider:$,innerWrapProps:q,labelProps:F,detailsProps:K,size:_,...B,...M,...u&&{role:"menuitemradio",trailingItems:(0,Z.BX)(o.Fragment,{children:[M.trailingItems,(0,Z.tZ)(y.g6,{size:"xs",direction:"right","aria-hidden":"true"})]})}})};w.displayName="MenuItem";const x=w;var P=s("./app/styles/space.tsx");function j(e){let{node:t,children:s}=e;const{itemProps:n,headingProps:o,groupProps:r}=(0,i.x7)({heading:t.rendered,"aria-label":t["aria-label"]});return(0,Z.BX)(k,{...n,children:[t.rendered&&(0,Z.tZ)(z,{...o,children:t.rendered}),(0,Z.tZ)(M,{...r,children:s})]})}j.displayName="MenuSection";const S=j,k=(0,n.Z)("li",{target:"enwb5272"})({name:"ffhm6p",styles:"list-style-type:none"}),z=(0,n.Z)("span",{target:"enwb5271"})("display:inline-block;font-weight:600;font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.subText),";text-transform:uppercase;white-space:nowrap;margin:",(0,P.Z)(1)," ",(0,P.Z)(1.5)," ",(0,P.Z)(.5),";padding-right:",(0,P.Z)(1),";",k,":first-of-type &{margin-top:",(0,P.Z)(.5),";}"),M=(0,n.Z)("ul",{target:"enwb5270"})({name:"1kz5jpr",styles:"list-style-type:none;padding:0;margin:0"});function _(e){var t,s;let{offset:n=8,crossOffset:r=0,containerPadding:a=0,placement:d="bottom left",closeOnSelect:u=!0,triggerRef:f,triggerWidth:b,size:y,isSubmenu:v,menuTitle:w,closeRootMenu:P,closeCurrentSubmenu:j,isDismissable:k=!0,shouldCloseOnBlur:z=!0,...M}=e;const _=(0,h.D)({...M,selectionMode:"single"}),C=(0,o.useMemo)((()=>[..._.collection]),[_.collection]),I=(0,o.useRef)(null),{menuProps:N}=(0,i.H9)({...M,selectionMode:"single"},_,I),{separatorProps:A}=(0,g.z)({elementType:"li"}),{keyboardProps:K}=(0,m.v5)({onKeyDown:e=>{v&&"ArrowLeft"===e.key?null==j||j():e.continuePropagation()}}),B=(0,o.useRef)(null),{overlayProps:E}=(0,p.Ir)({onClose:P,shouldCloseOnBlur:z,isDismissable:k,isOpen:!0,shouldCloseOnInteractOutside:e=>{var t;return e&&f.current!==e&&!(null!==(t=f.current)&&void 0!==t&&t.contains(e))}},B),{overlayProps:$,placement:q}=(0,p.tN)({targetRef:f,overlayRef:B,offset:n,crossOffset:r,placement:d,containerPadding:a,isOpen:!0,boundaryElement:null!==(t=document.querySelector(".app"))&&void 0!==t?t:void 0}),[W,L]=(0,o.useState)(!0);(0,o.useEffect)((()=>{const e=!C.some((e=>e.hasChildNodes&&!e.value.isSubmenu?[...e.childNodes].some((e=>_.selectionManager.isSelected(`${e.key}`))):_.selectionManager.isSelected(`${e.key}`)));L(e)}),[C,_.selectionManager]);const X={...N,...!W&&{onKeyUp:()=>null,onKeyDown:()=>null}},U=e=>e.map(((t,s)=>{var n;const r=e.length-1===s,i=!r&&("section"===t.type||"section"===(null===(n=e[s+1])||void 0===n?void 0:n.type));let l;return l="section"===t.type?(0,Z.tZ)(S,{node:t,children:U([...t.childNodes])}):t.value.isSubmenu?((e,t)=>(0,Z.tZ)(F,{items:e.value.children,trigger:s=>{let{props:n,ref:o}=s;return(0,Z.tZ)(x,{renderAs:"div",node:e,isLastNode:t,state:_,isSubmenuTrigger:!0,submenuTriggerRef:o,...n})},menuTitle:e.value.submenuTitle,placement:"right top",offset:-4,crossOffset:-8,closeOnSelect:u,isOpen:_.selectionManager.isSelected(e.key),size:y,isSubmenu:!0,closeRootMenu:P,closeCurrentSubmenu:()=>_.selectionManager.clearSelection(),renderWrapAs:"li"}))(t,r):((e,t)=>(0,Z.tZ)(x,{node:e,isLastNode:t,state:_,onClose:P,closeOnSelect:u}))(t,r),(0,Z.BX)(o.Fragment,{children:[l,i&&(0,Z.tZ)(D,{...A})]},t.key)}));return(0,Z.tZ)(c.MT,{restoreFocus:!0,autoFocus:!0,children:(0,Z.tZ)(O,{ref:B,placementProp:q,...(0,l.dG)(E,$,K),children:(0,Z.BX)(R,{ref:I,...X,style:{maxHeight:null===(s=$.style)||void 0===s?void 0:s.maxHeight,minWidth:b},children:[w&&(0,Z.tZ)(T,{children:w}),U(C)]})})})}_.displayName="Menu";const C=_,O=(0,n.Z)("div",{target:"e1747fp53"})("max-width:24rem;border-radius:",(e=>e.theme.borderRadius),";background:",(e=>e.theme.backgroundElevated),";box-shadow:0 0 0 1px ",(e=>e.theme.translucentBorder),",",(e=>e.theme.dropShadowHeavy),";font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,P.Z)(1)," 0;",(e=>"top"===e.placementProp&&"margin-bottom: 0;")," ",(e=>"bottom"===e.placementProp&&"margin-top: 0;"),"z-index:",(e=>e.theme.zIndex.dropdown),"!important;"),R=(0,n.Z)("ul",{target:"e1747fp52"})("margin:0;padding:",(0,P.Z)(.5)," 0;font-size:",(e=>e.theme.fontSizeMedium),";overflow-x:hidden;overflow-y:auto;&:focus{outline:none;}"),T=(0,n.Z)("div",{target:"e1747fp51"})("font-weight:600;font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.headingColor),";white-space:nowrap;padding:",(0,P.Z)(.25)," ",(0,P.Z)(1.5)," ",(0,P.Z)(.75),";margin-bottom:",(0,P.Z)(.5),";border-bottom:solid 1px ",(e=>e.theme.innerBorder),";"),D=(0,n.Z)("li",{target:"e1747fp50"})("list-style-type:none;border-top:solid 1px ",(e=>e.theme.innerBorder),";margin:",(0,P.Z)(.5)," ",(0,P.Z)(1.5),";");function I(e){return e.filter((e=>!e.hidden)).map((e=>({...e,...e.children?{children:I(e.children)}:{}})))}function N(e){return e.reduce(((e,t)=>t.disabled?e.concat([t.key]):t.children?e.concat(N(t.children)):e),[])}function A(e){let{items:t,disabledKeys:s,trigger:n,triggerLabel:c,triggerProps:m={},isDisabled:p,isSubmenu:g=!1,closeRootMenu:h,closeCurrentSubmenu:f,renderWrapAs:b="div",size:y="md",className:v,...w}=e;const x=(0,o.useRef)(null),P=null!=p?p:!t||0===t.length,j=(0,d.W)(w),{menuTriggerProps:S,menuProps:k}=(0,i.u4)({type:"menu",isDisabled:P},j,x),{buttonProps:z}=(0,r.U)({isDisabled:P,...S,...g&&{onKeyUp:e=>e.continuePropagation(),onKeyDown:e=>e.continuePropagation(),onPress:()=>null,onPressStart:()=>null,onPressEnd:()=>null}},x),[M,_]=(0,o.useState)(),O=(0,o.useCallback)((async()=>{var e;await new Promise((e=>window.setTimeout(e)));const t=null===(e=x.current)||void 0===e?void 0:e.offsetWidth;!g&&t&&_(t)}),[g]);(0,l.yU)({ref:x,onResize:O}),(0,o.useEffect)((()=>{void 0===window.ResizeObserver&&O()}),[O]);const R=(0,o.useMemo)((()=>I(t)),[t]),T=(0,o.useMemo)((()=>N(R)),[R]);return(0,Z.BX)(K,{className:v,as:b,role:"presentation",children:[n?n({props:{size:y,isOpen:j.isOpen,...m,...z},ref:x}):(0,Z.tZ)(u.Z,{ref:x,size:y,isOpen:j.isOpen,...m,...z,children:c}),j.isOpen?(0,Z.tZ)(C,{...w,...k,triggerRef:x,triggerWidth:M,size:y,isSubmenu:g,isDismissable:!g&&w.isDismissable,shouldCloseOnBlur:!g&&w.shouldCloseOnBlur,closeRootMenu:null!=h?h:j.close,closeCurrentSubmenu:f,disabledKeys:null!=s?s:T,items:R,children:e=>e.children&&e.children.length>0&&!e.isSubmenu?(0,Z.tZ)(a.$0,{title:e.label,items:e.children,children:e=>(0,Z.tZ)(a.ck,{size:y,...e,children:e.label})},e.key):(0,Z.tZ)(a.ck,{size:y,...e,children:e.label})}):null]})}A.displayName="MenuControl";const F=A,K=(0,n.Z)("div",{target:"e1xefvzy0"})({name:"ffhm6p",styles:"list-style-type:none"})},"./app/utils/usePrevious.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var n=s("../node_modules/react/index.js");const o=function(e){const t=(0,n.useRef)(e);return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_members_tsx-app_components_acl_feature_tsx-app_components_dropdownMenuCont-268ea8.0d3f58f6a2aa7829eb80aae09531937f.js.map