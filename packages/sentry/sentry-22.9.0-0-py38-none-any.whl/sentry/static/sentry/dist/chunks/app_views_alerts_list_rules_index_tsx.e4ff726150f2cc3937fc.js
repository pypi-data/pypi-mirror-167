"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_list_rules_index_tsx"],{"./app/components/alertBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/icons/index.tsx"),n=s("./app/locale.tsx"),i=s("./app/styles/space.tsx"),o=s("./app/views/alerts/types.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{status:t,hideText:s=!1,isIssue:a}=e,i=(0,n.t)("Resolved"),d=r.DL,p="green300";return a?(i=(0,n.t)("Issue"),d=r.XI,p="gray300"):t===o.vt.CRITICAL?(i=(0,n.t)("Critical"),d=r.zC,p="red300"):t===o.vt.WARNING&&(i=(0,n.t)("Warning"),d=r.qV,p="yellow300"),(0,l.BX)(c,{"data-test-id":"alert-badge",children:[(0,l.BX)(m,{color:p,icon:d,children:[(0,l.tZ)(u,{color:p}),(0,l.tZ)(d,{color:"white"})]}),!s&&(0,l.tZ)(h,{color:p,children:i})]})}d.displayName="AlertBadge";const p=d,c=(0,a.Z)("div",{target:"ef4c9wd3"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),m=(0,a.Z)("div",{target:"ef4c9wd2"})("width:36px;height:36px;position:relative;svg:last-child{width:",(e=>e.icon===r.XI?"13px":"16px"),";z-index:2;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;}"),u=(0,a.Z)(r.Sq,{target:"ef4c9wd1"})({name:"bgbjt4",styles:"width:36px;height:36px"}),h=(0,a.Z)("div",{target:"ef4c9wd0"})("margin-left:",(0,i.Z)(1),";")},"./app/utils/performance/vitals/constants.tsx":(e,t,s)=>{s.d(t,{AR:()=>l,TT:()=>o,r9:()=>i});var a=s("./app/locale.tsx"),r=s("./app/utils/discover/fields.tsx"),n=s("./app/utils/fields/index.ts");const i={[n.Zl.FP]:{slug:"fp",name:(0,a.t)("First Paint"),acronym:"FP",description:(0,a.t)("Render time of the first pixel loaded in the viewport (may overlap with FCP)."),poorThreshold:3e3,type:(0,r.Cq)(n.Zl.FP)},[n.Zl.FCP]:{slug:"fcp",name:(0,a.t)("First Contentful Paint"),acronym:"FCP",description:(0,a.t)("Render time of the first image, text or other DOM node in the viewport."),poorThreshold:3e3,type:(0,r.Cq)(n.Zl.FCP)},[n.Zl.LCP]:{slug:"lcp",name:(0,a.t)("Largest Contentful Paint"),acronym:"LCP",description:(0,a.t)("Render time of the largest image, text or other DOM node in the viewport."),poorThreshold:4e3,type:(0,r.Cq)(n.Zl.LCP)},[n.Zl.FID]:{slug:"fid",name:(0,a.t)("First Input Delay"),acronym:"FID",description:(0,a.t)("Response time of the browser to a user interaction (clicking, tapping, etc)."),poorThreshold:300,type:(0,r.Cq)(n.Zl.FID)},[n.Zl.CLS]:{slug:"cls",name:(0,a.t)("Cumulative Layout Shift"),acronym:"CLS",description:(0,a.t)("Sum of layout shift scores that measure the visual stability of the page."),poorThreshold:.25,type:(0,r.Cq)(n.Zl.CLS)},[n.Zl.TTFB]:{slug:"ttfb",name:(0,a.t)("Time to First Byte"),acronym:"TTFB",description:(0,a.t)("The time that it takes for a user's browser to receive the first byte of page content."),poorThreshold:600,type:(0,r.Cq)(n.Zl.TTFB)},[n.Zl.RequestTime]:{slug:"ttfb.requesttime",name:(0,a.t)("Request Time"),acronym:"RT",description:(0,a.t)("Captures the time spent making the request and receiving the first byte of the response."),poorThreshold:600,type:(0,r.Cq)(n.Zl.RequestTime)}},o={[n.$n.AppStartCold]:{slug:"app_start_cold",name:(0,a.t)("App Start Cold"),description:(0,a.t)("Cold start is a measure of the application start up time from scratch."),type:(0,r.Cq)(n.$n.AppStartCold)},[n.$n.AppStartWarm]:{slug:"app_start_warm",name:(0,a.t)("App Start Warm"),description:(0,a.t)("Warm start is a measure of the application start up time while still in memory."),type:(0,r.Cq)(n.$n.AppStartWarm)},[n.$n.FramesTotal]:{slug:"frames_total",name:(0,a.t)("Total Frames"),description:(0,a.t)("Total frames is a count of the number of frames recorded within a transaction."),type:(0,r.Cq)(n.$n.FramesTotal)},[n.$n.FramesSlow]:{slug:"frames_slow",name:(0,a.t)("Slow Frames"),description:(0,a.t)("Slow frames is a count of the number of slow frames recorded within a transaction."),type:(0,r.Cq)(n.$n.FramesSlow)},[n.$n.FramesFrozen]:{slug:"frames_frozen",name:(0,a.t)("Frozen Frames"),description:(0,a.t)("Frozen frames is a count of the number of frozen frames recorded within a transaction."),type:(0,r.Cq)(n.$n.FramesFrozen)},[n.$n.FramesSlowRate]:{slug:"frames_slow_rate",name:(0,a.t)("Slow Frames Rate"),description:(0,a.t)("Slow Frames Rate is the percentage of frames recorded within a transaction that is considered slow."),type:(0,r.Cq)(n.$n.FramesSlowRate)},[n.$n.FramesFrozenRate]:{slug:"frames_frozen_rate",name:(0,a.t)("Frozen Frames Rate"),description:(0,a.t)("Frozen Frames Rate is the percentage of frames recorded within a transaction that is considered frozen."),type:(0,r.Cq)(n.$n.FramesFrozenRate)},[n.$n.StallCount]:{slug:"stall_count",name:(0,a.t)("Stalls"),description:(0,a.t)("Stalls is the number of times the application stalled within a transaction."),type:(0,r.Cq)(n.$n.StallCount)},[n.$n.StallTotalTime]:{slug:"stall_total_time",name:(0,a.t)("Total Stall Time"),description:(0,a.t)("Stall Total Time is the total amount of time the application is stalled within a transaction."),type:(0,r.Cq)(n.$n.StallTotalTime)},[n.$n.StallLongestTime]:{slug:"stall_longest_time",name:(0,a.t)("Longest Stall Time"),description:(0,a.t)("Stall Longest Time is the longest amount of time the application is stalled within a transaction."),type:(0,r.Cq)(n.$n.StallLongestTime)},[n.$n.StallPercentage]:{slug:"stall_percentage",name:(0,a.t)("Stall Percentage"),description:(0,a.t)("Stall Percentage is the percentage of the transaction duration the application was stalled."),type:(0,r.Cq)(n.$n.StallPercentage)}};let l;!function(e){e.CHROME="Chrome",e.EDGE="Edge",e.OPERA="Opera",e.FIREFOX="Firefox",e.SAFARI="Safari",e.IE="IE"}(l||(l={}))},"./app/views/alerts/list/rules/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>ye});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/indicator.tsx"),o=s("./app/components/asyncComponent.tsx"),l=s("./app/components/hookOrDefault.tsx"),d=s("./app/components/layouts/thirds.tsx"),p=s("./app/components/links/link.tsx"),c=s("./app/components/organizations/pageFilters/container.tsx"),m=s("./app/components/pagination.tsx"),u=s("./app/components/panels/index.tsx"),h=s("./app/components/sentryDocumentTitle.tsx"),g=s("./app/icons/index.tsx"),y=s("./app/locale.tsx"),v=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),x=s("./app/utils/projects.tsx"),f=s("./app/utils/teams.tsx"),w=s("./app/utils/withPageFilters.tsx"),Z=s("./app/views/alerts/filterBar.tsx"),C=s("./app/views/alerts/types.tsx"),T=s("./app/views/alerts/utils/index.tsx"),R=s("./app/views/alerts/list/header.tsx"),A=s("../node_modules/lodash/memoize.js"),b=s.n(A),I=s("./app/components/acl/access.tsx"),S=s("./app/components/alertBadge.tsx"),q=s("./app/components/avatar/actorAvatar.tsx"),F=s("./app/components/avatar/teamAvatar.tsx"),k=s("./app/components/confirm.tsx"),E=s("./app/components/dropdownAutoComplete/index.tsx"),$=s("./app/components/dropdownBubble.tsx"),_=s("./app/components/dropdownMenuControl.tsx"),z=s("./app/components/errorBoundary.tsx"),L=s("./app/components/highlight.tsx"),j=s("./app/components/idBadge/index.tsx"),B=s("./app/components/loadingIndicator.tsx"),P=s("./app/components/textOverflow.tsx"),O=s("./app/components/timeSince.tsx"),N=s("./app/components/tooltip.tsx"),D=s("./app/styles/space.tsx"),X=s("./app/views/alerts/rules/metric/constants.tsx"),G=s("./app/views/alerts/rules/metric/types.tsx"),W=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const H=b()(((e,t)=>t.find((t=>t.slug===e))));function M(e){var t,s,a,r,i;let{rule:o,projectsLoaded:l,projects:d,orgId:c,onDelete:m,onOwnerChange:u,userTeams:h,hasEditAccess:v}=e;const[x,f]=(0,n.useState)(""),w=void 0!==(null===(t=o.latestIncident)||void 0===t?void 0:t.status)&&[C.vt.CRITICAL,C.vt.WARNING].includes(o.latestIncident.status),Z=o.projects[0],R=`/organizations/${c}/alerts/${(0,T.Gm)(o)?"rules":"metric-rules"}/${Z}/${o.id}/`,A={pathname:`/organizations/${c}/alerts/new/${o.type===C.XO.METRIC?"metric":"issue"}/`,query:{project:Z,duplicateRuleId:o.id,createFromDuplicate:!0,referrer:"alert_stream"}},b=`/organizations/${c}/alerts/rules/details/${o.id}/`,$=null===(s=o.owner)||void 0===s?void 0:s.split(":")[1],j=$?{type:"team",id:$,name:""}:null,P=!$||h.has($),D=(0,T.Gm)(o)?(0,W.tZ)(p.Z,{to:`/organizations/${c}/alerts/rules/${o.projects[0]}/${o.id}/details/`,children:o.name}):(0,W.tZ)(U,{to:(0,T.Gm)(o)?R:b,children:o.name}),M={[C.vt.CRITICAL]:(0,y.t)("Critical"),[C.vt.WARNING]:(0,y.t)("Warning"),[C.vt.CLOSED]:(0,y.t)("Resolved"),[C.vt.OPENED]:(0,y.t)("Resolved")},me=[{key:"edit",label:(0,y.t)("Edit"),to:R},{key:"duplicate",label:(0,y.t)("Duplicate"),to:A},{key:"delete",label:(0,y.t)("Delete"),priority:"danger",onAction:()=>{(0,k._)({onConfirm:()=>m(Z,o),header:(0,y.t)("Delete Alert Rule?"),message:(0,y._N)("Are you sure you want to delete [name]? You won't be able to view the history of this alert once it's deleted.",{name:o.name}),confirmText:(0,y.t)("Delete Rule"),priority:"danger"})}}],ue={value:"",label:()=>(0,W.BX)(pe,{children:[(0,W.tZ)(le,{size:"20px"}),(0,y.t)("Unassigned")]}),searchKey:"unassigned",actor:"",disabled:!1},he=d.filter((e=>e.slug===Z))[0].teams,ge=null==he?void 0:he.filter((e=>h.has(e.id))),ye=null==ge?void 0:ge.map(((e,t)=>({value:e.id,searchKey:e.slug,label:s=>{let{inputValue:a}=s;return(0,W.BX)(pe,{"data-test-id":"assignee-option",children:[(0,W.tZ)(de,{children:(0,W.tZ)(F.Z,{team:e,size:24})}),(0,W.tZ)(ce,{children:(0,W.tZ)(L.Z,{text:a,children:`#${e.slug}`})})]},t)}}))).concat(ue),ve=null==x?void 0:x.split(":")[1],xe=null==ge?void 0:ge.find((e=>e.id===ve)),fe=x&&{type:"team",id:ve,name:""},we=fe?(0,W.tZ)(q.Z,{actor:fe,className:"avatar",size:24,tooltip:(0,W.tZ)(oe,{children:(0,y._N)("Assigned to [name]",{name:xe&&`#${xe.name}`})})}):(0,W.tZ)(N.Z,{isHoverable:!0,skipWrapper:!0,title:(0,y.t)("Unassigned"),children:(0,W.tZ)(le,{size:"20px",color:"gray400"})});return(0,W.BX)(z.Z,{children:[(0,W.BX)(Y,{isIssueAlert:(0,T.Gm)(o),children:[(0,W.tZ)(V,{children:(0,W.tZ)(N.Z,{title:(0,T.Gm)(o)?(0,y.t)("Issue Alert"):(0,y._N)("Metric Alert Status: [status]",{status:M[null!==(a=null==o||null===(r=o.latestIncident)||void 0===r?void 0:r.status)&&void 0!==a?a:C.vt.CLOSED]}),children:(0,W.tZ)(S.Z,{status:null==o||null===(i=o.latestIncident)||void 0===i?void 0:i.status,isIssue:(0,T.Gm)(o),hideText:!0})})}),(0,W.BX)(K,{children:[(0,W.tZ)(Q,{children:D}),(0,W.tZ)(J,{children:(0,T.Gm)(o)?o.lastTriggered?(0,W.BX)("div",{children:[(0,y.t)("Triggered "),(0,W.tZ)(O.Z,{date:o.lastTriggered})]}):(0,y.t)("Alerts not triggered yet"):o.latestIncident?w?(0,W.BX)("div",{children:[(0,y.t)("Triggered "),(0,W.tZ)(O.Z,{date:o.latestIncident.dateCreated})]}):(0,W.BX)("div",{children:[(0,y.t)("Resolved "),(0,W.tZ)(O.Z,{date:o.latestIncident.dateClosed})]}):(0,y.t)("Alerts not triggered yet")})]})]}),(0,W.tZ)(V,{children:function(){var e,t;if((0,T.Gm)(o))return null;const s=o.triggers.find((e=>{let{label:t}=e;return t===G.F4.CRITICAL})),a=o.triggers.find((e=>{let{label:t}=e;return t===G.F4.WARNING})),r=o.resolveThreshold,n=w&&(null===(e=o.latestIncident)||void 0===e?void 0:e.status)===C.vt.CRITICAL?s:null!=a?a:s;let i,l="green300",d=w&&o.thresholdType===G.lT.ABOVE?(0,y.t)("Above"):(0,y.t)("Below");return w?(l=(null==n?void 0:n.label)===G.F4.CRITICAL?"red300":(null==n?void 0:n.label)===G.F4.WARNING?"yellow300":"green300",i=o.thresholdType===G.lT.ABOVE?"up":"down"):(i=o.thresholdType===G.lT.ABOVE?"down":"up",d=o.thresholdType===G.lT.ABOVE?(0,y.t)("Below"):(0,y.t)("Above")),(0,W.BX)(V,{children:[(0,W.tZ)(g.CC,{color:l,direction:i}),(0,W.BX)(se,{children:[`${d} ${o.latestIncident||!o.latestIncident&&!r?null==n||null===(t=n.alertThreshold)||void 0===t?void 0:t.toLocaleString():null==r?void 0:r.toLocaleString()}`,(0,X.Hq)(o.aggregate,o.comparisonDelta?G.t6.CHANGE:G.t6.COUNT)]})]})}()}),(0,W.tZ)(V,{children:(0,W.tZ)(ee,{children:(0,W.tZ)(te,{avatarSize:18,project:l?H(Z,d):{slug:Z}})})}),(0,W.tZ)(V,{children:j?(0,W.tZ)(q.Z,{actor:j,size:24}):(0,W.BX)(re,{children:[!l&&(0,W.tZ)(B.Z,{mini:!0,style:{height:"24px",margin:0,marginRight:11}}),l&&(0,W.tZ)(E.Z,{"data-test-id":"alert-row-assignee",maxHeight:400,onOpen:e=>{null==e||e.stopPropagation()},items:ye,alignMenu:"right",onSelect:function(e){let{value:t}=e;const s=t&&`team:${t}`;f(s),u(Z,o,s)},itemSize:"small",searchPlaceholder:(0,y.t)("Filter teams"),disableLabelPadding:!0,emptyHidesInput:!0,disabled:!v,children:e=>{let{getActorProps:t,isOpen:s}=e;return(0,W.BX)(ne,{...t({}),children:[we,v&&(0,W.tZ)(ie,{direction:s?"up":"down",size:"xs"})]})}})]})}),(0,W.tZ)(ae,{children:(0,W.tZ)(I.Z,{access:["alerts:write"],children:e=>{let{hasAccess:t}=e;return(0,W.tZ)(_.Z,{items:me,placement:"bottom right",triggerProps:{"aria-label":(0,y.t)("Show more"),"data-test-id":"alert-row-actions",size:"xs",icon:(0,W.tZ)(g.YR,{size:"xs"}),showChevron:!1},disabledKeys:t&&P?[]:["delete"]})}})})]})}M.displayName="RuleListRow";const U=(0,r.Z)(p.Z,{target:"e1k8ax6w17"})((e=>e.theme.overflowEllipsis),";"),V=(0,r.Z)("div",{target:"e1k8ax6w16"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Y=(0,r.Z)(V,{target:"e1k8ax6w15"})("position:relative;",(e=>e.isIssueAlert&&`padding: ${(0,D.Z)(3)} ${(0,D.Z)(2)}; line-height: 2.4;`),";"),K=(0,r.Z)("div",{target:"e1k8ax6w14"})((e=>e.theme.overflowEllipsis)," margin-left:",(0,D.Z)(2),";line-height:1.35;"),Q=(0,r.Z)("div",{target:"e1k8ax6w13"})((e=>e.theme.overflowEllipsis)," font-size:",(e=>e.theme.fontSizeLarge),";@media (max-width: ",(e=>e.theme.breakpoints.xlarge),"){max-width:300px;}@media (max-width: ",(e=>e.theme.breakpoints.large),"){max-width:165px;}@media (max-width: ",(e=>e.theme.breakpoints.medium),"){max-width:100px;}"),J=(0,r.Z)("div",{target:"e1k8ax6w12"})("color:",(e=>e.theme.gray300),";"),ee=(0,r.Z)("div",{target:"e1k8ax6w11"})({name:"1d3w5wq",styles:"width:100%"}),te=(0,r.Z)(j.Z,{target:"e1k8ax6w10"})({name:"ozd7xs",styles:"flex-shrink:0"}),se=(0,r.Z)("div",{target:"e1k8ax6w9"})("margin-left:",(0,D.Z)(1),";white-space:nowrap;font-variant-numeric:tabular-nums;"),ae=(0,r.Z)(V,{target:"e1k8ax6w8"})("justify-content:center;padding:",(0,D.Z)(1),";"),re=(0,r.Z)("div",{target:"e1k8ax6w7"})("display:flex;justify-content:flex-end;",$.Z,"{right:-14px;}"),ne=(0,r.Z)("div",{target:"e1k8ax6w6"})({name:"1nfrdh1",styles:"display:flex;align-items:center;font-size:20px"}),ie=(0,r.Z)(g.g6,{target:"e1k8ax6w5"})("margin-left:",(0,D.Z)(1),";"),oe=(0,r.Z)("div",{target:"e1k8ax6w4"})({name:"1flj9lk",styles:"text-align:left"}),le=(0,r.Z)(g.qO,{target:"e1k8ax6w3"})({name:"2bhlo8",styles:"margin-right:2px"}),de=(0,r.Z)("div",{target:"e1k8ax6w2"})({name:"ksp8pg",styles:"display:flex;align-items:center;justify-content:center;width:24px;height:24px;flex-shrink:0"}),pe=(0,r.Z)("div",{target:"e1k8ax6w1"})({name:"na9qgn",styles:"display:flex;align-items:center;font-size:13px"}),ce=(0,r.Z)(P.Z,{target:"e1k8ax6w0"})({name:"18jsklt",styles:"margin-left:6px"}),me=M,ue=(0,l.Z)({hookName:"component:alerts-header"});class he extends o.Z{constructor(){super(...arguments),(0,a.Z)(this,"handleChangeFilter",(e=>{const{router:t,location:s}=this.props,{cursor:a,page:r,...n}=s.query;t.push({pathname:s.pathname,query:{...n,team:e.length>0?e:""}})})),(0,a.Z)(this,"handleChangeSearch",(e=>{const{router:t,location:s}=this.props,{cursor:a,page:r,...n}=s.query;t.push({pathname:s.pathname,query:{...n,name:e}})})),(0,a.Z)(this,"handleOwnerChange",((e,t,s)=>{const{orgId:a}=this.props.params,r=`/projects/${a}/${e}/${"alert_rule"===t.type?"alert-rules":"rules"}/${t.id}/`,n={...t,owner:s};this.api.request(r,{method:"PUT",data:n,success:()=>{(0,i.Hz)((0,y.t)("Updated alert rule"),"success")},error:()=>{(0,i.Hz)((0,y.t)("Unable to save change"),"error")}})})),(0,a.Z)(this,"handleDeleteRule",(async(e,t)=>{const{orgId:s}=this.props.params,a=(0,T.Gm)(t)?"rules":"alert-rules";try{await this.api.requestPromise(`/projects/${s}/${e}/${a}/${t.id}/`,{method:"DELETE"}),this.reloadData()}catch(e){(0,i.Iw)((0,y.t)("Error deleting rule"))}}))}getEndpoints(){const{params:e,location:t}=this.props,{query:s}=t;return s.expand=["latestIncident","lastTriggered"],s.team=(0,T.LI)(s.team),s.sort||(s.sort=["incident_status","date_triggered"]),[["ruleList",`/organizations/${e&&e.orgId}/combined-rules/`,{query:s}]]}onRequestSuccess(e){let{stateKey:t,resp:s}=e;if("ruleList"===t){const e=s.getResponseHeader("X-Sentry-Issue-Rule-Hits"),t=s.getResponseHeader("X-Sentry-Alert-Rule-Hits");this.setState({issueRuleCount:parseInt(e,10),alertRuleCount:parseInt(t,10)})}}get projectsFromResults(){var e;const t=null!==(e=this.state.ruleList)&&void 0!==e?e:[];return[...new Set(t.map((e=>{let{projects:t}=e;return t})).flat())]}renderLoading(){return this.renderBody()}renderList(){const{params:{orgId:e},location:t,organization:s,router:a}=this.props,{loading:r,ruleList:n=[],ruleListPageLinks:i,issueRuleCount:o,alertRuleCount:l}=this.state,{query:p}=t,c=s.access.includes("alerts:write"),u={asc:"1"===p.asc,field:p.sort||"date_added"},{cursor:h,page:v,...w}=p,R=u.field.includes("incident_status")||u.field.includes("date_triggered"),A=(0,W.tZ)(g.CC,{color:"gray300",size:"xs",direction:u.asc?"up":"down"});return(0,W.tZ)(d.uT,{children:(0,W.BX)(d.or,{fullWidth:!0,children:[void 0!==o&&o>0&&0===l&&!p.name&&(0,W.tZ)(ue,{organization:s}),(0,W.tZ)(Z.Z,{location:t,onChangeFilter:this.handleChangeFilter,onChangeSearch:this.handleChangeSearch}),(0,W.tZ)(f.Z,{provideUserTeams:!0,children:s=>{let{initiallyLoaded:a,teams:i}=s;return(0,W.tZ)(xe,{headers:[(0,W.BX)(ve,{role:"columnheader","aria-sort":"name"!==u.field?"none":u.asc?"ascending":"descending",to:{pathname:t.pathname,query:{...w,asc:"name"===u.field&&u.asc?void 0:"1",sort:"name"}},children:[(0,y.t)("Alert Rule")," ","name"===u.field&&A]},"name"),(0,W.BX)(ve,{role:"columnheader","aria-sort":R?u.asc?"ascending":"descending":"none",to:{pathname:t.pathname,query:{...w,asc:R&&!u.asc?"1":void 0,sort:["incident_status","date_triggered"]}},children:[(0,y.t)("Status")," ",R&&A]},"status"),(0,y.t)("Project"),(0,y.t)("Team"),(0,y.t)("Actions")],isLoading:r||!a,isEmpty:0===(null==n?void 0:n.length),emptyMessage:(0,y.t)("No alert rules found for the current query."),children:(0,W.tZ)(x.Z,{orgId:e,slugs:this.projectsFromResults,children:t=>{let{initiallyLoaded:s,projects:a}=t;return null==n?void 0:n.map((t=>(0,W.tZ)(me,{projectsLoaded:s,projects:a,rule:t,orgId:e,onOwnerChange:this.handleOwnerChange,onDelete:this.handleDeleteRule,userTeams:new Set(i.map((e=>e.id))),hasEditAccess:c},`${(0,T.Gm)(t)?C.ok.METRIC:C.ok.ISSUE}-${t.id}`)))}})})}}),(0,W.tZ)(m.Z,{pageLinks:i,onCursor:(e,t,s)=>{let r=w.team;r&&0!==r.length||(r=""),a.push({pathname:t,query:{...w,team:r,cursor:e}})}})]})})}renderBody(){const{params:e,router:t}=this.props,{orgId:s}=e;return(0,W.tZ)(h.Z,{title:(0,y.t)("Alerts"),orgSlug:s,children:(0,W.BX)(c.Z,{children:[(0,W.tZ)(R.Z,{router:t,activeTab:"rules"}),this.renderList()]})})}}class ge extends n.Component{componentDidMount(){this.trackView()}componentDidUpdate(e){var t,s;const{location:a}=this.props;(null===(t=e.location.query)||void 0===t?void 0:t.sort)!==(null===(s=a.query)||void 0===s?void 0:s.sort)&&this.trackView()}trackView(){const{organization:e,location:t}=this.props;(0,v.Z)("alert_rules.viewed",{organization:e,sort:Array.isArray(t.query.sort)?t.query.sort.join(","):t.query.sort})}render(){return(0,W.tZ)(he,{...this.props})}}ge.displayName="AlertRulesListContainer";const ye=(0,w.Z)(ge),ve=(0,r.Z)(p.Z,{target:"e1hnq40r1"})({name:"1sbdiq8",styles:"color:inherit;:hover{color:inherit;}"}),xe=(0,r.Z)(u.KB,{target:"e1hnq40r0"})("position:static;overflow:auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){overflow:initial;}grid-template-columns:4fr auto 140px 60px auto;white-space:nowrap;font-size:",(e=>e.theme.fontSizeMedium),";")},"./app/views/alerts/rules/metric/constants.tsx":(e,t,s)=>{s.d(t,{H9:()=>b,Hq:()=>S,KP:()=>Z,Ng:()=>m,P1:()=>h,Q6:()=>I,Vr:()=>c,W7:()=>R,XU:()=>f,Yp:()=>T,b1:()=>l,bp:()=>x,ep:()=>A,hh:()=>u,kV:()=>p,nM:()=>C,rQ:()=>w,wT:()=>d,yq:()=>g}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js");var a=s("./app/locale.tsx"),r=s("./app/utils/fields/index.ts"),n=s("./app/utils/performance/vitals/constants.tsx"),i=s("./app/views/alerts/rules/metric/types.tsx"),o=s("./app/views/alerts/utils/index.tsx");const l=1,d=60,p=10080,c="count()",m="p95(transaction.duration)",u={[i.qz.ERRORS]:"event.type:error",[i.qz.TRANSACTIONS]:"event.type:transaction",[i.qz.GENERIC_METRICS]:"event.type:transaction"},h={[i.Yh.ERROR_DEFAULT]:"event.type:[error, default]",[i.Yh.ERROR]:"event.type:error",[i.Yh.DEFAULT]:"event.type:default",[i.Yh.TRANSACTION]:"event.type:transaction"},g={aggregations:[r.Ac.Count,r.Ac.CountUnique],fields:["user"]},y=[r.Ac.Avg,r.Ac.Percentile,r.Ac.P50,r.Ac.P75,r.Ac.P95,r.Ac.P99,r.Ac.P100],v=[...y,r.Ac.FailureRate,r.Ac.Apdex,r.Ac.Count],x=["dataset","eventTypes","aggregate","query","timeWindow","thresholdPeriod","projects","environment","resolveThreshold","thresholdType","owner","name","projectId","comparisonDelta"],f=["alertThreshold","label"],w=["type","targetType","targetIdentifier","inputChannelId","options"],Z=[{value:5,label:(0,a.t)("same time 5 minutes ago")},{value:15,label:(0,a.t)("same time 15 minutes ago")},{value:60,label:(0,a.t)("same time one hour ago")},{value:1440,label:(0,a.t)("same time one day ago")},{value:10080,label:(0,a.t)("same time one week ago")},{value:43200,label:(0,a.t)("same time one month ago")}];function C(e,t){return"custom"===e&&t===i.qz.ERRORS?g:{aggregations:"apdex"===e||"custom"===e?v:y,fields:["transaction.duration"],measurementKeys:Object.keys(n.r9)}}const T={aggregations:v,fields:["transaction.duration"],measurementKeys:Object.keys(n.r9)};function R(e){return{label:e,alertThreshold:"",actions:[]}}function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{dataset:i.qz.ERRORS,eventTypes:[i.GM.ERROR],aggregate:c,query:"",timeWindow:60,thresholdPeriod:1,triggers:[R(i.F4.CRITICAL),R(i.F4.WARNING)],projects:[],environment:null,resolveThreshold:"",thresholdType:i.lT.ABOVE,...e}}function b(e){var t;const s=(0,o.A4)(e.query),a=s?o.Ey[s.source]:o.Ey.error;let r=e.getYAxis();return"transactions"===a.dataset&&/^p\d{2,3}\(\)/.test(e.getYAxis())&&(r=e.getYAxis().slice(0,3)+"(transaction.duration)"),{...A(),...a,query:null!==(t=null==s?void 0:s.query)&&void 0!==t?t:e.query,aggregate:r,environment:e.environment.length?e.environment[0]:null}}function I(e){const{eventTypes:t,aggregate:s,dataset:a}=e,r={};return(0,o.Eb)(s)&&(r.thresholdType=i.lT.BELOW,r.timeWindow=i.Tb.ONE_HOUR),s.includes("apdex")&&(r.thresholdType=i.lT.BELOW),{...A(r),eventTypes:[t],aggregate:s,dataset:a}}function S(e,t){return(0,o.Eb)(e)||t===i.t6.CHANGE?"%":e.includes("measurements.cls")?"":e.includes("duration")||e.includes("measurements")?"ms":""}}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_list_rules_index_tsx.03ac62db12bcd341e47f0c8a252808b6.js.map