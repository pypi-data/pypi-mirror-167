"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_edit_tsx"],{"./app/views/alerts/edit.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),n=s("./app/components/layouts/thirds.tsx"),l=s("./app/components/loadingIndicator.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),u=s("./app/locale.tsx"),p=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),d=s("./app/utils/teams.tsx"),c=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),h=s("./app/views/alerts/rules/issue/index.tsx"),m=s("./app/actionCreators/indicator.tsx"),g=s("./app/components/alert.tsx"),x=s("./app/utils/analytics.tsx"),T=s("./app/utils/routeTitle.tsx"),Z=s("./app/views/alerts/rules/metric/ruleForm.tsx"),j=s("./app/views/asyncView.tsx"),y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends j.Z{constructor(){super(...arguments),(0,r.Z)(this,"handleSubmitSuccess",(()=>{const{router:e}=this.props,{orgId:t,ruleId:s}=this.props.params;x.oF.endTransaction({name:"saveAlertRule"}),e.push({pathname:`/organizations/${t}/alerts/rules/details/${s}/`})}))}getDefaultState(){return{...super.getDefaultState(),actions:new Map}}getTitle(){const{organization:e,project:t}=this.props,{rule:s}=this.state,r=null==s?void 0:s.name;return(0,T.Z)(r?(0,u.t)("Alert %s",r):"",e.slug,!1,null==t?void 0:t.slug)}getEndpoints(){const{orgId:e,ruleId:t}=this.props.params;return[["rule",`/organizations/${e}/alert-rules/${t}/`]]}onRequestSuccess(e){let{stateKey:t,data:s}=e;"rule"===t&&s.name&&this.props.onChangeTitle(s.name)}onLoadAllEndpointsSuccess(){const{rule:e}=this.state;null!=e&&e.errors&&((null==e?void 0:e.errors)||[]).map((e=>{let{detail:t}=e;return(0,m.Iw)(t,{append:!0})}))}renderError(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{errors:s}=this.state;return Object.values(s).find((e=>e&&404===e.status))?(0,y.tZ)(g.Z,{type:"error",showIcon:!0,children:(0,u.t)("This alert rule could not be found.")}):super.renderError(e,t)}renderBody(){const{ruleId:e}=this.props.params,{rule:t}=this.state;return(0,y.tZ)(Z.Z,{...this.props,ruleId:e,rule:t,onSubmitSuccess:this.handleSubmitSuccess,disableProjectSelector:!0})}}const v=b;var w=s("./app/views/alerts/types.tsx");class S extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{ruleName:""}),(0,r.Z)(this,"handleChangeTitle",(e=>{this.setState({ruleName:e})}))}componentDidMount(){const{organization:e,project:t}=this.props;(0,p.Z)("edit_alert_rule.viewed",{organization:e,project_id:t.id,alert_type:this.getAlertType()})}getTitle(){const{ruleName:e}=this.state;return`${e}`}getAlertType(){return location.pathname.includes("/alerts/metric-rules/")?w.ok.METRIC:w.ok.ISSUE}render(){const{hasMetricAlerts:e,location:t,organization:s,project:r,routes:o}=this.props,p=this.getAlertType();return(0,y.BX)(a.Fragment,{children:[(0,y.tZ)(i.Z,{title:this.getTitle(),orgSlug:s.slug,projectSlug:r.slug}),(0,y.tZ)(n.h4,{children:(0,y.BX)(n.oB,{children:[(0,y.tZ)(c.Z,{organization:s,title:(0,u.t)("Edit Alert Rule"),projectSlug:r.slug,routes:o,location:t}),(0,y.tZ)(n.Dx,{children:this.getTitle()})]})}),(0,y.tZ)(I,{children:(0,y.tZ)(d.Z,{provideUserTeams:!0,children:t=>{let{teams:s,initiallyLoaded:o}=t;return o?(0,y.BX)(a.Fragment,{children:[(!e||p===w.ok.ISSUE)&&(0,y.tZ)(h.Z,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t}))}),e&&p===w.ok.METRIC&&(0,y.tZ)(v,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t}))})]}):(0,y.tZ)(l.Z,{})}})})]})}}S.displayName="ProjectAlertsEditor";const I=(0,o.Z)(n.uT,{target:"eqr07hw0"})({name:"9ap5cm",styles:"*:not(img){max-width:1000px;}"}),_=S}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_edit_tsx.2d6571b25263f69b7dc5bfa15b8dc280.js.map