"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_releases_detail_index_tsx"],{"./app/actionCreators/release.tsx":(e,t,s)=>{s.d(t,{VE:()=>c,aQ:()=>p,dF:()=>d,o7:()=>l});var r=s("../node_modules/@sentry/hub/esm/exports.js"),o=s("./app/actionCreators/indicator.tsx"),n=s("./app/locale.tsx"),a=s("./app/stores/releaseStore.tsx"),i=s("./app/types/index.tsx");function l(e,t){const{orgSlug:s,projectSlug:o,releaseVersion:n}=t,i=`/projects/${s}/${o}/releases/${encodeURIComponent(n)}/`;return a.Z.state.releaseLoading[(0,a.p)(o,n)]=!0,a.Z.loadRelease(s,o,n),e.requestPromise(i,{method:"GET"}).then((e=>{a.Z.loadReleaseSuccess(o,n,e)})).catch((e=>{404!==e.status?(a.Z.loadReleaseError(o,n,e),r.$e((t=>{t.setLevel("warning"),t.setFingerprint(["getRelease-action-creator"]),r.Tb(e)}))):a.Z.loadReleaseSuccess(o,n,null)}))}function d(e,t){const{orgSlug:s,projectSlug:o,releaseVersion:n}=t,i=`/organizations/${s}/releases/${encodeURIComponent(n)}/deploys/`;return a.Z.state.deploysLoading[(0,a.p)(o,n)]=!0,a.Z.loadDeploys(s,o,n),e.requestPromise(i,{method:"GET"}).then((e=>{a.Z.loadDeploysSuccess(o,n,e)})).catch((e=>{404!==e.status?(a.Z.loadDeploysError(o,n,e),r.$e((t=>{t.setLevel("warning"),t.setFingerprint(["getReleaseDeploys-action-creator"]),r.Tb(e)}))):a.Z.loadDeploysSuccess(o,n,null)}))}function c(e,t){const{orgSlug:s,projectSlug:r,releaseVersion:l}=t;return a.Z.loadRelease(s,r,l),(0,o.E3)((0,n.t)("Archiving Release…")),e.requestPromise(`/organizations/${s}/releases/`,{method:"POST",data:{status:i.dE.Archived,projects:[],version:l}}).then((e=>{a.Z.loadReleaseSuccess(r,l,e),(0,o.S9)((0,n.t)("Release was successfully archived."))})).catch((e=>{var t,s;throw a.Z.loadReleaseError(r,l,e),(0,o.Iw)(null!==(t=null===(s=e.responseJSON)||void 0===s?void 0:s.detail)&&void 0!==t?t:(0,n.t)("Release could not be be archived.")),e}))}function p(e,t){const{orgSlug:s,projectSlug:r,releaseVersion:l}=t;return a.Z.loadRelease(s,r,l),(0,o.E3)((0,n.t)("Restoring Release…")),e.requestPromise(`/organizations/${s}/releases/`,{method:"POST",data:{status:i.dE.Active,projects:[],version:l}}).then((e=>{a.Z.loadReleaseSuccess(r,l,e),(0,o.S9)((0,n.t)("Release was successfully restored."))})).catch((e=>{var t,s;throw a.Z.loadReleaseError(r,l,e),(0,o.Iw)(null!==(t=null===(s=e.responseJSON)||void 0===s?void 0:s.detail)&&void 0!==t?t:(0,n.t)("Release could not be be restored.")),e}))}},"./app/components/navigationButtonGroup.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var r=s("./app/components/button.tsx"),o=s("./app/components/buttonBar.tsx"),n=s("./app/icons/index.tsx"),a=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=e=>{let{links:t,hasNext:s=!1,hasPrevious:l=!1,className:d,size:c,onOldestClick:p,onOlderClick:u,onNewerClick:h,onNewestClick:g}=e;return(0,i.BX)(o.ZP,{className:d,merged:!0,children:[(0,i.tZ)(r.ZP,{size:c,to:t[0],disabled:!l,"aria-label":(0,a.t)("Oldest"),icon:(0,i.tZ)(n.sm,{size:"xs"}),onClick:p}),(0,i.tZ)(r.ZP,{size:c,to:t[1],disabled:!l,onClick:u,children:(0,a.t)("Older")}),(0,i.tZ)(r.ZP,{size:c,to:t[2],disabled:!s,onClick:h,children:(0,a.t)("Newer")}),(0,i.tZ)(r.ZP,{size:c,to:t[3],disabled:!s,"aria-label":(0,a.t)("Newest"),icon:(0,i.tZ)(n.pi,{size:"xs"}),onClick:g})]})};l.displayName="NavigationButtonGroup";const d=l},"./app/stores/releaseStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>i,p:()=>n}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/reflux/src/index.js"),o=s("./app/actions/organizationActions.tsx");const n=(e,t)=>`${e}${t}`,a={state:{orgSlug:void 0,release:new Map,releaseLoading:new Map,releaseError:new Map,deploys:new Map,deploysLoading:new Map,deploysError:new Map},unsubscribeListeners:[],init(){this.unsubscribeListeners.push(this.listenTo(o.Z.update,this.updateOrganization)),this.reset()},reset(){this.state={orgSlug:void 0,release:new Map,releaseLoading:new Map,releaseError:new Map,deploys:new Map,deploysLoading:new Map,deploysError:new Map},this.trigger(this.state)},updateOrganization(e){this.reset(),this.state.orgSlug=e.slug,this.trigger(this.state)},loadRelease(e,t,s){this.orgSlug&&this.orgSlug===e||(this.reset(),this.orgSlug=e);const r=n(t,s),{releaseLoading:o,releaseError:a,...i}=this.state;this.state={...i,releaseLoading:{...o,[r]:!0},releaseError:{...a,[r]:void 0}},this.trigger(this.state)},loadReleaseError(e,t,s){const r=n(e,t),{releaseLoading:o,releaseError:a,...i}=this.state;this.state={...i,releaseLoading:{...o,[r]:!1},releaseError:{...a,[r]:s}},this.trigger(this.state)},loadReleaseSuccess(e,t,s){const r=n(e,t),{release:o,releaseLoading:a,releaseError:i,...l}=this.state;this.state={...l,release:{...o,[r]:s},releaseLoading:{...a,[r]:!1},releaseError:{...i,[r]:void 0}},this.trigger(this.state)},loadDeploys(e,t,s){this.orgSlug&&this.orgSlug===e||(this.reset(),this.orgSlug=e);const r=n(t,s),{deploysLoading:o,deploysError:a,...i}=this.state;this.state={...i,deploysLoading:{...o,[r]:!0},deploysError:{...a,[r]:void 0}},this.trigger(this.state)},loadDeploysError(e,t,s){const r=n(e,t),{deploysLoading:o,deploysError:a,...i}=this.state;this.state={...i,deploysLoading:{...o,[r]:!1},deploysError:{...a,[r]:s}},this.trigger(this.state)},loadDeploysSuccess(e,t,s){const r=n(e,t),{deploys:o,deploysLoading:a,deploysError:i,...l}=this.state;this.state={...l,deploys:{...o,[r]:s},deploysLoading:{...a,[r]:!1},deploysError:{...i,[r]:void 0}},this.trigger(this.state)},get(e,t){const s=n(e,t);return{release:this.state.release[s],releaseLoading:this.state.releaseLoading[s],releaseError:this.state.releaseError[s],deploys:this.state.deploys[s],deploysLoading:this.state.deploysLoading[s],deploysError:this.state.deploysError[s]}}},i=(0,r.createStore)(a)},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;const o=`${e} - ${t}`,n=r?`${o} - ${r}`:o;return s?`${n} - Sentry`:n}},"./app/utils/sessions.tsx":(e,t,s)=>{s.d(t,{$K:()=>f,BN:()=>S,FS:()=>Z,Lv:()=>b,Pn:()=>y,SU:()=>v,U5:()=>C,VH:()=>g,Xz:()=>A,Y5:()=>E,hD:()=>j,iy:()=>w,mo:()=>R,sA:()=>m,wt:()=>x}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("../node_modules/lodash/compact.js"),o=s.n(r),n=s("../node_modules/lodash/mean.js"),a=s.n(n),i=s("../node_modules/moment/moment.js"),l=s.n(i),d=s("./app/components/charts/utils.tsx"),c=s("./app/types/index.tsx"),p=s("./app/utils.tsx"),u=s("./app/views/releases/utils/index.tsx"),h=s("./app/views/releases/utils/sessionTerm.tsx");const g=10;function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce(((e,s)=>e+s.totals[t]),0)}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;return e.reduce(((e,r)=>e+r.series[t][s]),0)}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const s=S(e,t,c.$y.CRASHED);return(0,p.ri)(s)?(0,u.Mf)(100-s):null}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const s=m(e,t),r=e.filter((e=>!!e.totals[t])).length;return(0,p.ri)(s)&&null!==r&&0!==s?s/r:null}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=Array(s.length).fill(0),o=e.map((e=>e.series[t]));return o.forEach((e=>{e.forEach(((e,t)=>r[t]+=e))})),r}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;const r=m(e,t),o=m(e.filter((e=>{let{by:t}=e;return t["session.status"]===s})),t);return(0,p.ri)(r)&&0!==r?(0,p.aQ)(null!=o?o:0,null!=r?r:0):null}function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0;return o()(t.map(((t,r)=>{var o,n,a;const i=e.reduce(((e,t)=>{var o,n;return e+(null!==(o=null===(n=t.series[s])||void 0===n?void 0:n[r])&&void 0!==o?o:0)}),0),l=null!==(o=null===(n=e.find((e=>e.by["session.status"]===c.$y.CRASHED)))||void 0===n||null===(a=n.series[s])||void 0===a?void 0:a[r])&&void 0!==o?o:0,d=(0,p.aQ)(l,i);return 0===i?null:{name:t,value:(0,u.Mf)(100-d)}})))}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return o()(t.map(((t,o)=>{var n,a;const i=e.reduce(((e,t)=>e+t.series[s][o]),0),l=null!==(n=null===(a=e.find((e=>e.by["session.status"]===r)))||void 0===a?void 0:a.series[s][o])&&void 0!==n?n:0,d=(0,p.aQ)(l,i);return 0===i?null:{name:t,value:(0,u.r)(d)}})))}function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return o()(t.map(((t,o)=>{const n=a()(e.map((e=>e.series[s][o])).filter((e=>!!e)));return n?{name:t,value:"function"==typeof r?r(n):n}:null})))}function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;return s.map(((s,o)=>{const n=e.reduce(((e,t)=>{var s,n;return e+(null!==(s=null===(n=t.series[r])||void 0===n?void 0:n[o])&&void 0!==s?s:0)}),0),a=t.reduce(((e,t)=>{var s,n;return e+(null!==(s=null===(n=t.series[r])||void 0===n?void 0:n[o])&&void 0!==s?s:0)}),0),i=(0,p.aQ)(n,a);return{name:s,value:Math.round(i)}}))}function w(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return s.map(((s,r)=>{var o;return{name:s,value:null!==(o=null==t?void 0:t.series[e][r])&&void 0!==o?o:0}}))}function b(e){const t=e.charts.getColorPalette(14);return{[c.$y.HEALTHY]:{seriesName:h.U1.healthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ERRORED]:{seriesName:h.U1.errored,data:[],color:t[12],areaStyle:{color:t[12],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ABNORMAL]:{seriesName:h.U1.abnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.CRASHED]:{seriesName:h.U1.crashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:1},lineStyle:{opacity:0,width:.4}}}}function A(e){let{highFidelity:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(0,d.Nm)(e);return l()(e.start).isSameOrBefore(l()().subtract(30,"days"))&&(t=!1),s>=d.Zn?"1d":s>=d.B8?"4h":s>=d.aC?"1h":t?s<=g?"10s":s<=30?"1m":"5m":"1h"}function C(e,t,s){if(!t||!s)return e;const r=[],o=e.intervals.filter(((e,o)=>{const n=l().utc(e).isBetween(l().utc(t),l().utc(s),void 0,"[]");return n&&r.push(o),n})),n=e.groups.map((e=>{const t={},s={};return Object.keys(e.series).forEach((o=>{s[o]=0,t[o]=e.series[o].filter(((e,t)=>{const n=r.includes(t);var a;return n&&(s[o]=(null!==(a=s[o])&&void 0!==a?a:0)+e),n})),o.startsWith("p50")&&(s[o]=a()(t[o])),o.startsWith("count_unique")&&(s[o]=e.totals[o])})),{...e,series:t,totals:s}}));return{start:o[0],end:o[o.length-1],query:e.query,intervals:o,groups:n}}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./app/components/asyncComponent.tsx"),o=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends r.Z{getTitle(){return""}render(){return(0,n.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/releases/detail/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{ReleaseContext:()=>pe,ReleasesDetailContainer:()=>he,default:()=>ve});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),a=s("../node_modules/lodash/isEqual.js"),i=s.n(a),l=s("../node_modules/lodash/pick.js"),d=s.n(l),c=s("./app/components/alert.tsx"),p=s("./app/components/asyncComponent.tsx"),u=s("./app/components/loadingIndicator.tsx"),h=s("./app/components/noProjectMessage.tsx"),g=s("./app/components/organizations/pageFilters/container.tsx"),m=s("./app/components/organizations/pageFilters/parse.tsx"),v=s("./app/actionCreators/modal.tsx"),y=s("./app/components/contextPickerModal.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){let{noProjectRedirectPath:t,nextPath:s,router:r,projects:o}=e;const n=s.query;let a=!1,i=`${s.pathname}?project=`;if(n){const e=[...Object.entries(n).filter((e=>{let[t,s]=e;return"project"!==t})).map((e=>{let[t,s]=e;return`${t}=${s}`})),"project="].join("&");i=`${s.pathname}?${e}`}return 1===o.length?(r.replace(i+o[0].id),null):((0,v.openModal)((e=>(0,f.tZ)(y.Z,{...e,needOrg:!1,needProject:!0,nextPath:`${i}:project`,onFinish:e=>{a=!0,r.replace(e)},projectSlugs:o.map((e=>e.slug))})),{onClose(){a||r.push(t)}}),(0,f.tZ)(S,{}))}x.displayName="PickProjectToContinue";const S=(0,o.Z)("div",{target:"e1sj8doz0"})({name:"4wiox3",styles:"height:100vh;width:100%"}),Z=x;var E=s("./app/constants/pageFilters.tsx"),R=s("./app/icons/index.tsx"),j=s("./app/locale.tsx"),w=s("./app/styles/organization.tsx"),b=s("./app/styles/space.tsx"),A=s("./app/types/index.tsx"),C=s("./app/utils/formatters.tsx"),D=s("./app/utils/routeTitle.tsx"),N=s("./app/utils/sessions.tsx"),L=s("./app/utils/withOrganization.tsx"),O=s("./app/utils/withPageFilters.tsx"),T=s("./app/views/asyncView.tsx"),P=s("./app/views/releases/utils/index.tsx"),_=s("./app/components/badge.tsx"),z=s("./app/components/breadcrumbs.tsx"),H=s("./app/components/clipboard.tsx"),F=s("./app/components/idBadge/index.tsx"),k=s("./app/components/layouts/thirds.tsx"),$=s("./app/components/links/externalLink.tsx"),M=s("./app/components/links/listLink.tsx"),B=s("./app/components/navTabs.tsx"),U=s("./app/components/tooltip.tsx"),q=s("./app/components/version.tsx"),I=s("../node_modules/react-router/es/index.js"),V=s("./app/actionCreators/release.tsx"),Y=s("./app/api.tsx"),Q=s("./app/components/buttonBar.tsx"),X=s("./app/components/confirm.tsx"),G=s("./app/components/dropdownMenuControl.tsx"),J=s("./app/components/idBadge/projectBadge.tsx"),K=s("./app/components/navigationButtonGroup.tsx"),W=s("./app/components/textOverflow.tsx"),ee=s("./app/utils/analytics.tsx");function te(e){let{location:t,organization:s,projectSlug:r,release:o,releaseMeta:a,refetchData:i}=e;async function l(){try{await(0,V.VE)(new Y.KU,{orgSlug:s.slug,projectSlug:r,releaseVersion:o.version}),I.browserHistory.push(`/organizations/${s.slug}/releases/`)}catch{}}async function d(){try{await(0,V.aQ)(new Y.KU,{orgSlug:s.slug,projectSlug:r,releaseVersion:o.version}),i()}catch{}}function c(){const e=a.projects.slice(0,5),t=a.projects.length-e.length;return(0,f.BX)(n.Fragment,{children:[e.map((e=>(0,f.tZ)(J.Z,{project:e,avatarSize:18},e.slug))),t>0&&(0,f.tZ)("span",{children:(0,f.BX)(U.Z,{title:o.projects.slice(5).map((e=>e.slug)).join(", "),children:["+ ",(0,j.tn)("%s other project","%s other projects",t)]})})]})}function p(e){return(0,f.tZ)("h4",{children:(0,f.tZ)(W.Z,{children:e})})}function u(e){return(0,f.BX)(n.Fragment,{children:[e,(0,f.tZ)(se,{children:c()}),(0,j.t)("Are you sure you want to do this?")]})}function h(e){return e?{pathname:t.pathname.replace(encodeURIComponent(o.version),e).replace(o.version,e),query:{...t.query,activeRepo:void 0}}:""}function g(e){(0,ee.ec)({eventKey:"release_detail.pagination",eventName:"Release Detail: Pagination",organization_id:parseInt(s.id,10),direction:e})}const m=[(0,P.rF)(o)?{key:"restore",label:(0,j.t)("Restore"),onAction:()=>(0,X._)({onConfirm:d,header:p((0,j._N)("Restore Release [release]",{release:(0,C.ko)(o.version)})),message:u((0,j.tn)("You are restoring this release for the following project:","By restoring this release, you are also restoring it for the following projects:",a.projects.length)),cancelText:(0,j.t)("Nevermind"),confirmText:(0,j.t)("Restore")})}:{key:"archive",label:(0,j.t)("Archive"),onAction:()=>(0,X._)({onConfirm:l,header:p((0,j._N)("Archive Release [release]",{release:(0,C.ko)(o.version)})),message:u((0,j.tn)("You are archiving this release for the following project:","By archiving this release, you are also archiving it for the following projects:",a.projects.length)),cancelText:(0,j.t)("Nevermind"),confirmText:(0,j.t)("Archive")})}],{nextReleaseVersion:v,prevReleaseVersion:y,firstReleaseVersion:x,lastReleaseVersion:S}=o.currentProjectMeta;return(0,f.BX)(Q.ZP,{gap:1,children:[(0,f.tZ)(K.Z,{hasPrevious:!!y,hasNext:!!v,links:[h(x),h(y),h(v),h(S)],onOldestClick:()=>g("oldest"),onOlderClick:()=>g("older"),onNewerClick:()=>g("newer"),onNewestClick:()=>g("newest")}),(0,f.tZ)(G.Z,{items:m,triggerProps:{showChevron:!1,icon:(0,f.tZ)(R.YR,{}),"aria-label":(0,j.t)("Actions")},placement:"bottom right"})]})}te.displayName="ReleaseActions";const se=(0,o.Z)("div",{target:"ehxwv690"})("margin:",(0,b.Z)(2)," 0 ",(0,b.Z)(2)," ",(0,b.Z)(2),";display:grid;gap:",(0,b.Z)(.5),";img{border:none!important;box-shadow:none!important;}"),re=te,oe=e=>{let{location:t,organization:s,release:r,project:o,releaseMeta:a,refetchData:i}=e;const{version:l,url:c}=r,{commitCount:p,commitFilesChanged:u}=a,h=`/organizations/${s.slug}/releases/${encodeURIComponent(l)}/`,g=[{title:(0,j.t)("Overview"),to:""},{title:(0,f.BX)(n.Fragment,{children:[(0,j.t)("Commits")," ",(0,f.tZ)(de,{text:(0,C.Du)(p)})]}),to:"commits/"},{title:(0,f.BX)(n.Fragment,{children:[(0,j.t)("Files Changed"),(0,f.tZ)(de,{text:(0,C.Du)(u)})]}),to:"files-changed/"}];return(0,f.BX)(k.h4,{children:[(0,f.BX)(k.oB,{children:[(0,f.tZ)(z.Z,{crumbs:[{to:`/organizations/${s.slug}/releases/`,label:(0,j.t)("Releases"),preservePageFilters:!0},{label:(0,j.t)("Release Details")}]}),(0,f.tZ)(k.Dx,{children:(0,f.BX)(ne,{children:[(0,f.tZ)(F.Z,{project:o,avatarSize:28,hideName:!0}),(0,f.tZ)(ae,{version:l,anchor:!1,truncate:!0}),(0,f.tZ)(ie,{children:(0,f.tZ)(U.Z,{title:l,containerDisplayMode:"flex",children:(0,f.tZ)(H.Z,{value:l,children:(0,f.tZ)(R.vU,{})})})}),!!c&&(0,f.tZ)(ie,{children:(0,f.tZ)(U.Z,{title:c,children:(0,f.tZ)($.Z,{href:c,children:(0,f.tZ)(R.V$,{})})})})]})})]}),(0,f.tZ)(k.kP,{children:(0,f.tZ)(re,{organization:s,projectSlug:o.slug,release:r,releaseMeta:a,refetchData:i,location:t})}),(0,f.tZ)(n.Fragment,{children:(0,f.tZ)(le,{children:g.map((e=>{return(0,f.tZ)(M.Z,{to:(s=e.to,{pathname:h+s,query:d()(t.query,Object.values(E.nF))}),isActive:()=>(()=>{const e=g.filter((e=>e.to.length)).find((e=>t.pathname.endsWith(e.to)));return e?e.to:g[0].to})()===e.to,children:e.title},e.to);var s}))})})]})};oe.displayName="ReleaseHeader";const ne=(0,o.Z)("div",{target:"e1l92gzd4"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),ae=(0,o.Z)(q.Z,{target:"e1l92gzd3"})("margin-left:",(0,b.Z)(1),";"),ie=(0,o.Z)("span",{target:"e1l92gzd2"})("transition:color 0.3s ease-in-out;margin-left:",(0,b.Z)(1),";&,a{color:",(e=>e.theme.gray300),";display:flex;&:hover{cursor:pointer;color:",(e=>e.theme.textColor),";}}"),le=(0,o.Z)(B.Z,{target:"e1l92gzd1"})({name:"13jhhqe",styles:"margin-bottom:0;width:100%"}),de=(0,o.Z)(_.Z,{target:"e1l92gzd0"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){display:none;}"),ce=oe,pe=(0,n.createContext)({});class ue extends T.Z{constructor(){super(...arguments),(0,r.Z)(this,"shouldReload",!0)}getTitle(){const{params:e,organization:t,selection:s}=this.props,{release:r}=this.state,o=null==r?void 0:r.projects.find((e=>e.id===s.projects[0]));return(0,D.Z)((0,j.t)("Release %s",(0,C.ko)(e.release)),t.slug,!1,null==o?void 0:o.slug)}getDefaultState(){return{...super.getDefaultState(),deploys:[],sessions:null}}componentDidUpdate(e,t){const{organization:s,params:r,location:o}=this.props;e.params.release===r.release&&e.organization.slug===s.slug&&i()(this.pickLocationQuery(e.location),this.pickLocationQuery(o))||super.componentDidUpdate(e,t)}getEndpoints(){var e;const{organization:t,location:s,params:r,releaseMeta:o}=this.props,n=`/organizations/${t.slug}/releases/${encodeURIComponent(r.release)}/`,a=[["release",n,{query:{adoptionStages:1,...(0,m.fK)(this.pickLocationQuery(s))}}]];return o.deployCount>0&&a.push(["deploys",`${n}deploys/`]),a.push(["sessions",`/organizations/${t.slug}/sessions/`,{query:{project:s.query.project,environment:null!==(e=s.query.environment)&&void 0!==e?e:[],query:`release:"${r.release}"`,field:"sum(session)",statsPeriod:"90d",interval:"1d"}}]),a}pickLocationQuery(e){return d()(e.query,[...Object.values(E.nF),...Object.values(E.V)])}renderError(){return Object.values(this.state.errors).find((e=>404===(null==e?void 0:e.status)||403===(null==e?void 0:e.status)))?(0,f.tZ)(w.JH,{children:(0,f.tZ)(c.Z,{type:"error",showIcon:!0,children:(0,j.t)("This release may not be in your selected project.")})}):super.renderError(...arguments)}renderLoading(){return(0,f.tZ)(w.JH,{children:(0,f.tZ)(u.Z,{})})}renderBody(){const{organization:e,location:t,selection:s,releaseMeta:r}=this.props,{release:o,deploys:n,sessions:a,reloading:i}=this.state,l=null==o?void 0:o.projects.find((e=>e.id===s.projects[0])),d=(0,P.C8)(o);return l&&o?(0,f.tZ)(h.Z,{organization:e,children:(0,f.BX)(ge,{children:[(0,f.tZ)(ce,{location:t,organization:e,release:o,project:l,releaseMeta:r,refetchData:this.fetchData}),(0,f.tZ)(pe.Provider,{value:{release:o,project:l,deploys:n,releaseMeta:r,refetchData:this.fetchData,hasHealthData:(0,N.sA)(null==a?void 0:a.groups,A.kI.SESSIONS)>0,releaseBounds:d},children:this.props.children})]})}):i?(0,f.tZ)(u.Z,{}):null}}class he extends p.Z{constructor(){super(...arguments),(0,r.Z)(this,"shouldReload",!0)}getEndpoints(){const{organization:e,params:t}=this.props;return[["releaseMeta",`/organizations/${e.slug}/releases/${encodeURIComponent(t.release)}/meta/`]]}componentDidMount(){this.removeGlobalDateTimeFromUrl()}componentDidUpdate(e,t){const{organization:s,params:r}=this.props;this.removeGlobalDateTimeFromUrl(),e.params.release===r.release&&e.organization.slug===s.slug||super.componentDidUpdate(e,t)}removeGlobalDateTimeFromUrl(){const{router:e,location:t}=this.props,{start:s,end:r,statsPeriod:o,utc:n,...a}=t.query;(s||r||o||n)&&e.replace({...t,query:a})}renderError(){return Object.values(this.state.errors).find((e=>404===(null==e?void 0:e.status)))?(0,f.tZ)(w.JH,{children:(0,f.tZ)(c.Z,{type:"error",showIcon:!0,children:(0,j.t)("This release could not be found.")})}):super.renderError(...arguments)}isProjectMissingInUrl(){const e=this.props.location.query.project;return!e||"string"!=typeof e}renderLoading(){return(0,f.tZ)(w.JH,{children:(0,f.tZ)(u.Z,{})})}renderProjectsFooterMessage(){return(0,f.BX)(me,{children:[(0,f.tZ)(R.aU,{size:"xs"})," ",(0,j.t)("Only projects with this release are visible.")]})}renderBody(){const{organization:e,params:t,router:s}=this.props,{releaseMeta:r}=this.state;if(!r)return null;const{projects:o}=r;return this.isProjectMissingInUrl()?(0,f.tZ)(Z,{projects:o.map((e=>{let{id:t,slug:s}=e;return{id:String(t),slug:s}})),router:s,nextPath:{pathname:`/organizations/${e.slug}/releases/${encodeURIComponent(t.release)}/`},noProjectRedirectPath:`/organizations/${e.slug}/releases/`}):(0,f.tZ)(g.Z,{shouldForceProject:1===o.length,forceProject:1===o.length?{...o[0],id:String(o[0].id)}:void 0,specificProjectSlugs:o.map((e=>e.slug)),children:(0,f.tZ)(ue,{...this.props,releaseMeta:r})})}}const ge=(0,o.Z)(w.JH,{target:"eii7qn31"})({name:"1hcx8jb",styles:"padding:0"}),me=(0,o.Z)("div",{target:"eii7qn30"})("display:grid;align-items:center;grid-template-columns:min-content 1fr;gap:",(0,b.Z)(1),";"),ve=(0,O.Z)((0,L.Z)(he))},"./app/views/releases/utils/index.tsx":(e,t,s)=>{s.d(t,{C8:()=>D,EB:()=>O,G$:()=>j,G5:()=>S,Jl:()=>T,Mf:()=>Z,O7:()=>N,PS:()=>w,TB:()=>A,eY:()=>b,hf:()=>x,r:()=>R,rF:()=>C,zB:()=>E}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("../node_modules/lodash/pick.js"),o=s.n(r),n=s("../node_modules/lodash/round.js"),a=s.n(n),i=s("../node_modules/moment/moment.js"),l=s.n(i),d=s("./app/components/links/externalLink.tsx"),c=s("./app/components/organizations/pageFilters/parse.tsx"),p=s("./app/constants/pageFilters.tsx"),u=s("./app/data/platformCategories.tsx"),h=s("./app/locale.tsx"),g=s("./app/types/index.tsx"),m=s("./app/utils.tsx"),v=s("./app/utils/tokenizeSearch.tsx"),y=s("./app/views/issueList/utils.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x=95,S=e=>a()(e,e>60?0:3),Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const r=a()(e,e>t?s:0);return 100===r&&e<100?Math.floor(e*Math.pow(10,s))/Math.pow(10,s):r},E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(isNaN(e))return"―";if(e<1&&e>0)return"<1%";const r=Z(e,t,s).toLocaleString();return`${r}%`},R=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a()(t?Math.abs(e):e,3)},j=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return`${R(e,t).toLocaleString()}%`},w=(e,t,s)=>({pathname:`/organizations/${e}/issues/`,query:{project:t,statsPeriod:void 0,start:void 0,end:void 0,query:new v.MY([`firstRelease:${s}`]).formatString(),sort:y.qh.FREQ}}),b=function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{pathname:`/organizations/${e}/issues/`,query:{...r,project:t,query:new v.MY([`release:${s}`,"error.unhandled:true"]).formatString(),sort:y.qh.FREQ}}},A=function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{pathname:`/organizations/${e}/issues/`,query:{...r,project:t,query:new v.MY([`release:${s}`,"error.handled:true"]).formatString(),sort:y.qh.FREQ}}},C=e=>e.status===g.dE.Archived;function D(e){var t;const s=l()().subtract(90,"days"),{lastEvent:r,currentProjectMeta:o,dateCreated:n}=e||{},{sessionsUpperBound:a}=o||{};let i="normal",d=l()(n).startOf("minute"),c=l()(null!==(t=l()(a).isAfter(r)?a:r)&&void 0!==t?t:void 0).endOf("minute");return l()(d).isSame(c,"minute")&&(c=l()(c).add(1,"minutes")),d.isBefore(s)&&(d=s,i="clamped",(c.isBefore(d)||!(0,m.ri)(a)&&!(0,m.ri)(r))&&(c=l()(),i="ancient")),{type:i,releaseStart:d.utc().format(),releaseEnd:c.utc().format()}}function N(e){let{location:t,releaseBounds:s}=e;const r=(0,c.fK)(o()(t.query,[...Object.values(p.nF),...Object.values(p.V),"cursor"]),{allowAbsolutePageDatetime:!0,allowEmptyPeriod:!0});return Object.keys(r).some((e=>[p.nF.START,p.nF.END,p.nF.UTC,p.nF.PERIOD].includes(e)))||(r[p.nF.START]=s.releaseStart,r[p.nF.END]=s.releaseEnd),r}const L=(0,f.tZ)(d.Z,{href:"https://docs.sentry.io/product/releases/health/#adoption-stages"}),O={low_adoption:{name:(0,h.t)("Low Adoption"),tooltipTitle:(0,h._N)("This release has a low percentage of sessions compared to other releases in this project. [link:Learn more]",{link:L}),type:"warning"},adopted:{name:(0,h.t)("Adopted"),tooltipTitle:(0,h._N)("This release has a high percentage of sessions compared to other releases in this project. [link:Learn more]",{link:L}),type:"success"},replaced:{name:(0,h.t)("Replaced"),tooltipTitle:(0,h._N)("This release was previously Adopted, but now has a lower level of sessions compared to other releases in this project. [link:Learn more]",{link:L}),type:"default"}},T=e=>[...u.ai,...u.gv].includes(e)},"./app/views/releases/utils/sessionTerm.tsx":(e,t,s)=>{s.d(t,{RE:()=>d,U1:()=>n,_k:()=>o,w0:()=>a});var r=s("./app/locale.tsx");let o;!function(e){e.CRASHES="crashes",e.CRASHED="crashed",e.ABNORMAL="abnormal",e.CRASH_FREE="crashFree",e.CRASH_FREE_USERS="crash-free-users",e.CRASH_FREE_SESSIONS="crash-free-sessions",e.HEALTHY="healthy",e.ERRORED="errored",e.UNHANDLED="unhandled",e.STABILITY="stability",e.ADOPTION="adoption"}(o||(o={}));const n={[o.CRASHES]:(0,r.t)("Crashes"),[o.CRASHED]:(0,r.t)("Crashed"),[o.ABNORMAL]:(0,r.t)("Abnormal"),[o.CRASH_FREE_USERS]:(0,r.t)("Crash Free Users"),[o.CRASH_FREE_SESSIONS]:(0,r.t)("Crash Free Sessions"),[o.HEALTHY]:(0,r.t)("Healthy"),[o.ERRORED]:(0,r.t)("Errored"),[o.UNHANDLED]:(0,r.t)("Unhandled"),[o.ADOPTION]:(0,r.t)("Adoption"),duration:(0,r.t)("Session Duration"),otherCrashed:(0,r.t)("Other Crashed"),otherAbnormal:(0,r.t)("Other Abnormal"),otherErrored:(0,r.t)("Other Errored"),otherHealthy:(0,r.t)("Other Healthy"),otherCrashFreeUsers:(0,r.t)("Other Crash Free Users"),otherCrashFreeSessions:(0,r.t)("Other Crash Free Sessions"),otherReleases:(0,r.t)("Other Releases")},a={[o.CRASHES]:(0,r.t)("Number of sessions with a crashed state"),[o.CRASH_FREE]:(0,r.t)("Percentage of sessions/users who did not experience a crash."),[o.CRASH_FREE_USERS]:(0,r.t)("Percentage of unique users with non-crashed sessions"),[o.CRASH_FREE_SESSIONS]:(0,r.t)("Percentage of non-crashed sessions"),[o.STABILITY]:(0,r.t)("The percentage of crash free sessions."),[o.ADOPTION]:(0,r.t)("Adoption compares the sessions or users of a release with the total sessions or users for this project in the last 24 hours.")},i={[o.CRASHED]:(0,r.t)("The process was terminated due to an unhandled exception or a request to the server that ended with an error"),[o.CRASH_FREE_SESSIONS]:(0,r.t)("Percentage of non-crashed sessions"),[o.ABNORMAL]:(0,r.t)("An unknown session exit. Like due to loss of power or killed by the operating system"),[o.HEALTHY]:(0,r.t)("A session without errors"),[o.ERRORED]:(0,r.t)("A session with errors"),[o.UNHANDLED]:(0,r.t)("Not handled by user code")},l={crashed:(0,r.t)("The application crashed with a hard crash (eg. segfault)"),[o.ABNORMAL]:(0,r.t)("The application did not properly end the session, for example, due to force-quit"),[o.HEALTHY]:(0,r.t)("The application exited normally and did not observe any errors"),[o.ERRORED]:(0,r.t)("The application exited normally but observed error events while running"),[o.UNHANDLED]:(0,r.t)("The application crashed with a hard crash")};function d(e,t){return function(e){switch("react-native"===e||"java-spring"===e||"apple-ios"===e||"dotnet-aspnetcore"===e?e:null==e?void 0:e.split("-")[0]){case"dotnet":case"java":return{...a,...i};case"java-spring":case"dotnet-aspnetcore":return{...a,...i,[o.CRASHES]:(0,r.t)("A request that resulted in an unhandled exception and hence a Server Error response")};case"android":case"cordova":case"react-native":case"flutter":return{...a,...i,[o.CRASHED]:(0,r.t)("An unhandled exception that resulted in the application crashing")};case"apple":return{...a,...i,[o.CRASHED]:(0,r.t)("An error that resulted in the application crashing")};case"node":case"javascript":return{...a,[o.CRASHED]:(0,r.t)("During the session an unhandled global error/promise rejection occurred."),[o.ABNORMAL]:(0,r.t)("Non applicable for Javascript."),[o.HEALTHY]:(0,r.t)("No errors were captured during session life-time."),[o.ERRORED]:(0,r.t)("During the session at least one handled error occurred."),[o.UNHANDLED]:"An error was captured by the global 'onerror' or 'onunhandledrejection' handler."};case"apple-ios":case"minidump":case"native":return{...a,...l};case"rust":return{...a,...l,[o.CRASHED]:(0,r.t)("The application had an unrecoverable error (a panic)")};default:return{...a,[o.CRASHED]:(0,r.t)("Number of users who experienced an unhandled error"),[o.ABNORMAL]:(0,r.t)("An unknown session exit"),[o.HEALTHY]:i.healthy,[o.ERRORED]:i.errored,[o.UNHANDLED]:i.unhandled}}}(t)[e]}}}]);
//# sourceMappingURL=../sourcemaps/app_views_releases_detail_index_tsx.00b662d8ece8ed9dfbd1c49890cdcc90.js.map