"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_customMeasurements_customMeasurementsProvider_tsx-app_utils_discover_charts_tsx-app-d2163e"],{"./app/utils/customMeasurements/customMeasurementsContext.tsx":(e,t,s)=>{s.d(t,{z:()=>n});const n=(0,s("../node_modules/react/index.js").createContext)(void 0)},"./app/utils/customMeasurements/customMeasurementsProvider.tsx":(e,t,s)=>{s.d(t,{L:()=>c}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js");var n=s("../node_modules/react/index.js"),r=s("./app/actionCreators/indicator.tsx"),o=s("./app/components/organizations/pageFilters/parse.tsx"),i=s("./app/locale.tsx"),a=s("./app/utils/handleXhrErrorResponse.tsx"),l=s("./app/utils/useApi.tsx"),d=s("./app/utils/customMeasurements/customMeasurementsContext.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{children:t,organization:s,selection:c}=e;const m=(0,l.Z)(),[p,g]=(0,n.useState)({customMeasurements:{}});return(0,n.useEffect)((()=>{let e=!1;return(s.features.includes("dashboards-mep")||s.features.includes("mep-rollout-flag"))&&function(e,t,s){const n=null!=s&&s.datetime?{...(0,o.fK)(s.datetime)}:{};return null!=s&&s.projects&&(n.project=s.projects.map(String)),e.requestPromise(`/organizations/${t.slug}/measurements-meta/`,{method:"GET",query:n})}(m,s,c).then((t=>{if(e)return;const s=Object.keys(t).reduce(((e,s)=>(e[s]={key:s,name:s,functions:t[s].functions},e)),{});g({customMeasurements:s})})).catch((t=>{var s;if(e)return;const n=null!==(s=null==t?void 0:t.responseJSON)&&void 0!==s?s:(0,i.t)("Unable to fetch custom performance metrics");(0,r.Iw)(n),(0,a.Z)(n)(t)})),()=>{e=!0}}),[c,m,s]),(0,u.tZ)(d.z.Provider,{value:p,children:"function"==typeof t?t(p):t})}c.displayName="CustomMeasurementsProvider"},"./app/utils/discover/charts.tsx":(e,t,s)=>{s.d(t,{CX:()=>i,Xp:()=>c,gu:()=>l,x1:()=>d}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("./app/locale.tsx"),r=s("./app/utils.tsx"),o=s("./app/utils/formatters.tsx");function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,r.ri)(e)?a(e,t):"—"}function a(e,t){if(!(0,r.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,o.rl)(e,2);case"duration":return(0,o.g9)(e/1e3,2,!0);case"size":return(0,r.F)(e);default:return e.toString()}}function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return d(e,t,s,n)}function d(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return s?(0,o.Du)(e):e.toLocaleString();case"percentage":return(0,o.rl)(e,0);case"duration":return u(e,n);case"size":return(0,r.F)(e,0);default:return e.toString()}}function u(e,t){var s;if(null!==(s=t)&&void 0!==s||(t=m(e)),0===e)return"0";switch(t){case o.ps:{const t=(e/o.ps).toFixed(0);return(0,n.t)("%swk",t)}case o.x4:{const t=(e/o.x4).toFixed(0);return(0,n.t)("%sd",t)}case o.kr:{const t=(e/o.kr).toFixed(0);return(0,n.t)("%shr",t)}case o.EB:{const t=(e/o.EB).toFixed(0);return(0,n.t)("%smin",t)}case o.sh:{const t=(e/o.sh).toFixed(0);return(0,n.t)("%ss",t)}default:const t=e.toFixed(0);return(0,n.t)("%sms",t)}}function c(e,t){let s=0;const n=function(e,t){var s;let n;if(null!==(s=e[0])&&void 0!==s&&s.data){var r;let s,o=e[0];e.forEach(((n,r)=>{var i;let{seriesName:a,data:l}=n;var d;!1!==(null==t||null===(i=t.selected)||void 0===i?void 0:i[a])&&l.length&&(o=e[r],null!==(d=s)&&void 0!==d||(s=e[r]))})),null!==(r=s)&&void 0!==r&&r.data&&(n={max:Math.max(...s.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...o.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return n}(e,t);if(n){const e=(n.max+n.min)/2;s=m((n.max-n.min)/5),(e/s).toFixed(0).length>6&&(s=m(e))}return s}function m(e){return e>=o.ps?o.ps:e>=o.x4?o.x4:e>=o.kr?o.kr:e>=o.EB?o.EB:e>=o.sh?o.sh:1}},"./app/utils/discover/genericDiscoverQuery.tsx":(e,t,s)=>{s.d(t,{AA:()=>p,ZP:()=>g,o:()=>u});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react/index.js")),o=s("./app/locale.tsx"),i=s("./app/utils/discover/eventView.tsx"),a=s("./app/utils/performance/contexts/performanceEventViewContext.tsx"),l=s("./app/views/organizationContext.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u{constructor(e,t){(0,n.Z)(this,"message",void 0),(0,n.Z)(this,"originalError",void 0),this.message=e,this.originalError=t}getOriginalError(){return this.originalError}}class c extends r.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{isLoading:!0,tableFetchID:void 0,error:null,tableData:null,pageLinks:null}),(0,n.Z)(this,"_shouldRefetchData",(e=>{const t=this.getPayload(this.props),s=this.getPayload(e);return!(0,i.ze)(t,s)||e.limit!==this.props.limit||e.route!==this.props.route||e.cursor!==this.props.cursor})),(0,n.Z)(this,"_parseError",(e=>{var t;if(this.props.parseError)return this.props.parseError(e);if(!e)return null;const s=null===(t=e.responseJSON)||void 0===t?void 0:t.detail;if("string"==typeof s)return new u(s,e);const n=null==s?void 0:s.message;return new u("string"==typeof n?n:(0,o.t)("An unknown error occurred."),e)})),(0,n.Z)(this,"fetchData",(async()=>{const{api:e,queryBatching:t,beforeFetch:s,afterFetch:n,didFetch:r,eventView:o,orgSlug:i,route:a,setError:l}=this.props;if(!o.isValid())return;const d=`/organizations/${i}/${a}/`,u=Symbol("tableFetchID"),c=this.getPayload(this.props);this.setState({isLoading:!0,tableFetchID:u}),null==l||l(void 0),null==s||s(e),e.clear();try{const[s,,o]=await p(e,d,c,t);if(this.state.tableFetchID!==u)return;const i=n?n(s,this.props):s;null==r||r(i),this.setState((e=>{var t;return{isLoading:!1,tableFetchID:void 0,error:null,pageLinks:null!==(t=null==o?void 0:o.getResponseHeader("Link"))&&void 0!==t?t:e.pageLinks,tableData:i}}))}catch(e){const t=this._parseError(e);this.setState({isLoading:!1,tableFetchID:void 0,error:t,tableData:null}),l&&l(null!=t?t:void 0)}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){const t=this._shouldRefetchData(e),s=!1===e.eventView.isValid()&&this.props.eventView.isValid(),n=!!this.props.shouldRefetchData&&this.props.shouldRefetchData(e,this.props);(t||s||n)&&this.fetchData()}getPayload(e){var t;const{cursor:s,limit:n,noPagination:r,referrer:o}=e,i=this.props.getRequestPayload?this.props.getRequestPayload(e):e.eventView.getEventsAPIPayload(e.location,e.forceAppendRawQueryString);return s&&(i.cursor=s),n&&(i.per_page=n),r&&(i.noPagination=r),o&&(i.referrer=o),Object.assign(i,null!==(t=e.queryExtras)&&void 0!==t?t:{}),i}render(){const{isLoading:e,error:t,tableData:s,pageLinks:n}=this.state,r={isLoading:e,error:t,tableData:s,pageLinks:n},o=this.props.children;return null==o?void 0:o(r)}}function m(e){var t,s,n,o;const i=null===(t=(0,r.useContext)(l.g))||void 0===t?void 0:t.slug,u=null===(s=(0,r.useContext)(a.uL))||void 0===s?void 0:s.eventView,m=null!==(n=e.orgSlug)&&void 0!==n?n:i,p=null!==(o=e.eventView)&&void 0!==o?o:u;if(void 0===m||void 0===p)throw new Error("GenericDiscoverQuery requires both an orgSlug and eventView");const g={...e,orgSlug:m,eventView:p};return(0,d.tZ)(c,{...g})}function p(e,t,s,n){return null!=n&&n.batchRequest?n.batchRequest(e,t,{query:s,includeAllArgs:!0}):e.requestPromise(t,{method:"GET",includeAllArgs:!0,query:{...s}})}c.displayName="_GenericDiscoverQuery",m.displayName="GenericDiscoverQuery";const g=m},"./app/utils/performance/contexts/metricsEnhancedSetting.tsx":(e,t,s)=>{s.d(t,{Ar:()=>h,Eg:()=>b,gp:()=>f,kP:()=>x,nP:()=>m,nl:()=>p,oR:()=>g,tm:()=>v}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.string.replace.js");var n=s("../node_modules/react/index.js"),r=s("../node_modules/react-router/es/index.js"),o=(s("./app/utils/localStorage.tsx"),s("./app/utils/queryString.tsx")),i=s("./app/utils/useOrganization.tsx"),a=s("./app/utils/performance/contexts/utils.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[d,u,c]=(0,a.n)({name:"MetricsEnhancedSettingContext"}),m=c.Consumer;let p,g;!function(e){e.unset="unset",e.metrics="metrics",e.transactions="transactions"}(p||(p={})),function(e){e.auto="auto",e.metricsOnly="metricsOnly",e.transactionsOnly="transactionsOnly"}(g||(g={}));const h="metricSetting",v="metricSearchSetting";function f(e){const t=function(e){return e.features.includes("performance-use-metrics")}(e),s=e.features.includes("performance-transaction-name-only-search"),n=e.features.includes("server-side-sampling")&&e.features.includes("mep-rollout-flag");return t||s||n}const x=e=>{var t;let{children:s,location:a,_hasMEPState:u,forceTransactions:c}=e;const m=f((0,i.Z)()),v=[g.metricsOnly,g.transactionsOnly],x=a?(0,o.ro)(a.query[h]):g.metricsOnly;let b=g.metricsOnly;c&&(b=g.transactionsOnly);const y=null!==(t=v.find((e=>e===x)))&&void 0!==t?t:b,w=void 0!==u,[C,S]=(0,n.useReducer)(((e,t)=>t),y),Z=(0,n.useCallback)((e=>{a&&(r.browserHistory.replace({...a,query:{...a.query,[h]:e}}),S(e))}),[a,S]),[E,k]=(0,n.useReducer)(((e,t)=>t),p.unset),D=w?u:C,j=m&&D===g.auto,P=m&&D===g.metricsOnly,_=m&&D===g.transactionsOnly,F=`${D}`;return(0,l.tZ)(d,{value:{autoSampleState:E,metricSettingState:D,shouldQueryProvideMEPAutoParams:j,shouldQueryProvideMEPMetricParams:P,shouldQueryProvideMEPTransactionParams:_,memoizationKey:F,setMetricSettingState:Z,setAutoSampleState:k},children:s})};x.displayName="MEPSettingProvider";const b=u},"./app/utils/performance/contexts/performanceEventViewContext.tsx":(e,t,s)=>{s.d(t,{bq:()=>r,uL:()=>i}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("./app/utils/performance/contexts/utils.tsx");const[r,o,i]=(0,n.n)({name:"PerformanceEventViewContext"})},"./app/utils/performance/contexts/utils.tsx":(e,t,s)=>{s.d(t,{n:()=>r}),s("../node_modules/core-js/modules/es.error.cause.js");var n=s("../node_modules/react/index.js");function r(e){const{strict:t=!0,errorMessage:s=`useContext for "${e.name}" must be inside a Provider with a value`,name:r}=e,o=(0,n.createContext)(void 0);return o.displayName=r,[o.Provider,function(){const e=(0,n.useContext)(o);if(!e&&t)throw new Error(s);return e},o]}},"./app/utils/userselect.tsx":(e,t,s)=>{s.d(t,{l:()=>n});const n=e=>{const t={userSelect:document.body.style.userSelect,MozUserSelect:document.body.style.MozUserSelect,msUserSelect:document.body.style.msUserSelect,webkitUserSelect:document.body.style.webkitUserSelect};return document.body.style.userSelect=e.userSelect||"",document.body.style.MozUserSelect=e.MozUserSelect||"",document.body.style.msUserSelect=e.msUserSelect||"",document.body.style.webkitUserSelect=e.webkitUserSelect||"",t}},"./app/views/eventsV2/table/columnEditCollection.tsx":(e,t,s)=>{s.d(t,{Z:()=>z});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-dom/profiling.js"),a=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=s("./app/components/arithmeticInput/parser.tsx"),d=s("./app/components/button.tsx"),u=s("./app/components/buttonBar.tsx"),c=s("./app/components/charts/styles.tsx"),m=s("./app/components/input.tsx"),p=s("./app/components/performance/waterfall/utils.tsx"),g=s("./app/icons/index.tsx"),h=s("./app/locale.tsx"),v=s("./app/styles/space.tsx"),f=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),x=s("./app/utils/discover/fields.tsx"),b=s("./app/utils/theme.tsx");function y(e,t){const s="nativeEvent"in e?e.nativeEvent:e;return window.TouchEvent&&s instanceof TouchEvent?s.targetTouches[0][t]:s instanceof MouseEvent?s[t]:0}var w=s("./app/utils/userselect.tsx"),C=s("./app/views/dashboardsV2/types.tsx"),S=s("./app/views/dashboardsV2/widgetBuilder/issueWidget/fields.tsx"),Z=s("./app/views/dashboardsV2/widgetBuilder/releaseWidget/fields.tsx"),E=s("./app/views/eventsV2/table/queryField.tsx"),k=s("./app/views/eventsV2/table/types.tsx"),D=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const j="draggable-item";var P;!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"}(P||(P={}));class _ extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{isDragging:!1,draggingIndex:void 0,draggingTargetIndex:void 0,draggingGrabbedOffset:void 0,error:new Map,left:void 0,top:void 0}),(0,n.Z)(this,"previousUserSelect",null),(0,n.Z)(this,"portal",null),(0,n.Z)(this,"dragGhostRef",(0,o.createRef)()),(0,n.Z)(this,"handleAddColumn",(()=>{this.props.onChange([...this.props.columns,{kind:"field",field:""}])})),(0,n.Z)(this,"handleAddEquation",(()=>{const{organization:e}=this.props,t={kind:k.L.EQUATION,field:""};(0,f.Z)("discover_v2.add_equation",{organization:e}),this.props.onChange([...this.props.columns,t])})),(0,n.Z)(this,"handleUpdateColumn",((e,t)=>{const s=[...this.props.columns];"equation"===t.kind?this.setState((s=>{const n=new Map(s.error);return n.set(e,(0,l.W9)(t.field).error),{...s,error:n}})):this.updateEquationFields(s,e,t),s.splice(e,1,t),this.props.onChange(s)})),(0,n.Z)(this,"updateEquationFields",((e,t,s)=>{const n=e[t],r=(0,x.sN)(e[t]),o=(0,x.sN)(s);if((0,x.el)(s)&&!(0,x.bv)(e,n))for(let t=0;t<e.length;t++){const s=e[t];if("equation"===s.kind){const i=(0,l.W9)(s.field);let a="",d=0;const u="function"===n.kind?i.tc.functions:i.tc.fields;for(const e of u)e.term===r&&d!==e.location.end.offset&&(a+=s.field.substring(d,e.location.start.offset)+o,d=e.location.end.offset);a+=s.field.substring(d),e[t]={kind:"equation",field:a,alias:e[t].alias}}}})),(0,n.Z)(this,"onDragMove",(e=>{var t,s;const{isDragging:n,draggingTargetIndex:r,draggingGrabbedOffset:o}=this.state;if(!n||!["mousemove","touchmove"].includes(e.type))return;e.preventDefault(),e.stopPropagation();const i=y(e,"pageX"),a=y(e,"pageY"),l=null!==(t=null==o?void 0:o.x)&&void 0!==t?t:0,d=null!==(s=null==o?void 0:o.y)&&void 0!==s?s:0;if(this.dragGhostRef.current){const e=this.dragGhostRef.current;e.style.left=i-l+"px",e.style.top=a-d+"px"}const u=document.querySelectorAll(`.${j}`),c=Array.from(u).findIndex((e=>{const t=e.getBoundingClientRect(),s=a,n=window.scrollY+t.top,r=window.scrollY+t.top+t.height;return s>=n&&s<=r}));c>=0&&c!==r&&this.setState({draggingTargetIndex:c})})),(0,n.Z)(this,"isFixedIssueColumn",(e=>{const{source:t,columns:s}=this.props,n=s[e];return s.filter((e=>"field"===e.kind&&e.field===S.Sh.ISSUE)).length<=1&&t===C.l9.ISSUE&&"field"===n.kind&&n.field===S.Sh.ISSUE})),(0,n.Z)(this,"isRemainingReleaseHealthAggregate",(e=>{const{source:t,columns:s}=this.props,n=s[e];return s.filter((e=>e.kind===k.L.FUNCTION)).length<=1&&t===C.l9.RELEASE&&n.kind===k.L.FUNCTION})),(0,n.Z)(this,"onDragEnd",(e=>{if(!this.state.isDragging||!["mouseup","touchend"].includes(e.type))return;const t=this.state.draggingIndex,s=this.state.draggingTargetIndex;if("number"!=typeof t||"number"!=typeof s)return;this.cleanUpListeners(),this.previousUserSelect&&((0,w.l)(this.previousUserSelect),this.previousUserSelect=null);const n=[...this.props.columns],r=n.splice(t,1);n.splice(s,0,r[0]),this.checkColumnErrors(n),this.props.onChange(n),this.setState({isDragging:!1,left:void 0,top:void 0,draggingIndex:void 0,draggingTargetIndex:void 0,draggingGrabbedOffset:void 0})}))}componentDidMount(){if(!this.portal){const e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.zIndex=String(b.ZP.zIndex.modal),this.portal=e,document.body.appendChild(this.portal)}this.checkColumnErrors(this.props.columns)}componentWillUnmount(){this.portal&&document.body.removeChild(this.portal),this.cleanUpListeners()}checkColumnErrors(e){const t=new Map;for(let s=0;s<e.length;s+=1){const n=e[s];if("equation"===n.kind){const e=(0,l.W9)(n.field);e.error&&t.set(s,e.error)}}this.setState({error:t})}keyForColumn(e,t){return"function"===e.kind?[...e.function,t].join(":"):[...e.field,t].join(":")}cleanUpListeners(){this.state.isDragging&&(window.removeEventListener("mousemove",this.onDragMove),window.removeEventListener("touchmove",this.onDragMove),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd))}removeColumn(e){const t=[...this.props.columns];t.splice(e,1),this.checkColumnErrors(t),this.props.onChange(t)}startDrag(e,t){if(this.state.isDragging||!["mousedown","touchstart"].includes(e.type))return;e.preventDefault(),e.stopPropagation();const s=y(e,"pageY"),n=y(e,"pageX"),r=Array.from(document.querySelectorAll(`.${j}`)).find((t=>t.contains(e.currentTarget))),{x:o,y:i}=(0,p.R3)(r),a={x:n-o+4,y:s-i+4};this.previousUserSelect=(0,w.l)({userSelect:"none",MozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none"}),window.addEventListener("mousemove",this.onDragMove),window.addEventListener("touchmove",this.onDragMove),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),this.setState({isDragging:!0,draggingIndex:t,draggingTargetIndex:t,draggingGrabbedOffset:a,top:s,left:n})}renderGhost(e){var t,s;let{gridColumns:n,singleColumn:r}=e;const{isDragging:o,draggingIndex:a,draggingGrabbedOffset:l}=this.state,d=a;if("number"!=typeof d||!o||!this.portal)return null;const u=null!==(t=null==l?void 0:l.x)&&void 0!==t?t:0,c=null!==(s=null==l?void 0:l.y)&&void 0!==s?s:0,m=Number(this.state.top)-c,p=Number(this.state.left)-u,g=this.props.columns[d],h={top:`${m}px`,left:`${p}px`},v=(0,D.tZ)(A,{ref:this.dragGhostRef,style:h,children:this.renderItem(g,d,{singleColumn:r,isGhost:!0,gridColumns:n})});return(0,i.createPortal)(v,this.portal)}renderItem(e,t,s){var n;let{singleColumn:r=!1,canDelete:i=!0,canDrag:a=!0,isGhost:l=!1,gridColumns:d=2,disabled:u=!1}=s;const{columns:c,fieldOptions:m,filterAggregateParameters:p,filterPrimaryOptions:v,noFieldsMessage:f,showAliasField:x}=this.props,{isDragging:b,draggingTargetIndex:y,draggingIndex:w}=this.state;let C=null;if(b&&!1===l&&y===t&&(C=(0,D.tZ)(O,{className:j},`placeholder:${this.keyForColumn(e,l)}`)),b&&!1===l&&w===t)return C;const S=Number(y)<=Number(w)?P.TOP:P.BOTTOM;return(0,D.BX)(o.Fragment,{children:[S===P.TOP&&C,(0,D.BX)(M,{showAliasField:x,singleColumn:r,className:l?"":j,children:[a?(0,D.tZ)(R,{"aria-label":(0,h.t)("Drag to reorder"),onMouseDown:e=>this.startDrag(e,t),onTouchStart:e=>this.startDrag(e,t),icon:(0,D.tZ)(g.LS,{size:"xs"}),size:"zero",borderless:!0}):r&&x?null:(0,D.tZ)("span",{}),(0,D.tZ)(E.q,{fieldOptions:m,gridColumns:d,fieldValue:e,onChange:e=>this.handleUpdateColumn(t,e),error:this.state.error.get(t),takeFocus:t===this.props.columns.length-1,otherColumns:c,shouldRenderTag:!0,disabled:u,filterPrimaryOptions:v,filterAggregateParameters:p,noFieldsMessage:f,skipParameterPlaceholder:x}),x&&(0,D.tZ)(q,{singleColumn:r,children:(0,D.tZ)(T,{name:"alias",placeholder:(0,h.t)("Alias"),value:null!==(n=e.alias)&&void 0!==n?n:"",onChange:s=>{this.handleUpdateColumn(t,{...e,alias:s.target.value})}})}),i||"equation"===e.kind?x?(0,D.tZ)(L,{"data-test-id":`remove-column-${t}`,"aria-label":(0,h.t)("Remove column"),title:(0,h.t)("Remove column"),onClick:()=>this.removeColumn(t),icon:(0,D.tZ)(g.Fz,{}),borderless:!0}):(0,D.tZ)(L,{"data-test-id":`remove-column-${t}`,"aria-label":(0,h.t)("Remove column"),onClick:()=>this.removeColumn(t),icon:(0,D.tZ)(g.Fz,{}),borderless:!0}):r&&x?null:(0,D.tZ)("span",{})]}),S===P.BOTTOM&&C]},`${t}:${this.keyForColumn(e,l)}`)}render(){const{className:e,columns:t,showAliasField:s,source:n}=this.props,r=t.filter((e=>"equation"!==e.kind)).length>1,o=t.length>1,i=t.length<20,a=i?void 0:(0,h.t)("Sorry, you've reached the maximum number of columns (20). Delete columns to add more."),l=1===t.length,u=n===C.l9.ISSUE?1:Math.max(...t.map((e=>{var t;return"function"!==e.kind?2:2===(null!==(t=x.lx[e.function[0]])&&void 0!==t?t:Z.Am[e.function[0]]).parameters.length?3:2})));return(0,D.BX)("div",{className:e,children:[this.renderGhost({gridColumns:u,singleColumn:l}),!s&&n!==C.l9.ISSUE&&(0,D.tZ)(M,{showAliasField:s,singleColumn:l,children:(0,D.BX)(I,{gridColumns:u,children:[(0,D.tZ)(U,{children:(0,h.t)("Tag / Field / Function")}),(0,D.tZ)(U,{children:(0,h.t)("Field Parameter")})]})}),t.map(((e,t)=>this.isFixedIssueColumn(t)?this.renderItem(e,t,{singleColumn:l,canDelete:!1,canDrag:o,gridColumns:u,disabled:!0}):this.isRemainingReleaseHealthAggregate(t)?this.renderItem(e,t,{singleColumn:l,canDelete:!1,canDrag:o,gridColumns:u}):this.renderItem(e,t,{singleColumn:l,canDelete:r,canDrag:o,gridColumns:u}))),(0,D.tZ)(M,{showAliasField:s,singleColumn:l,children:(0,D.BX)(F,{gap:1,showAliasField:s,children:[(0,D.tZ)(d.ZP,{size:"sm","aria-label":(0,h.t)("Add a Column"),onClick:this.handleAddColumn,title:a,disabled:!i,icon:(0,D.tZ)(g.N_,{isCircled:!0,size:"xs"}),children:(0,h.t)("Add a Column")}),n!==C.l9.ISSUE&&n!==C.l9.RELEASE&&(0,D.tZ)(d.ZP,{size:"sm","aria-label":(0,h.t)("Add an Equation"),onClick:this.handleAddEquation,title:a,disabled:!i,icon:(0,D.tZ)(g.N_,{isCircled:!0,size:"xs"}),children:(0,h.t)("Add an Equation")})]})})]})}}_.displayName="ColumnEditCollection";const F=(0,r.Z)(u.ZP,{target:"ev0fm799"})("grid-column:",(e=>e.showAliasField?"1/-1":" 2/3"),";justify-content:flex-start;"),M=(0,r.Z)("div",{target:"ev0fm798"})("display:grid;grid-template-columns:",(0,v.Z)(3)," 1fr 40px;justify-content:center;align-items:center;width:100%;touch-action:none;padding-bottom:",(0,v.Z)(1),";",(e=>e.showAliasField&&(0,a.iv)("align-items:flex-start;grid-template-columns:",e.singleColumn?"1fr":`${(0,v.Z)(3)} 1fr 40px`,";@media (min-width: ",e.theme.breakpoints.small,"){grid-template-columns:",e.singleColumn?`1fr calc(200px + ${(0,v.Z)(1)})`:`${(0,v.Z)(3)} 1fr calc(200px + ${(0,v.Z)(1)}) 40px`,";}","")),";"),A=(0,r.Z)("div",{target:"ev0fm797"})("background:",(e=>e.theme.background),";display:block;position:absolute;padding:",4,"px;border-radius:",(e=>e.theme.borderRadius),";box-shadow:0 0 15px rgba(0, 0, 0, 0.15);width:710px;opacity:0.8;cursor:grabbing;padding-right:",(0,v.Z)(2),";&>",M,"{padding-bottom:0;}& svg{cursor:grabbing;}"),O=(0,r.Z)("div",{target:"ev0fm796"})("margin:0 ",(0,v.Z)(3)," ",(0,v.Z)(1)," ",(0,v.Z)(3),";border:2px dashed ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";height:41px;"),I=(0,r.Z)("div",{target:"ev0fm795"})("grid-column:2/3;display:grid;grid-template-columns:repeat(",(e=>e.gridColumns),", 1fr);grid-column-gap:",(0,v.Z)(1),";"),U=(0,r.Z)(c.OT,{target:"ev0fm794"})({name:"ti75j2",styles:"margin:0"}),T=(0,r.Z)(m.Z,{target:"ev0fm793"})({name:"1bzx5v3",styles:"height:40px;min-width:50px"}),q=(0,r.Z)("div",{target:"ev0fm792"})("margin-top:",(0,v.Z)(1),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){margin-top:0;margin-left:",(0,v.Z)(1),";}@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-row:2/2;grid-column:",(e=>e.singleColumn?"1/-1":"2/2"),";}"),L=(0,r.Z)(d.ZP,{target:"ev0fm791"})("margin-left:",(0,v.Z)(1),";height:40px;"),R=(0,r.Z)(d.ZP,{target:"ev0fm790"})({name:"1k18kha",styles:"height:40px"}),z=_}}]);
//# sourceMappingURL=../sourcemaps/app_utils_customMeasurements_customMeasurementsProvider_tsx-app_utils_discover_charts_tsx-app-d2163e.d6bac2fbd2fcc2d8b8f0bc3f6322d650.js.map