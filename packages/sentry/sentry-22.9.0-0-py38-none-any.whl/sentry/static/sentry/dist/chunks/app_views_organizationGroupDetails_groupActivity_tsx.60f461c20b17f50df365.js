"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupActivity_tsx"],{"./app/components/commitLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>u}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("./app/components/button.tsx"),n=s("./app/components/links/externalLink.tsx"),i=s("./app/icons/index.tsx"),o=s("./app/locale.tsx"),a=s("./app/utils.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=[{icon:(0,d.tZ)(i.Uv,{size:"xs"}),providerIds:["github","integrations:github","integrations:github_enterprise"],commitUrl:e=>{let{baseUrl:t,commitId:s}=e;return`${t}/commit/${s}`}},{icon:(0,d.tZ)(i.Ub,{size:"xs"}),providerIds:["bitbucket","integrations:bitbucket"],commitUrl:e=>{let{baseUrl:t,commitId:s}=e;return`${t}/commits/${s}`}},{icon:(0,d.tZ)(i.mT,{size:"xs"}),providerIds:["visualstudio","integrations:vsts"],commitUrl:e=>{let{baseUrl:t,commitId:s}=e;return`${t}/commit/${s}`}},{icon:(0,d.tZ)(i.Et,{size:"xs"}),providerIds:["gitlab","integrations:gitlab"],commitUrl:e=>{let{baseUrl:t,commitId:s}=e;return`${t}/commit/${s}`}}],u=function(e){let{inline:t,commitId:s,repository:i,showIcon:u=!0}=e;if(!s||!i)return(0,d.tZ)("span",{children:(0,o.t)("Unknown Commit")});const c=(0,a.e4)(s),p=l.find((e=>!!i.provider&&e.providerIds.includes(i.provider.id)));if(void 0===p)return(0,d.tZ)("span",{children:c});const m=i.url&&p.commitUrl({commitId:s,baseUrl:i.url});return t?(0,d.BX)(n.Z,{href:m,children:[u?p.icon:null," "+c]}):(0,d.tZ)(r.ZP,{external:!0,href:m,size:"sm",icon:u?p.icon:null,children:c})}},"./app/components/links/linkWithConfirmation.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./app/components/confirm.tsx"),n=s("./app/components/links/anchor.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{className:t,disabled:s,title:o,children:a,...d}=e;return(0,i.tZ)(r.Z,{...d,disabled:s,children:(0,i.tZ)(n.Z,{href:"#",className:t,disabled:s,title:o,children:a})})}o.displayName="LinkWithConfirmation";const a=o},"./app/components/pullRequestLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/es.array.includes.js"),s("./app/components/button.tsx")),i=s("./app/components/links/externalLink.tsx"),o=s("./app/icons/index.tsx"),a=s("./app/styles/space.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){if(!e.provider)return null;const{id:t}=e.provider;switch(t.includes(":")?t.split(":").pop():t){case"github":return(0,d.tZ)(o.Uv,{size:"xs","data-test-id":"pull-request-github"});case"gitlab":return(0,d.tZ)(o.Et,{size:"xs","data-test-id":"pull-request-gitlab"});case"bitbucket":return(0,d.tZ)(o.Ub,{size:"xs"});default:return null}}const u=(0,r.Z)(i.Z,{target:"e10ywx4z0"})("display:inline-flex;align-items:center;gap:",(0,a.Z)(.5),";"),c=function(e){let{pullRequest:t,repository:s,inline:r}=e;const i=`${s.name} #${t.id}: ${t.title}`;return t.externalUrl?r?(0,d.BX)(u,{href:t.externalUrl,children:[l(s),i]}):(0,d.tZ)(n.ZP,{external:!0,href:t.externalUrl,size:"sm",icon:l(s),children:i}):(0,d.tZ)("span",{children:i})}},"./app/components/reprocessedBox.tsx":(e,t,s)=>{s.d(t,{Z:()=>h});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/components/events/styles.tsx"),a=s("./app/components/links/link.tsx"),d=s("./app/icons/index.tsx"),l=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),c=s("./app/utils/localStorage.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends i.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{isBannerHidden:"true"===c.Z.getItem(this.getBannerUniqueId())}),(0,r.Z)(this,"handleBannerDismiss",(()=>{c.Z.setItem(this.getBannerUniqueId(),"true"),this.setState({isBannerHidden:!0})}))}getBannerUniqueId(){const{reprocessActivity:e}=this.props,{id:t}=e;return`reprocessed-activity-${t}-banner-dismissed`}renderMessage(){const{orgSlug:e,reprocessActivity:t,groupCount:s,groupId:r}=this.props,{data:n}=t,{eventCount:i,oldGroupId:o,newGroupId:d}=n,u=`/organizations/${e}/issues/?query=reprocessing.original_issue_id:${o}`;return 0===s?(0,l._N)("All events in this issue were moved during reprocessing. [link]",{link:(0,p.tZ)(a.Z,{to:u,children:(0,l.tn)("See %s new event","See %s new events",i)})}):(0,l._N)("Events in this issue were successfully reprocessed. [link]",{link:(0,p.tZ)(a.Z,{to:u,children:d===Number(r)?(0,l.tn)("See %s reprocessed event","See %s reprocessed events",i):(0,l.tn)("See %s new event","See %s new events",i)})})}render(){const{isBannerHidden:e}=this.state;if(e)return null;const{className:t}=this.props;return(0,p.tZ)(o.UP,{priority:"success",className:t,children:(0,p.BX)(g,{children:[(0,p.tZ)(d.DL,{color:"green300",isCircled:!0}),(0,p.tZ)("span",{children:this.renderMessage()}),(0,p.tZ)(f,{color:"green300","aria-label":(0,l.t)("Dismiss"),isCircled:!0,onClick:this.handleBannerDismiss})]})})}}m.displayName="ReprocessedBox";const h=m,g=(0,n.Z)(o._B,{target:"e17keqf51"})("&>svg:last-child{margin-right:0;margin-left:",(0,u.Z)(1),";}"),f=(0,n.Z)(d.bM,{target:"e17keqf50"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/views/organizationGroupDetails/groupActivity.tsx":(e,t,s)=>{s.r(t),s.d(t,{GroupActivity:()=>Be,default:()=>Me});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/lodash/uniq.js"),o=s.n(i),a=s("./app/actionCreators/group.tsx"),d=s("./app/actionCreators/indicator.tsx"),l=s("./app/components/activity/author.tsx"),u=s("./app/components/activity/item/index.tsx"),c=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=s("./app/styles/space.tsx"),m=s("./app/utils/marked.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=e=>{let{className:t,text:s}=e;return(0,h.tZ)("div",{className:t,"data-test-id":"activity-note-body",dangerouslySetInnerHTML:{__html:(0,m.Z)(s)}})};g.displayName="NoteBody";const f=g,b=(0,c.Z)("span",{target:"el2wm7k0"})({name:"eivff4",styles:"display:none"});var v=s("./app/components/links/linkWithConfirmation.tsx"),Z=s("./app/components/tooltip.tsx"),x=s("./app/locale.tsx"),y=s("./app/stores/configStore.tsx");const w=e=>{let{authorName:t,user:s,onEdit:r,onDelete:n}=e;const i=y.Z.get("user"),o=i&&(i.isSuperuser||(null==s?void 0:s.id)===i.id);return(0,h.BX)("div",{children:[(0,h.tZ)(l.Z,{children:t}),o&&(0,h.BX)(b,{children:[(0,h.tZ)(Z.Z,{title:(0,x.t)("You can edit this comment due to your superuser status"),disabled:!i.isSuperuser,children:(0,h.tZ)(_,{onClick:r,children:(0,x.t)("Edit")})}),(0,h.tZ)(Z.Z,{title:(0,x.t)("You can delete this comment due to your superuser status"),disabled:!i.isSuperuser,children:(0,h.tZ)(v.Z,{title:(0,x.t)("Remove"),message:(0,x.t)("Are you sure you wish to delete this comment?"),onConfirm:n,children:(0,h.tZ)(N,{children:(0,x.t)("Remove")})})})]})]})};w.displayName="NoteHeader";const S=e=>`\n  padding: 0 7px;\n  color: ${e.theme.gray200};\n  font-weight: normal;\n`,_=(0,c.Z)("a",{target:"e1u67hq51"})(S,";margin-left:7px;&:hover{color:",(e=>e.theme.gray300),";}"),N=(0,c.Z)("span",{target:"e1u67hq50"})(S,";border-left:1px solid ",(e=>e.theme.border),";&:hover{color:",(e=>e.theme.error),";}"),E=w;s("../node_modules/core-js/modules/es.string.replace.js");var k=s("../node_modules/react-mentions/dist/react-mentions.esm.js"),C=s("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),I=s("./app/components/button.tsx"),j=s("./app/components/navTabs.tsx"),$=s("./app/icons/index.tsx"),T=s("./app/styles/text.tsx"),R=s("../node_modules/lodash/uniqBy.js"),U=s.n(R),A=s("./app/stores/memberListStore.tsx"),D=s("./app/utils/callIfFunction.tsx"),O=s("./app/utils/isRenderFunc.tsx"),B=s("./app/utils/projects.tsx"),M=s("./app/utils/withOrganization.tsx");class z extends n.PureComponent{constructor(){super(...arguments),(0,r.Z)(this,"state",{members:A.Z.getAll()}),(0,r.Z)(this,"listeners",[A.Z.listen((e=>{this.handleMemberListUpdate(e)}),void 0)]),(0,r.Z)(this,"handleMemberListUpdate",(e=>{e!==this.state.members&&this.setState({members:e})})),(0,r.Z)(this,"renderChildren",(e=>{let{projects:t}=e;const{children:s,me:r}=this.props;return(0,O.l)(s)?s({members:this.getMemberList(this.state.members,r),teams:this.getTeams(t)}):null}))}componentWillUnmount(){this.listeners.forEach(D.g)}getMemberList(e,t){return U()(e,(e=>{let{id:t}=e;return t})).filter((e=>{let{id:s}=e;return!t||t.id!==s})).map((e=>{return{id:(t=e.id,`user:${t}`),display:e.name,email:e.email};var t}))}getTeams(e){const t=U()(e.map((e=>{let{teams:t}=e;return t})).reduce(((e,t)=>e.concat(t||[])),[]),"id");return t.map((e=>{return{id:(t=e.id,`team:${t}`),display:`#${e.slug}`,email:e.id};var t}))}render(){const{organization:e,projectSlugs:t}=this.props;return t&&t.length?(0,h.tZ)(B.Z,{slugs:t,orgId:e.slug,children:this.renderChildren}):this.renderChildren({projects:[]})}}z.displayName="Mentionables";const L=(0,M.Z)(z);function P(e){let{theme:t,minHeight:s}=e;return{control:{backgroundColor:`${t.background}`,fontSize:15,fontWeight:"normal"},input:{margin:0},"&singleLine":{control:{display:"inline-block",width:130},highlighter:{padding:1,border:"2px inset transparent"},input:{padding:1,border:"2px inset"}},"&multiLine":{control:{fontFamily:"Rubik, Avenir Next, Helvetica Neue, sans-serif",minHeight:s},highlighter:{padding:20,minHeight:s},input:{padding:`${(0,p.Z)(1.5)} ${(0,p.Z)(2)} 0`,minHeight:s,overflow:"auto",outline:0,border:0}},suggestions:{list:{maxHeight:150,overflow:"auto",backgroundColor:`${t.background}`,border:"1px solid rgba(0,0,0,0.15)",fontSize:12},item:{padding:"5px 15px",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:`${t.backgroundSecondary}`}}}}}const q={placeholder:(0,x.t)("Add a comment.\nTag users with @, or teams with #"),minHeight:140,busy:!1};class H extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{preview:!1,value:this.props.text||"",memberMentions:[],teamMentions:[]}),(0,r.Z)(this,"handleToggleEdit",(()=>{this.setState({preview:!1})})),(0,r.Z)(this,"handleTogglePreview",(()=>{this.setState({preview:!0})})),(0,r.Z)(this,"handleSubmit",(e=>{e.preventDefault(),this.submitForm()})),(0,r.Z)(this,"handleChange",(e=>{this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e,{updating:!!this.props.modelId})})),(0,r.Z)(this,"handleKeyDown",(e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&this.canSubmit&&this.submitForm()})),(0,r.Z)(this,"handleCancel",(e=>{e.preventDefault(),this.finish()})),(0,r.Z)(this,"handleAddMember",((e,t)=>{this.setState((s=>{let{memberMentions:r}=s;return{memberMentions:[...r,[`${e}`,t]]}}))})),(0,r.Z)(this,"handleAddTeam",((e,t)=>{this.setState((s=>{let{teamMentions:r}=s;return{teamMentions:[...r,[`${e}`,t]]}}))}))}get canSubmit(){return""!==this.state.value.trim()}cleanMarkdown(e){return e.replace(/\[sentry\.strip:member\]/g,"@").replace(/\[sentry\.strip:team\]/g,"")}submitForm(){this.props.modelId?this.update():this.create()}create(){const{onCreate:e}=this.props;e&&e({text:this.cleanMarkdown(this.state.value),mentions:this.finalizeMentions()})}update(){const{onUpdate:e}=this.props;e&&e({text:this.cleanMarkdown(this.state.value),mentions:this.finalizeMentions()})}finish(){this.props.onEditFinish&&this.props.onEditFinish()}finalizeMentions(){const{memberMentions:e,teamMentions:t}=this.state;return[...e,...t].filter((e=>-1!==this.state.value.indexOf(e[1]))).map((e=>e[0]))}render(){const{preview:e,value:t}=this.state,{modelId:s,busy:r,placeholder:n,minHeight:i,errorJSON:o,memberList:a,teams:d,theme:l}=this.props,u=!!s,c=u?(0,x.t)("Save Comment"):(0,x.t)("Post Comment"),p=o&&("string"==typeof o.detail?o.detail:o.detail&&o.detail.message||(0,x.t)("Unable to post comment"))||null;return(0,h.BX)(X,{"data-test-id":"note-input-form",noValidate:!0,onSubmit:this.handleSubmit,children:[(0,h.BX)(Q,{children:[(0,h.tZ)(ee,{className:e?"":"active",children:(0,h.tZ)(te,{onClick:this.handleToggleEdit,children:u?(0,x.t)("Edit"):(0,x.t)("Write")})}),(0,h.tZ)(ee,{className:e?"active":"",children:(0,h.tZ)(te,{onClick:this.handleTogglePreview,children:(0,x.t)("Preview")})}),(0,h.BX)(se,{children:[(0,h.tZ)($.kh,{}),(0,h.tZ)(re,{children:(0,x.t)("Markdown supported")})]})]}),(0,h.tZ)(K,{children:e?(0,h.tZ)(ne,{minHeight:i,dangerouslySetInnerHTML:{__html:(0,m.Z)(this.cleanMarkdown(t))}}):(0,h.BX)(k.r,{style:P({theme:l,minHeight:i}),placeholder:n,onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:t,required:!0,autoFocus:!0,children:[(0,h.tZ)(k.p,{trigger:"@",data:a,onAdd:this.handleAddMember,displayTransform:(e,t)=>`@${t}`,markup:"**[sentry.strip:member]__display__**",appendSpaceOnAdd:!0}),(0,h.tZ)(k.p,{trigger:"#",data:d,onAdd:this.handleAddTeam,markup:"**[sentry.strip:team]__display__**",appendSpaceOnAdd:!0})]})}),(0,h.BX)(W,{children:[(0,h.tZ)("div",{children:p&&(0,h.tZ)(J,{children:p})}),(0,h.BX)("div",{children:[u&&(0,h.tZ)(Y,{priority:"danger",type:"button",onClick:this.handleCancel,children:(0,x.t)("Cancel")}),(0,h.tZ)(Y,{error:p,type:"submit",disabled:r||!this.canSubmit,children:c})]})]})]})}}H.displayName="NoteInputComponent";const G=(0,C.d)(H);class V extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"renderInput",(e=>{let{members:t,teams:s}=e;const{projectSlugs:r,...n}=this.props;return(0,h.tZ)(G,{memberList:t,teams:s,...n})}))}render(){const{projectSlugs:e}=this.props,t=y.Z.get("user");return(0,h.tZ)(L,{me:t,projectSlugs:e,children:this.renderInput})}}V.displayName="NoteInputContainer",(0,r.Z)(V,"defaultProps",q);const F=V,X=(0,c.Z)("form",{target:"ewxfxsb10"})("font-size:15px;line-height:22px;transition:padding 0.2s ease-in-out;",(e=>(e=>e.error?`\n  color: ${e.theme.error};\n  margin: -1px;\n  border: 1px solid ${e.theme.error};\n  border-radius: ${e.theme.borderRadius};\n\n    &:before {\n      display: block;\n      content: '';\n      width: 0;\n      height: 0;\n      border-top: 7px solid transparent;\n      border-bottom: 7px solid transparent;\n      border-right: 7px solid ${e.theme.red300};\n      position: absolute;\n      left: -7px;\n      top: 12px;\n    }\n\n    &:after {\n      display: block;\n      content: '';\n      width: 0;\n      height: 0;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-right: 6px solid #fff;\n      position: absolute;\n      left: -5px;\n      top: 12px;\n    }\n  `:"")(e)),";"),K=(0,c.Z)("div",{target:"ewxfxsb9"})(T.Z,";"),W=(0,c.Z)("div",{target:"ewxfxsb8"})("display:flex;border-top:1px solid ",(e=>e.theme.border),";justify-content:space-between;transition:opacity 0.2s ease-in-out;padding-left:",(0,p.Z)(1.5),";"),Y=(0,c.Z)(I.ZP,{target:"ewxfxsb7"})("font-size:13px;margin:-1px -1px -1px;border-radius:0 0 ",(e=>e.theme.borderRadius),";",(e=>e.error&&`\n  &, &:active, &:focus, &:hover {\n  border-bottom-color: ${e.theme.error};\n  border-right-color: ${e.theme.error};\n  }\n  `),";"),J=(0,c.Z)("span",{target:"ewxfxsb6"})("display:flex;align-items:center;height:100%;color:",(e=>e.theme.error),";font-size:0.9em;"),Q=(0,c.Z)(j.Z,{target:"ewxfxsb5"})("padding:",(0,p.Z)(1)," ",(0,p.Z)(2)," 0;border-bottom:1px solid ",(e=>e.theme.border),";margin-bottom:0;"),ee=(0,c.Z)("li",{target:"ewxfxsb4"})({name:"1uwyn4z",styles:"margin-right:13px"}),te=(0,c.Z)("a",{target:"ewxfxsb3"})({name:"k7xpx9",styles:".nav-tabs>li>&{font-size:15px;padding-bottom:5px;}"}),se=(0,c.Z)(ee,{target:"ewxfxsb2"})(".nav-tabs>&{display:flex;align-items:center;margin-right:0;color:",(e=>e.theme.subText),";float:right;}"),re=(0,c.Z)("span",{target:"ewxfxsb1"})("margin-left:",(0,p.Z)(.5),";font-size:14px;"),ne=(0,c.Z)("div",{target:"ewxfxsb0"})((e=>(e=>{const{minHeight:t,padding:s,overflow:r,border:n}=P(e)["&multiLine"].input;return`\n  max-height: 1000px;\n  max-width: 100%;\n  ${t&&`min-height: ${t}px`||""};\n  padding: ${s};\n  overflow: ${r};\n  border: ${n};\n`})(e)),";padding-bottom:",(0,p.Z)(1),";");function ie(e){const[t,s]=(0,n.useState)(!1),{modelId:r,user:i,dateCreated:o,text:a,authorName:d,hideDate:l,minHeight:u,showTime:c,projectSlugs:p,onDelete:m,onCreate:g,onUpdate:b}=e,v={hideDate:l,showTime:c,id:`activity-item-${r}`,author:{type:"user",user:i},date:o};if(!t){const t=(0,h.tZ)(E,{authorName:d,user:i,onEdit:()=>s(!0),onDelete:()=>m(e)});return(0,h.tZ)(ae,{...v,header:t,children:(0,h.tZ)(f,{text:a})})}return(0,h.tZ)(oe,{...v,children:()=>(0,h.tZ)(F,{modelId:r,minHeight:u,text:a,projectSlugs:p,onEditFinish:()=>s(!1),onUpdate:t=>{b(t,e),s(!1)},onCreate:e=>null==g?void 0:g(e)})})}ie.displayName="Note";const oe=(0,c.Z)(u.Z,{target:"e1hfgqls1"})("ul{list-style:disc;}h1,h2,h3,h4,p,ul:not(.nav),ol,pre,hr,blockquote{margin-bottom:",(0,p.Z)(2),";}ul:not(.nav),ol{padding-left:20px;}p{a{word-wrap:break-word;}}blockquote{font-size:15px;border-left:5px solid ",(e=>e.theme.innerBorder),";padding-left:",(0,p.Z)(1),";margin-left:0;}"),ae=(0,c.Z)(oe,{target:"e1hfgqls0"})("&:hover{",b,"{display:inline-block;}}"),de=ie;var le=s("../node_modules/@sentry/hub/esm/exports.js"),ue=s("../node_modules/lodash/debounce.js"),ce=s.n(ue),pe=s("./app/utils/localStorage.tsx");class me extends n.Component{constructor(){var e;super(...arguments),e=this,(0,r.Z)(this,"save",ce()((e=>{const{itemKey:t,onSave:s}=this.props,r=this.fetchFromStorage()||{};this.saveToStorage({...r,[t]:s(e)})}),150)),(0,r.Z)(this,"handleChange",(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{onChange:r}=e.props;r&&r(t,s),s.updating||e.save(t.target.value)})),(0,r.Z)(this,"handleCreate",(e=>{const{itemKey:t,onCreate:s}=this.props;s&&s(e);const r=this.fetchFromStorage()||{};if(!r.hasOwnProperty(t))return;const{[t]:n,...i}=r;this.saveToStorage(i)}))}fetchFromStorage(){const{storageKey:e}=this.props,t=pe.Z.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(e){return le.$e((s=>{s.setExtra("storage",t),le.Tb(e)})),null}}saveToStorage(e){const{storageKey:t}=this.props;try{pe.Z.setItem(t,JSON.stringify(e))}catch(t){le.Tb(t),le.$e((s=>{s.setExtra("storage",e),le.Tb(t)}))}}getValue(){const{itemKey:e,text:t,onLoad:s}=this.props;if(t)return t;const r=this.fetchFromStorage();return r&&r.hasOwnProperty(e)?s?s(r[e]):r[e]:""}render(){return(0,h.tZ)(F,{...this.props,text:this.getValue(),onCreate:this.handleCreate,onChange:this.handleChange})}}me.displayName="NoteInputWithStorage",(0,r.Z)(me,"defaultProps",{onLoad:e=>e,onSave:e=>e});const he=me;var ge=s("./app/components/errorBoundary.tsx"),fe=s("./app/components/layouts/thirds.tsx"),be=s("./app/components/loadingIndicator.tsx"),ve=s("./app/components/reprocessedBox.tsx"),Ze=s("./app/constants/index.tsx"),xe=s("./app/types/index.tsx"),ye=s("./app/utils/guid.tsx"),we=s("./app/utils/teams.tsx"),Se=s("./app/utils/withApi.tsx"),_e=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/moment/moment.js")),Ne=s.n(_e),Ee=s("./app/components/commitLink.tsx"),ke=s("./app/components/duration.tsx"),Ce=s("./app/components/links/externalLink.tsx"),Ie=s("./app/components/links/link.tsx"),je=s("./app/components/pullRequestLink.tsx"),$e=s("./app/components/version.tsx"),Te=s("./app/stores/teamStore.tsx");function Re(e){let{activity:t,orgSlug:s,projectId:r,author:i}=e;const o=`/organizations/${s}/issues/`;return(0,h.tZ)(n.Fragment,{children:function(){var e;switch(t.type){case xe.fc.NOTE:return(0,x._N)("[author] left a comment",{author:i});case xe.fc.SET_RESOLVED:return(0,x._N)("[author] marked this issue as resolved",{author:i});case xe.fc.SET_RESOLVED_BY_AGE:return(0,x._N)("[author] marked this issue as resolved due to inactivity",{author:i});case xe.fc.SET_RESOLVED_IN_RELEASE:const{current_release_version:a,version:d}=t.data;return a?(0,x._N)("[author] marked this issue as resolved in releases greater than [version]",{author:i,version:(0,h.tZ)($e.Z,{version:a,projectId:r,tooltipRawVersion:!0})}):d?(0,x._N)("[author] marked this issue as resolved in [version]",{author:i,version:(0,h.tZ)($e.Z,{version:d,projectId:r,tooltipRawVersion:!0})}):(0,x._N)("[author] marked this issue as resolved in the upcoming release",{author:i});case xe.fc.SET_RESOLVED_IN_COMMIT:const l=((null===(e=t.data.commit)||void 0===e?void 0:e.releases)||[]).filter((e=>null!==e.dateReleased)).sort(((e,t)=>Ne()(e.dateReleased).valueOf()-Ne()(t.dateReleased).valueOf()));return 1===l.length?(0,x._N)("[author] marked this issue as resolved in [version] [break]This commit was released in [release]",{author:i,version:(0,h.tZ)(Ee.Z,{inline:!0,commitId:t.data.commit.id,repository:t.data.commit.repository}),break:(0,h.tZ)("br",{}),release:(0,h.tZ)($e.Z,{version:l[0].version,projectId:r,tooltipRawVersion:!0})}):l.length>1?(0,x._N)("[author] marked this issue as resolved in [version] [break]This commit was released in [release] and "+(l.length-1)+" others",{author:i,version:(0,h.tZ)(Ee.Z,{inline:!0,commitId:t.data.commit.id,repository:t.data.commit.repository}),break:(0,h.tZ)("br",{}),release:(0,h.tZ)($e.Z,{version:l[0].version,projectId:r,tooltipRawVersion:!0})}):(0,x._N)("[author] marked this issue as resolved in [version]",{author:i,version:(0,h.tZ)(Ee.Z,{inline:!0,commitId:t.data.commit.id,repository:t.data.commit.repository})});case xe.fc.SET_RESOLVED_IN_PULL_REQUEST:{const{data:e}=t,{pullRequest:s}=e;return(0,x._N)("[author] marked this issue as resolved in [version]",{author:i,version:(0,h.tZ)(je.Z,{inline:!0,pullRequest:s,repository:s.repository})})}case xe.fc.SET_UNRESOLVED:return(0,x._N)("[author] marked this issue as unresolved",{author:i});case xe.fc.SET_IGNORED:{const{data:e}=t;return function(e){return e.ignoreDuration?(0,x._N)("[author] ignored this issue for [duration]",{author:i,duration:(0,h.tZ)(ke.Z,{seconds:60*e.ignoreDuration})}):e.ignoreCount&&e.ignoreWindow?(0,x._N)("[author] ignored this issue until it happens [count] time(s) in [duration]",{author:i,count:e.ignoreCount,duration:(0,h.tZ)(ke.Z,{seconds:60*e.ignoreWindow})}):e.ignoreCount?(0,x._N)("[author] ignored this issue until it happens [count] time(s)",{author:i,count:e.ignoreCount}):e.ignoreUserCount&&e.ignoreUserWindow?(0,x._N)("[author] ignored this issue until it affects [count] user(s) in [duration]",{author:i,count:e.ignoreUserCount,duration:(0,h.tZ)(ke.Z,{seconds:60*e.ignoreUserWindow})}):e.ignoreUserCount?(0,x._N)("[author] ignored this issue until it affects [count] user(s)",{author:i,count:e.ignoreUserCount}):(0,x._N)("[author] ignored this issue",{author:i})}(e)}case xe.fc.SET_PUBLIC:return(0,x._N)("[author] made this issue public",{author:i});case xe.fc.SET_PRIVATE:return(0,x._N)("[author] made this issue private",{author:i});case xe.fc.SET_REGRESSION:{const{data:e}=t;return e.version?(0,x._N)("[author] marked this issue as a regression in [version]",{author:i,version:(0,h.tZ)($e.Z,{version:e.version,projectId:r,tooltipRawVersion:!0})}):(0,x._N)("[author] marked this issue as a regression",{author:i})}case xe.fc.CREATE_ISSUE:{const{data:e}=t;return(0,x._N)("[author] created an issue on [provider] titled [title]",{author:i,provider:e.provider,title:(0,h.tZ)(Ce.Z,{href:e.location,children:e.title})})}case xe.fc.UNMERGE_SOURCE:{const{data:e}=t,{destination:s,fingerprints:r}=e;return(0,x.tn)("%2$s migrated %1$s fingerprint to %3$s","%2$s migrated %1$s fingerprints to %3$s",r.length,i,s?(0,h.tZ)(Ie.Z,{to:`${o}${s.id}`,children:s.shortId}):(0,x.t)("a group"))}case xe.fc.UNMERGE_DESTINATION:{const{data:e}=t,{source:s,fingerprints:r}=e;return(0,x.tn)("%2$s migrated %1$s fingerprint from %3$s","%2$s migrated %1$s fingerprints from %3$s",r.length,i,s?(0,h.tZ)(Ie.Z,{to:`${o}${s.id}`,children:s.shortId}):(0,x.t)("a group"))}case xe.fc.FIRST_SEEN:return(0,x._N)("[author] first saw this issue",{author:i});case xe.fc.ASSIGNED:{const{data:e}=t;return function(e){let s;if("team"===e.assigneeType){const t=Te.Z.getById(e.assignee);s=t?`#${t.slug}`:"<unknown-team>"}else s=t.user&&e.assignee===t.user.id?(0,x.t)("themselves"):"user"===e.assigneeType&&e.assigneeEmail?e.assigneeEmail:(0,x.t)("an unknown user");const r=["projectOwnership","codeowners"].includes(e.integration),o={msteams:(0,x.t)("Microsoft Teams"),slack:(0,x.t)("Slack"),projectOwnership:(0,x.t)("Ownership Rule"),codeowners:(0,x.t)("Codeowners Rule")};return(0,h.BX)(n.Fragment,{children:[(0,h.tZ)("div",{children:(0,x._N)("[author] [action] this issue to [assignee]",{action:r?(0,x.t)("auto-assigned"):(0,x.t)("assigned"),author:i,assignee:s})}),e.integration&&(0,h.BX)(Ae,{children:[(0,x.t)("Assigned via %s",o[e.integration]),e.rule&&(0,h.BX)(n.Fragment,{children:[": ",(0,h.tZ)(De,{children:e.rule})]})]})]})}(e)}case xe.fc.UNASSIGNED:return(0,x._N)("[author] unassigned this issue",{author:i});case xe.fc.MERGE:return(0,x.tn)("%2$s merged %1$s issue into this issue","%2$s merged %1$s issues into this issue",t.data.issues.length,i);case xe.fc.REPROCESS:{const{data:e}=t,{oldGroupId:r,eventCount:n}=e;return(0,x._N)("[author] reprocessed the events in this issue. [new-events]",{author:i,"new-events":(0,h.tZ)(Ie.Z,{to:`/organizations/${s}/issues/?query=reprocessing.original_issue_id:${r}`,children:(0,x.tn)("See %s new event","See %s new events",n)})})}case xe.fc.MARK_REVIEWED:return(0,x._N)("[author] marked this issue as reviewed",{author:i});default:return""}}()})}Re.displayName="GroupActivityItem";const Ue=Re,Ae=(0,c.Z)("div",{target:"en7kd4f1"})("overflow-wrap:anywhere;font-size:",(e=>e.theme.fontSizeSmall),";"),De=(0,c.Z)("span",{target:"en7kd4f0"})("font-family:",(e=>e.theme.text.familyMono),";");var Oe=s("./app/views/organizationGroupDetails/utils.tsx");class Be extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{createBusy:!1,error:!1,errorJSON:null,inputId:(0,ye.E)()}),(0,r.Z)(this,"handleNoteDelete",(async e=>{let{modelId:t,text:s}=e;const{api:r,group:n}=this.props;(0,d.E3)((0,x.t)("Removing comment..."));try{await(0,a.f_)(r,n,t,s),(0,d.B8)()}catch(e){(0,d.Iw)((0,x.t)("Failed to delete comment"))}})),(0,r.Z)(this,"handleNoteCreate",(async e=>{const{api:t,group:s}=this.props;this.setState({createBusy:!0}),(0,d.E3)((0,x.t)("Posting comment..."));try{await(0,a.kT)(t,s,e),this.setState({createBusy:!1,inputId:(0,ye.E)()}),(0,d.B8)()}catch(e){this.setState({createBusy:!1,error:!0,errorJSON:e.responseJSON||Ze.N7}),(0,d.Iw)((0,x.t)("Unable to post comment"))}})),(0,r.Z)(this,"handleNoteUpdate",(async(e,t)=>{let{modelId:s,text:r}=t;const{api:n,group:i}=this.props;(0,d.E3)((0,x.t)("Updating comment..."));try{await(0,a.Qk)(n,i,e,s,r),(0,d.B8)()}catch(e){this.setState({error:!0,errorJSON:e.responseJSON||Ze.N7}),(0,d.Iw)((0,x.t)("Unable to update comment"))}}))}render(){const{group:e,organization:t}=this.props,{activity:s,count:r,id:i}=e,a=Number(r),d=(0,Oe.Ad)(s),c=(0,Oe.M3)(e,d),p=y.Z.get("user"),m=e&&e.project?[e.project.slug]:[],g={minHeight:140,group:e,projectSlugs:m,placeholder:(0,x.t)("Add details or updates to this event. \nTag users with @, or teams with #")};return(0,h.BX)(n.Fragment,{children:[(c===Oe.m7.REPROCESSED_AND_HASNT_EVENT||c===Oe.m7.REPROCESSED_AND_HAS_EVENT)&&(0,h.tZ)(ve.Z,{reprocessActivity:d,groupCount:a,orgSlug:t.slug,groupId:i}),(0,h.tZ)(fe.uT,{children:(0,h.BX)(fe.or,{children:[(0,h.tZ)(u.Z,{author:{type:"user",user:p},children:()=>(0,h.tZ)(he,{storageKey:"groupinput:latest",itemKey:e.id,onCreate:this.handleNoteCreate,busy:this.state.createBusy,error:this.state.error,errorJSON:this.state.errorJSON,...g},this.state.inputId)}),(0,h.tZ)(we.Z,{ids:o()(e.activity.filter((e=>{var t;return e.type===xe.fc.ASSIGNED&&"team"===e.data.assigneeType&&(null===(t=e.data.assignee)||void 0===t?void 0:t.length)>0})).map((e=>e.data.assignee))),children:t=>{let{initiallyLoaded:s}=t;return s?e.activity.map((t=>{var s;const r=t.user?t.user.name:"Sentry";return t.type===xe.fc.NOTE?(0,h.tZ)(ge.Z,{mini:!0,children:(0,h.tZ)(de,{showTime:!1,text:t.data.text,modelId:t.id,user:t.user,dateCreated:t.dateCreated,authorName:r,onDelete:this.handleNoteDelete,onUpdate:this.handleNoteUpdate,...g})},`note-${t.id}`):(0,h.tZ)(ge.Z,{mini:!0,children:(0,h.tZ)(u.Z,{author:{type:t.user?"user":"system",user:null!==(s=t.user)&&void 0!==s?s:void 0},date:t.dateCreated,header:(0,h.tZ)(Ue,{author:(0,h.tZ)(l.Z,{children:r}),activity:t,orgSlug:this.props.params.orgId,projectId:e.project.id})})},`item-${t.id}`)})):(0,h.tZ)(be.Z,{})}})]})})]})}}Be.displayName="GroupActivity";const Me=(0,Se.Z)((0,M.Z)(Be))},"./app/views/organizationGroupDetails/utils.tsx":(e,t,s)=>{s.d(t,{Ad:()=>g,M3:()=>b,MN:()=>l,V7:()=>u,dG:()=>p,g5:()=>c,m7:()=>f,sC:()=>h}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/lodash/orderBy.js"),n=s.n(r),i=s("./app/actionCreators/group.tsx"),o=s("./app/api.tsx"),a=s("./app/locale.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");async function l(e,t,s,r,n,i){const o="latest"===r||"oldest"===r?`/issues/${s}/events/${r}/`:`/projects/${t}/${i}/events/${r}/?group_id=${s}`,a={};return 0!==n.length&&(a.environment=n),await e.requestPromise(o,{query:a})}function u(e,t,s,r){(0,i.Gv)(e,{orgId:t,projectId:s,itemIds:[r],failSilently:!0,data:{hasSeen:!0}},{})}function c(e,t){return(new o.KU).requestPromise(`/issues/${e}/user-reports/`,{includeAllArgs:!0,query:t})}function p(e){const t=e.tags.find((e=>{let{key:t}=e;return"environment"===t}));return t?t.value:null}const m={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a._N)("You have [link:disabled workflow notifications] for this project.",{link:t?(0,d.tZ)("span",{}):(0,d.tZ)("a",{href:"/account/settings/notifications/"})});if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&m.hasOwnProperty(t))return m[t]}return(0,a._N)("You're receiving updates because you are [link:subscribed to workflow notifications] for this project.",{link:t?(0,d.tZ)("span",{}):(0,d.tZ)("a",{href:"/account/settings/notifications/"})})}function g(e){return n()([...e],(e=>{let{dateCreated:t}=e;return new Date(t)}),["desc"])[0]}let f;function b(e,t){const{status:s,count:r,activity:n}=e,i=Number(r);switch(s){case"reprocessing":return f.REPROCESSING;case"unresolved":{const e=null!=t?t:g(n);return"reprocess"===(null==e?void 0:e.type)?0===i?f.REPROCESSED_AND_HASNT_EVENT:f.REPROCESSED_AND_HAS_EVENT:f.NO_STATUS}default:return f.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(f||(f={}))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupActivity_tsx.2709954ccfdb09b3d831bba398f836ca.js.map