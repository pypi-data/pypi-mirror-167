/*! For license information please see vendors-node_modules_lodash_first_js-node_modules_lodash_padStart_js-node_modules_rrweb_es_rr-518aa7.b897afe811bd7d874f96.js.LICENSE.txt */
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["vendors-node_modules_lodash_first_js-node_modules_lodash_padStart_js-node_modules_rrweb_es_rr-518aa7"],{"../node_modules/lodash/_asciiSize.js":(e,t,r)=>{var n=r("../node_modules/lodash/_baseProperty.js")("length");e.exports=n},"../node_modules/lodash/_baseRepeat.js":e=>{var t=Math.floor;e.exports=function(e,r){var n="";if(!e||r<1||r>9007199254740991)return n;do{r%2&&(n+=e),(r=t(r/2))&&(e+=e)}while(r);return n}},"../node_modules/lodash/_createPadding.js":(e,t,r)=>{var n=r("../node_modules/lodash/_baseRepeat.js"),o=r("../node_modules/lodash/_baseToString.js"),i=r("../node_modules/lodash/_castSlice.js"),a=r("../node_modules/lodash/_hasUnicode.js"),s=r("../node_modules/lodash/_stringSize.js"),l=r("../node_modules/lodash/_stringToArray.js"),c=Math.ceil;e.exports=function(e,t){var r=(t=void 0===t?" ":o(t)).length;if(r<2)return r?n(t,e):t;var u=n(t,c(e/s(t)));return a(t)?i(l(u),0,e).join(""):u.slice(0,e)}},"../node_modules/lodash/_stringSize.js":(e,t,r)=>{var n=r("../node_modules/lodash/_asciiSize.js"),o=r("../node_modules/lodash/_hasUnicode.js"),i=r("../node_modules/lodash/_unicodeSize.js");e.exports=function(e){return o(e)?i(e):n(e)}},"../node_modules/lodash/_unicodeSize.js":e=>{var t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",n="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+t+"|"+r+")?",s="[\\ufe0e\\ufe0f]?",l=s+a+"(?:\\u200d(?:"+[n,o,i].join("|")+")"+s+a+")*",c="(?:"+[n+t+"?",t,o,i,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(r+"(?="+r+")|"+c+l,"g");e.exports=function(e){for(var t=u.lastIndex=0;u.test(e);)++t;return t}},"../node_modules/lodash/first.js":(e,t,r)=>{e.exports=r("../node_modules/lodash/head.js")},"../node_modules/lodash/head.js":e=>{e.exports=function(e){return e&&e.length?e[0]:void 0}},"../node_modules/lodash/padStart.js":(e,t,r)=>{var n=r("../node_modules/lodash/_createPadding.js"),o=r("../node_modules/lodash/_stringSize.js"),i=r("../node_modules/lodash/toInteger.js"),a=r("../node_modules/lodash/toString.js");e.exports=function(e,t,r){e=a(e);var s=(t=i(t))?o(e):0;return t&&s<t?n(t-s,r)+e:e}},"../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/index.js":(e,t,r)=>{"use strict";r.d(t,{x:()=>j});var n={};r.r(n),r.d(n,{default:()=>a});var o=r("../node_modules/rrweb/es/rrweb/packages/rrweb/ext/tslib/tslib.es6.js"),i=r("../node_modules/rrweb/es/rrweb/packages/rrweb-snapshot/es/rrweb-snapshot.js");const a=function(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t,r){(e[t]||[]).slice().map((function(e){e(r)})),(e["*"]||[]).slice().map((function(e){e(t,r)}))}}};function s(e,t){if(void 0===e&&(e=window),void 0===t&&(t=document),!("scrollBehavior"in t.documentElement.style)||!0===e.__forceSmoothScrollPolyfill__){var r,n=e.HTMLElement||e.Element,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||s,scrollIntoView:n.prototype.scrollIntoView},i=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,a=(r=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(r)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?p.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):o.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?o.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):p.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var e=arguments[0].left,t=arguments[0].top;p.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},n.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var r=h(this),n=r.getBoundingClientRect(),i=this.getBoundingClientRect();r!==t.body?(p.call(this,r,r.scrollLeft+i.left-n.left,r.scrollTop+i.top-n.top),"fixed"!==e.getComputedStyle(r).position&&e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}else o.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function s(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,t){return"Y"===t?e.clientHeight+a<e.scrollHeight:"X"===t?e.clientWidth+a<e.scrollWidth:void 0}function u(t,r){var n=e.getComputedStyle(t,null)["overflow"+r];return"auto"===n||"scroll"===n}function d(e){var t=c(e,"Y")&&u(e,"Y"),r=c(e,"X")&&u(e,"X");return t||r}function h(e){for(;e!==t.body&&!1===d(e);)e=e.parentNode||e.host;return e}function f(t){var r,n,o,a,s=(i()-t.startTime)/468;a=s=s>1?1:s,r=.5*(1-Math.cos(Math.PI*a)),n=t.startX+(t.x-t.startX)*r,o=t.startY+(t.y-t.startY)*r,t.method.call(t.scrollable,n,o),n===t.x&&o===t.y||e.requestAnimationFrame(f.bind(e,t))}function p(r,n,a){var l,c,u,d,h=i();r===t.body?(l=e,c=e.scrollX||e.pageXOffset,u=e.scrollY||e.pageYOffset,d=o.scroll):(l=r,c=r.scrollLeft,u=r.scrollTop,d=s),f({scrollable:l,method:d,startTime:h,startX:c,startY:u,x:n,y:a})}}var l,c=r("../node_modules/rrweb/es/rrweb/packages/rrweb/src/types.js"),u=function(){function e(e,t){void 0===e&&(e=[]),this.timeOffset=0,this.raf=null,this.actions=e,this.speed=t}return e.prototype.addAction=function(e){var t=this.findActionIndex(e);this.actions.splice(t,0,e)},e.prototype.addActions=function(e){this.actions=this.actions.concat(e)},e.prototype.start=function(){this.timeOffset=0;var e=performance.now(),t=this.actions,r=this;this.raf=requestAnimationFrame((function n(){var o=performance.now();for(r.timeOffset+=(o-e)*r.speed,e=o;t.length;){var i=t[0];if(!(r.timeOffset>=i.delay))break;t.shift(),i.doAction()}(t.length>0||r.liveMode)&&(r.raf=requestAnimationFrame(n))}))},e.prototype.clear=function(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0},e.prototype.setSpeed=function(e){this.speed=e},e.prototype.toggleLiveMode=function(e){this.liveMode=e},e.prototype.isActive=function(){return null!==this.raf},e.prototype.findActionIndex=function(e){for(var t=0,r=this.actions.length-1;t<=r;){var n=Math.floor((t+r)/2);if(this.actions[n].delay<e.delay)t=n+1;else{if(!(this.actions[n].delay>e.delay))return n+1;r=n-1}}return t},e}();function d(e,t){if(e.type===c.tw.IncrementalSnapshot&&e.data.source===c.yh.MouseMove){var r=e.data.positions[0].timeOffset,n=e.timestamp+r;return e.delay=n-t,n-t}return e.delay=e.timestamp-t,e.delay}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(l||(l={}));var f={type:"xstate.init"};function p(e){return void 0===e?[]:[].concat(e)}function m(e){return{type:"xstate.assign",assignment:e}}function v(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function y(e){return function(t){return e===t}}function g(e){return"string"==typeof e?{type:e}:e}function b(e,t){return{value:e,context:t,actions:[],changed:!1,matches:y(e)}}function S(e,t,r){var n=t,o=!1;return[e.filter((function(e){if("xstate.assign"===e.type){o=!0;var t=Object.assign({},n);return"function"==typeof e.assignment?t=e.assignment(n,r):Object.keys(e.assignment).forEach((function(o){t[o]="function"==typeof e.assignment[o]?e.assignment[o](n,r):e.assignment[o]})),n=t,!1}return!0})),n,o]}function x(e,t){void 0===t&&(t={});var r=h(S(p(e.states[e.initial].entry).map((function(e){return v(e,t.actions)})),e.context,f),2),n=r[0],o=r[1],i={config:e,_options:t,initialState:{value:e.initial,actions:n,context:o,matches:y(e.initial)},transition:function(t,r){var n,o,a="string"==typeof t?{value:t,context:e.context}:t,s=a.value,l=a.context,c=g(r),u=e.states[s];if(u.on){var d=p(u.on[c.type]);try{for(var f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(d),m=f.next();!m.done;m=f.next()){var x=m.value;if(void 0===x)return b(s,l);var w="string"==typeof x?{target:x}:x,T=w.target,A=w.actions,E=void 0===A?[]:A,_=w.cond,N=void 0===_?function(){return!0}:_,I=void 0===T,M=null!=T?T:s,R=e.states[M];if(N(l,c)){var C=h(S((I?p(E):[].concat(u.exit,E,R.entry).filter((function(e){return e}))).map((function(e){return v(e,i._options.actions)})),l,c),3),P=C[0],D=C[1],k=C[2],L=null!=T?T:s;return{value:L,context:D,actions:P,changed:T!==s||P.length>0||k,matches:y(L)}}}}catch(e){n={error:e}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}return b(s,l)}};return i}var w=function(e,t){return e.actions.forEach((function(r){var n=r.exec;return n&&n(e.context,t)}))};function T(e){var t=e.initialState,r=l.NotStarted,n=new Set,o={_machine:e,send:function(o){r===l.Running&&(t=e.transition(t,o),w(t,g(o)),n.forEach((function(e){return e(t)})))},subscribe:function(e){return n.add(e),e(t),{unsubscribe:function(){return n.delete(e)}}},start:function(n){if(n){var i="object"==typeof n?n:{context:e.config.context,value:n};t={value:i.value,actions:[],context:i.context,matches:y(i.value)}}return r=l.Running,w(t,f),o},stop:function(){return r=l.Stopped,n.clear(),o},get state(){return t},get status(){return r}};return o}var A=r("../node_modules/rrweb/es/rrweb/packages/rrweb/src/utils.js");var E;function _(e,t){var r=e[t[0]];return 1===t.length?r:_(r.cssRules[t[1]].cssRules,t.slice(2))}function N(e){var t=(0,o.ev)([],(0,o.CR)(e),!1),r=t.pop();return{positions:t,index:r}}!function(e){e[e.Insert=0]="Insert",e[e.Remove=1]="Remove",e[e.Snapshot=2]="Snapshot",e[e.SetProperty=3]="SetProperty",e[e.RemoveProperty=4]="RemoveProperty"}(E||(E={}));var I=r("../node_modules/rrweb/es/rrweb/ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js"),M=new Map;function R(e,t){var r=M.get(e);return r||(r=new Map,M.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}var C=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function P(e,t){return function(r){if(r&&"object"==typeof r&&"rr_type"in r){if("index"in r){var n=r.rr_type,i=r.index;return R(t,n)[i]}if("args"in r){var a=r.rr_type,s=r.args,l=window[a];return new(l.bind.apply(l,(0,o.ev)([void 0],(0,o.CR)(s.map(P(e,t))),!1)))}if("base64"in r)return(0,I.J)(r.base64);if("src"in r){var c=e.get(r.src);if(c)return c;var u=new Image;return u.src=r.src,e.set(r.src,u),u}}else if(Array.isArray(r))return r.map(P(e,t));return r}}const D=function(e){var t=e.mutation,r=e.target,n=e.type,o=e.imageMap,i=e.errorHandler;try{var a=function(e,t){try{return t===c.FX.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch(e){return null}}(r,n);if(!a)return;if(t.setter)return void(a[t.property]=t.args[0]);var s=a[t.property],l=t.args.map(P(o,a));!function(e,t){if(null==t?void 0:t.constructor){var r=t.constructor.name;if(C.includes(r)){var n=R(e,r);n.includes(t)||n.push(t)}}}(a,s.apply(a,l))}catch(e){i(t,e)}};var k=a||n,L="[replayer]",F={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function O(e){return e.type==c.tw.IncrementalSnapshot&&(e.data.source==c.yh.TouchMove||e.data.source==c.yh.MouseInteraction&&e.data.type==c.Y2.TouchStart)}var j=function(){function e(e,t){var r=this;if(this.mouseTail=null,this.tailPositions=[],this.emitter=k(),this.legacy_missingNodeRetryMap={},this.cache=(0,i.Df)(),this.imageMap=new Map,this.mirror=(0,A.bZ)(),this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,!(null==t?void 0:t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");var n={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:F};this.config=Object.assign({},n,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(c.SA.Resize,this.handleResize),this.setupDom(),this.treeIndex=new A.Ig,this.fragmentParentMap=new Map,this.elementStateMap=new Map,this.virtualStyleRulesMap=new Map,this.emitter.on(c.SA.Flush,(function(){var e,t,n,i,a,s,l,c,u=r.treeIndex.flush(),d=u.scrollMap,h=u.inputMap,f=u.mutationData;r.fragmentParentMap.forEach((function(e,t){return r.restoreRealParent(t,e)}));try{for(var p=(0,o.XA)(f.texts),m=p.next();!m.done;m=p.next()){var v=m.value;r.applyText(v,f)}}catch(t){e={error:t}}finally{try{m&&!m.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}try{for(var y=(0,o.XA)(r.virtualStyleRulesMap.keys()),g=y.next();!g.done;g=y.next()){var b=g.value;r.restoreNodeSheet(b)}}catch(e){n={error:e}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}r.fragmentParentMap.clear(),r.elementStateMap.clear(),r.virtualStyleRulesMap.clear();try{for(var S=(0,o.XA)(d.values()),x=S.next();!x.done;x=S.next())v=x.value,r.applyScroll(v,!0)}catch(e){a={error:e}}finally{try{x&&!x.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}try{for(var w=(0,o.XA)(h.values()),T=w.next();!T.done;T=w.next())v=T.value,r.applyInput(v)}catch(e){l={error:e}}finally{try{T&&!T.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}})),this.emitter.on(c.SA.PlayBack,(function(){r.firstFullSnapshot=null,r.mirror.reset()}));var a=new u([],(null==t?void 0:t.speed)||n.speed);this.service=function(e,t){var r=t.getCastFn,n=t.applyEventsSynchronously,i=t.emitter,a=x({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:m({lastPlayedEvent:function(e,t){return"CAST_EVENT"===t.type?t.payload.event:e.lastPlayedEvent}}),recordTimeOffset:m((function(e,t){var r=e.timeOffset;return"payload"in t&&"timeOffset"in t.payload&&(r=t.payload.timeOffset),(0,o.pi)((0,o.pi)({},e),{timeOffset:r,baselineTime:e.events[0].timestamp+r})})),play:function(e){var t,a,s,l,u,h=e.timer,f=e.events,p=e.baselineTime,m=e.lastPlayedEvent;h.clear();try{for(var v=(0,o.XA)(f),y=v.next();!y.done;y=v.next())d(y.value,p)}catch(e){t={error:e}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(t)throw t.error}}var g=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.type===c.tw.Meta&&n.timestamp<=t)return e.slice(r)}return e}(f,p),b=null==m?void 0:m.timestamp;(null==m?void 0:m.type)===c.tw.IncrementalSnapshot&&m.data.source===c.yh.MouseMove&&(b=m.timestamp+(null===(u=m.data.positions[0])||void 0===u?void 0:u.timeOffset)),p<(b||0)&&i.emit(c.SA.PlayBack);var S=new Array,x=new Array,w=function(e){if(b&&b<p&&(e.timestamp<=b||e===m))return"continue";if(e.timestamp<p)S.push(e);else{var t=r(e,!1);x.push({doAction:function(){t()},delay:e.delay})}};try{for(var T=(0,o.XA)(g),A=T.next();!A.done;A=T.next())w(A.value)}catch(e){s={error:e}}finally{try{A&&!A.done&&(l=T.return)&&l.call(T)}finally{if(s)throw s.error}}n(S),i.emit(c.SA.Flush),h.addActions(x),h.start()},pause:function(e){e.timer.clear()},resetLastPlayedEvent:m((function(e){return(0,o.pi)((0,o.pi)({},e),{lastPlayedEvent:null})})),startLive:m({baselineTime:function(e,t){return e.timer.toggleLiveMode(!0),e.timer.start(),"TO_LIVE"===t.type&&t.payload.baselineTime?t.payload.baselineTime:Date.now()}}),addEvent:m((function(e,t){var n=e.baselineTime,i=e.timer,a=e.events;if("ADD_EVENT"===t.type){var s=t.payload.event;d(s,n);var l=a.length-1;if(!a[l]||a[l].timestamp<=s.timestamp)a.push(s);else{for(var c=-1,u=0;u<=l;){var h=Math.floor((u+l)/2);a[h].timestamp<=s.timestamp?u=h+1:l=h-1}-1===c&&(c=u),a.splice(c,0,s)}var f=s.timestamp<n,p=r(s,f);f?p():i.isActive()&&i.addAction({doAction:function(){p()},delay:s.delay})}return(0,o.pi)((0,o.pi)({},e),{events:a})}))}});return T(a)}({events:e.map((function(e){return t&&t.unpackFn?t.unpackFn(e):e})).sort((function(e,t){return e.timestamp-t.timestamp})),timer:a,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe((function(e){r.emitter.emit(c.SA.StateChange,{player:e})})),this.speedService=T(x({id:"speed",context:{normalSpeed:-1,timer:a},initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:function(e,t){"payload"in t&&e.timer.setSpeed(t.payload.speed)},recordSpeed:m({normalSpeed:function(e){return e.timer.speed}}),restoreSpeed:function(e){e.timer.setSpeed(e.normalSpeed)}}})),this.speedService.start(),this.speedService.subscribe((function(e){r.emitter.emit(c.SA.StateChange,{speed:e})}));var s=this.service.state.context.events.find((function(e){return e.type===c.tw.Meta})),l=this.service.state.context.events.find((function(e){return e.type===c.tw.FullSnapshot}));if(s){var h=s.data,f=h.width,p=h.height;setTimeout((function(){r.emitter.emit(c.SA.Resize,{width:f,height:p})}),0)}l&&setTimeout((function(){r.firstFullSnapshot||(r.firstFullSnapshot=l,r.rebuildFullSnapshot(l),r.iframe.contentWindow.scrollTo(l.data.initialOffset))}),1),this.service.state.context.events.find(O)&&this.mouse.classList.add("touch-device")}return Object.defineProperty(e.prototype,"timer",{get:function(){return this.service.state.context.timer},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t){return this.emitter.on(e,t),this},e.prototype.off=function(e,t){return this.emitter.off(e,t),this},e.prototype.setConfig=function(e){var t=this;Object.keys(e).forEach((function(r){t.config[r]=e[r]})),this.config.skipInactive||this.backToNormal(),void 0!==e.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),void 0!==e.mouseTail&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))},e.prototype.getMetaData=function(){var e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}},e.prototype.getCurrentTime=function(){return this.timer.timeOffset+this.getTimeOffset()},e.prototype.getTimeOffset=function(){var e=this.service.state.context;return e.baselineTime-e.events[0].timestamp},e.prototype.getMirror=function(){return this.mirror},e.prototype.play=function(e){var t;void 0===e&&(e=0),this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}}),null===(t=this.iframe.contentDocument)||void 0===t||t.getElementsByTagName("html")[0].classList.remove("rrweb-paused"),this.emitter.emit(c.SA.Start)},e.prototype.pause=function(e){var t;void 0===e&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof e&&(this.play(e),this.service.send({type:"PAUSE"})),null===(t=this.iframe.contentDocument)||void 0===t||t.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(c.SA.Pause)},e.prototype.resume=function(e){void 0===e&&(e=0),console.warn("The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(c.SA.Resume)},e.prototype.startLive=function(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})},e.prototype.addEvent=function(e){var t=this,r=this.config.unpackFn?this.config.unpackFn(e):e;O(r)&&this.mouse.classList.add("touch-device"),Promise.resolve().then((function(){return t.service.send({type:"ADD_EVENT",payload:{event:r}})}))},e.prototype.enableInteract=function(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"},e.prototype.disableInteract=function(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"},e.prototype.resetCache=function(){this.cache=(0,i.Df)()},e.prototype.setupDom=function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");var e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(s(this.iframe.contentWindow,this.iframe.contentDocument),(0,A.OK)(this.iframe.contentWindow))},e.prototype.handleResize=function(e){var t,r;this.iframe.style.display="inherit";try{for(var n=(0,o.XA)([this.mouseTail,this.iframe]),i=n.next();!i.done;i=n.next()){var a=i.value;a&&(a.setAttribute("width",String(e.width)),a.setAttribute("height",String(e.height)))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.applyEventsSynchronously=function(e){var t,r;try{for(var n=(0,o.XA)(e),i=n.next();!i.done;i=n.next()){var a=i.value;switch(a.type){case c.tw.DomContentLoaded:case c.tw.Load:case c.tw.Custom:continue;case c.tw.FullSnapshot:case c.tw.Meta:case c.tw.Plugin:break;case c.tw.IncrementalSnapshot:if(a.data.source===c.yh.MediaInteraction)continue}this.getCastFn(a,!0)()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this.mousePos&&this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null,!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null},e.prototype.getCastFn=function(e,t){var r,n=this;switch(void 0===t&&(t=!1),e.type){case c.tw.DomContentLoaded:case c.tw.Load:break;case c.tw.Custom:r=function(){n.emitter.emit(c.SA.CustomEvent,e)};break;case c.tw.Meta:r=function(){return n.emitter.emit(c.SA.Resize,{width:e.data.width,height:e.data.height})};break;case c.tw.FullSnapshot:r=function(){if(n.firstFullSnapshot){if(n.firstFullSnapshot===e)return void(n.firstFullSnapshot=!0)}else n.firstFullSnapshot=!0;n.rebuildFullSnapshot(e,t),n.iframe.contentWindow.scrollTo(e.data.initialOffset)};break;case c.tw.IncrementalSnapshot:r=function(){var r,i;if(n.applyIncremental(e,t),!t&&(e===n.nextUserInteractionEvent&&(n.nextUserInteractionEvent=null,n.backToNormal()),n.config.skipInactive&&!n.nextUserInteractionEvent)){try{for(var a=(0,o.XA)(n.service.state.context.events),s=a.next();!s.done;s=a.next()){var l=s.value;if(!(l.timestamp<=e.timestamp)&&n.isUserInteraction(l)){l.delay-e.delay>1e4*n.speedService.state.context.timer.speed&&(n.nextUserInteractionEvent=l);break}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}if(n.nextUserInteractionEvent){var u=n.nextUserInteractionEvent.delay-e.delay,d={speed:Math.min(Math.round(u/5e3),n.config.maxSpeed)};n.speedService.send({type:"FAST_FORWARD",payload:d}),n.emitter.emit(c.SA.SkipStart,d)}}}}return function(){var i,a;r&&r();try{for(var s=(0,o.XA)(n.config.plugins||[]),l=s.next();!l.done;l=s.next())l.value.handler(e,t,{replayer:n})}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}n.service.send({type:"CAST_EVENT",payload:{event:e}});var u=n.service.state.context.events.length-1;if(e===n.service.state.context.events[u]){var d=function(){u<n.service.state.context.events.length-1||(n.backToNormal(),n.service.send("END"),n.emitter.emit(c.SA.Finish))};e.type===c.tw.IncrementalSnapshot&&e.data.source===c.yh.MouseMove&&e.data.positions.length?setTimeout((function(){d()}),Math.max(0,50-e.data.positions[0].timeOffset)):d()}n.emitter.emit(c.SA.EventCast,e)}},e.prototype.rebuildFullSnapshot=function(e,t){var r,n,a=this;if(void 0===t&&(t=!1),!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};var s=[];this.mirror.map=(0,i.VU)(e.data.node,{doc:this.iframe.contentDocument,afterAppend:function(e){a.collectIframeAndAttachDocument(s,e)},cache:this.cache})[1];var l=function(e,t){u.attachDocumentToIframe(e,t),u.newDocumentQueue=u.newDocumentQueue.filter((function(t){return t!==e}))},u=this;try{for(var d=(0,o.XA)(s),h=d.next();!h.done;h=d.next()){var f=h.value;l(f.mutationInQueue,f.builtNode)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}var p=this.iframe.contentDocument,m=p.documentElement,v=p.head;this.insertStyleRules(m,v),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(c.SA.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()},e.prototype.insertStyleRules=function(e,t){var r=document.createElement("style");e.insertBefore(r,t);var n,o=(n=this.config.blockClass,[".".concat(n," { background: currentColor }"),"noscript { display: none !important; }"]).concat(this.config.insertStyleRules);this.config.pauseAnimation&&o.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }");for(var i=0;i<o.length;i++)r.sheet.insertRule(o[i],i)},e.prototype.attachDocumentToIframe=function(e,t){var r,n,a=this,s=[];if(!t.contentDocument)for(var l=t.parentNode;l;){if(this.fragmentParentMap.has(l)){var c=l,u=this.fragmentParentMap.get(c);this.restoreRealParent(c,u);break}l=l.parentNode}(0,i.GQ)(e.node,{doc:t.contentDocument,map:this.mirror.map,hackCss:!0,skipChild:!1,afterAppend:function(e){if(a.collectIframeAndAttachDocument(s,e),e.__sn.type===i.Jq.Element&&"HTML"===e.__sn.tagName.toUpperCase()){var r=t.contentDocument,n=r.documentElement,o=r.head;a.insertStyleRules(n,o)}},cache:this.cache});var d=function(e,t){h.attachDocumentToIframe(e,t),h.newDocumentQueue=h.newDocumentQueue.filter((function(t){return t!==e}))},h=this;try{for(var f=(0,o.XA)(s),p=f.next();!p.done;p=f.next()){var m=p.value;d(m.mutationInQueue,m.builtNode)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}},e.prototype.collectIframeAndAttachDocument=function(e,t){if((0,A.N9)(t)){var r=this.newDocumentQueue.find((function(e){return e.parentId===t.__sn.id}));r&&e.push({mutationInQueue:r,builtNode:t})}},e.prototype.waitForStylesheetLoad=function(){var e,t=this,r=null===(e=this.iframe.contentDocument)||void 0===e?void 0:e.head;if(r){var n,o=new Set,i=this.service.state,a=function(){i=t.service.state};this.emitter.on(c.SA.Start,a),this.emitter.on(c.SA.Pause,a);var s=function(){t.emitter.off(c.SA.Start,a),t.emitter.off(c.SA.Pause,a)};r.querySelectorAll('link[rel="stylesheet"]').forEach((function(e){e.sheet||(o.add(e),e.addEventListener("load",(function(){o.delete(e),0===o.size&&-1!==n&&(i.matches("playing")&&t.play(t.getCurrentTime()),t.emitter.emit(c.SA.LoadStylesheetEnd),n&&clearTimeout(n),s())})))})),o.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(c.SA.LoadStylesheetStart),n=setTimeout((function(){i.matches("playing")&&t.play(t.getCurrentTime()),n=-1,s()}),this.config.loadTimeout))}},e.prototype.hasImageArg=function(e){var t,r;try{for(var n=(0,o.XA)(e),i=n.next();!i.done;i=n.next()){var a=i.value;if(a&&"object"==typeof a)if("rr_type"in a&&"args"in a){if(this.hasImageArg(a.args))return!0}else{if("rr_type"in a&&"HTMLImageElement"===a.rr_type)return!0;if(a instanceof Array&&this.hasImageArg(a))return!0}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!1},e.prototype.getImageArgs=function(e){var t,r,n=[];try{for(var i=(0,o.XA)(e),a=i.next();!a.done;a=i.next()){var s=a.value;s&&"object"==typeof s&&("rr_type"in s&&"args"in s?n.push.apply(n,(0,o.ev)([],(0,o.CR)(this.getImageArgs(s.args)),!1)):"rr_type"in s&&"HTMLImageElement"===s.rr_type?n.push(s.src):s instanceof Array&&n.push.apply(n,(0,o.ev)([],(0,o.CR)(this.getImageArgs(s)),!1)))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},e.prototype.preloadAllImages=function(){var e,t,r=this;this.service.state;var n=function(){r.service.state};this.emitter.on(c.SA.Start,n),this.emitter.on(c.SA.Pause,n);var i=function(e){e.type===c.tw.IncrementalSnapshot&&e.data.source===c.yh.CanvasMutation&&("commands"in e.data?e.data.commands.forEach((function(t){return r.preloadImages(t,e)})):a.preloadImages(e.data,e))},a=this;try{for(var s=(0,o.XA)(this.service.state.context.events),l=s.next();!l.done;l=s.next())i(l.value)}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}},e.prototype.preloadImages=function(e,t){var r=this;if("drawImage"!==e.property||"string"!=typeof e.args[0]||this.imageMap.has(t))this.hasImageArg(e.args)&&this.getImageArgs(e.args).forEach((function(e){var t=new Image;t.src=e,r.imageMap.set(e,t)}));else{var n=document.createElement("canvas"),o=n.getContext("2d"),i=null==o?void 0:o.createImageData(n.width,n.height);null==i||i.data,JSON.parse(e.args[0]),null==o||o.putImageData(i,0,0)}},e.prototype.applyIncremental=function(e,t){var r,n,i=this,a=e.data;switch(a.source){case c.yh.Mutation:t&&(a.adds.forEach((function(e){return i.treeIndex.add(e)})),a.texts.forEach((function(e){var t=i.mirror.getNode(e.id),r=null==t?void 0:t.parentNode;r&&i.virtualStyleRulesMap.has(r)&&i.virtualStyleRulesMap.delete(r),i.treeIndex.text(e)})),a.attributes.forEach((function(e){return i.treeIndex.attribute(e)})),a.removes.forEach((function(e){return i.treeIndex.remove(e,i.mirror)})));try{this.applyMutation(a,t)}catch(e){this.warn("Exception in mutation ".concat(e.message||e),a)}break;case c.yh.Drag:case c.yh.TouchMove:case c.yh.MouseMove:if(t){var s=a.positions[a.positions.length-1];this.mousePos={x:s.x,y:s.y,id:s.id,debugData:a}}else a.positions.forEach((function(r){var n={doAction:function(){i.moveAndHover(r.x,r.y,r.id,t,a)},delay:r.timeOffset+e.timestamp-i.service.state.context.baselineTime};i.timer.addAction(n)})),this.timer.addAction({doAction:function(){},delay:e.delay-(null===(r=a.positions[0])||void 0===r?void 0:r.timeOffset)});break;case c.yh.MouseInteraction:if(-1===a.id)break;var l=new Event(c.Y2[a.type].toLowerCase());if(!(S=this.mirror.getNode(a.id)))return this.debugNodeNotFound(a,a.id);this.emitter.emit(c.SA.MouseInteraction,{type:a.type,target:S});var u=this.config.triggerFocus;switch(a.type){case c.Y2.Blur:"blur"in S&&S.blur();break;case c.Y2.Focus:u&&S.focus&&S.focus({preventScroll:!0});break;case c.Y2.Click:case c.Y2.TouchStart:case c.Y2.TouchEnd:t?(a.type===c.Y2.TouchStart?this.touchActive=!0:a.type===c.Y2.TouchEnd&&(this.touchActive=!1),this.mousePos={x:a.x,y:a.y,id:a.id,debugData:a}):(a.type===c.Y2.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(a.x,a.y,a.id,t,a),a.type===c.Y2.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):a.type===c.Y2.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):a.type===c.Y2.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case c.Y2.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:S.dispatchEvent(l)}break;case c.yh.Scroll:if(-1===a.id)break;if(t){this.treeIndex.scroll(a);break}this.applyScroll(a,!1);break;case c.yh.ViewportResize:this.emitter.emit(c.SA.Resize,{width:a.width,height:a.height});break;case c.yh.Input:if(-1===a.id)break;if(t){this.treeIndex.input(a);break}this.applyInput(a);break;case c.yh.MediaInteraction:if(!(S=this.mirror.getNode(a.id)))return this.debugNodeNotFound(a,a.id);var d=S;try{a.currentTime&&(d.currentTime=a.currentTime),a.volume&&(d.volume=a.volume),a.muted&&(d.muted=a.muted),1===a.type&&d.pause(),0===a.type&&d.play()}catch(e){this.config.showWarning&&console.warn("Failed to replay media interactions: ".concat(e.message||e))}break;case c.yh.StyleSheetRule:if(!(S=this.mirror.getNode(a.id)))return this.debugNodeNotFound(a,a.id);var h,f=S,p=S.parentNode,m=this.fragmentParentMap.has(p),v=m?null:f.sheet;v||(this.virtualStyleRulesMap.has(S)?h=this.virtualStyleRulesMap.get(S):(h=[],this.virtualStyleRulesMap.set(S,h))),a.adds&&a.adds.forEach((function(e){var t=e.rule,r=e.index;if(v)try{if(Array.isArray(r)){var n=N(r),o=n.positions,i=n.index;_(v.cssRules,o).insertRule(t,i)}else i=void 0===r?void 0:Math.min(r,v.cssRules.length),v.insertRule(t,i)}catch(e){}else null==h||h.push({cssText:t,index:r,type:E.Insert})})),a.removes&&a.removes.forEach((function(e){var t=e.index;if(m)null==h||h.push({index:t,type:E.Remove});else try{if(Array.isArray(t)){var r=N(t),n=r.positions,o=r.index;_(v.cssRules,n).deleteRule(o||0)}else null==v||v.deleteRule(t)}catch(e){}}));break;case c.yh.StyleDeclaration:if(!(S=this.mirror.getNode(a.id)))return this.debugNodeNotFound(a,a.id);f=S;var y=S.parentNode,g=this.fragmentParentMap.has(y)?null:f.sheet,b=[];g||(this.virtualStyleRulesMap.has(S)?b=this.virtualStyleRulesMap.get(S):(b=[],this.virtualStyleRulesMap.set(S,b))),a.set&&(g?_(g.rules,a.index).style.setProperty(a.set.property,a.set.value,a.set.priority):b.push((0,o.pi)({type:E.SetProperty,index:a.index},a.set))),a.remove&&(g?_(g.rules,a.index).style.removeProperty(a.remove.property):b.push((0,o.pi)({type:E.RemoveProperty,index:a.index},a.remove)));break;case c.yh.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;var S;if(!(S=this.mirror.getNode(a.id)))return this.debugNodeNotFound(a,a.id);!function(e){var t=e.event,r=e.mutation,n=e.target,o=e.imageMap,i=e.errorHandler;try{var a="commands"in r?r.commands:[r];[c.FX.WebGL,c.FX.WebGL2].includes(r.type)?a.forEach((function(e){D({mutation:e,type:r.type,target:n,imageMap:o,errorHandler:i})})):a.forEach((function(e){!function(e){var t=e.event,r=e.mutation,n=e.target,o=e.imageMap,i=e.errorHandler;try{var a=n.getContext("2d");if(r.setter)return void(a[r.property]=r.args[0]);var s=a[r.property];if("drawImage"===r.property&&"string"==typeof r.args[0]){var l=o.get(t);r.args[0]=l,s.apply(a,r.args)}else s.apply(a,r.args)}catch(e){i(r,e)}}({event:t,mutation:e,target:n,imageMap:o,errorHandler:i})}))}catch(e){i(r,e)}}({event:e,mutation:a,target:S,imageMap:this.imageMap,errorHandler:this.warnCanvasMutationFailed.bind(this)});break;case c.yh.Font:try{var x=new FontFace(a.family,a.buffer?new Uint8Array(JSON.parse(a.fontSource)):a.fontSource,a.descriptors);null===(n=this.iframe.contentDocument)||void 0===n||n.fonts.add(x)}catch(e){this.config.showWarning&&console.warn(e)}}},e.prototype.applyMutation=function(e,t){var r,n,a=this;e.removes.forEach((function(t){var r=a.mirror.getNode(t.id);if(!r){if(e.removes.find((function(e){return e.id===t.parentId})))return;return a.warnNodeNotFound(e,t.id)}a.virtualStyleRulesMap.has(r)&&a.virtualStyleRulesMap.delete(r);var n=a.mirror.getNode(t.parentId);if(!n)return a.warnNodeNotFound(e,t.parentId);if(t.isShadow&&(0,A.He)(n)&&(n=n.shadowRoot),a.mirror.removeNodeFromMap(r),n){var o=null,i="__sn"in n?a.fragmentParentMap.get(n):void 0;i&&i.contains(r)?n=i:a.fragmentParentMap.has(r)&&(o=a.fragmentParentMap.get(r),a.fragmentParentMap.delete(r),r=o);try{n.removeChild(r)}catch(t){if(!(t instanceof DOMException))throw t;a.warn("parent could not remove child in mutation",n,i,r,o,e)}}}));var s=(0,o.pi)({},this.legacy_missingNodeRetryMap),l=[],c=function(e){var r,n,c,u;if(!a.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");var d=a.mirror.getNode(e.parentId);if(!d)return e.node.type===i.Jq.Document?a.newDocumentQueue.push(e):l.push(e);var h=null;a.iframe.contentDocument.contains?h=a.iframe.contentDocument.contains(d):a.iframe.contentDocument.body.contains&&(h=a.iframe.contentDocument.body.contains(d));var f=(null===(u=(c=d).getElementsByTagName)||void 0===u?void 0:u.call(c,"iframe").length)>0;if(t&&h&&!(0,A.N9)(d)&&!f){var p=document.createDocumentFragment();for(a.mirror.map[e.parentId]=p,a.fragmentParentMap.set(p,d),a.storeState(d);d.firstChild;)p.appendChild(d.firstChild);d=p}e.node.isShadow&&((0,A.He)(d)||d.attachShadow({mode:"open"}),d=d.shadowRoot);var m=null,v=null;if(e.previousId&&(m=a.mirror.getNode(e.previousId)),e.nextId&&(v=a.mirror.getNode(e.nextId)),function(e){var t=null;return e.nextId&&(t=a.mirror.getNode(e.nextId)),null!==e.nextId&&void 0!==e.nextId&&-1!==e.nextId&&!t}(e))return l.push(e);if(!e.node.rootId||a.mirror.getNode(e.node.rootId)){var y=e.node.rootId?a.mirror.getNode(e.node.rootId):a.iframe.contentDocument;if((0,A.N9)(d))a.attachDocumentToIframe(e,d);else{var g=(0,i.GQ)(e.node,{doc:y,map:a.mirror.map,skipChild:!0,hackCss:!0,cache:a.cache});if(-1!==e.previousId&&-1!==e.nextId){if("__sn"in d&&d.__sn.type===i.Jq.Element&&"textarea"===d.__sn.tagName&&e.node.type===i.Jq.Text)try{for(var b=(0,o.XA)(Array.from(d.childNodes)),S=b.next();!S.done;S=b.next()){var x=S.value;x.nodeType===d.TEXT_NODE&&d.removeChild(x)}}catch(e){r={error:e}}finally{try{S&&!S.done&&(n=b.return)&&n.call(b)}finally{if(r)throw r.error}}if(m&&m.nextSibling&&m.nextSibling.parentNode)d.insertBefore(g,m.nextSibling);else if(v&&v.parentNode)d.contains(v)?d.insertBefore(g,v):d.insertBefore(g,null);else{if(d===y)for(;y.firstChild;)y.removeChild(y.firstChild);d.appendChild(g)}if((0,A.N9)(g)){var w=a.newDocumentQueue.find((function(e){return e.parentId===g.__sn.id}));w&&(a.attachDocumentToIframe(w,g),a.newDocumentQueue=a.newDocumentQueue.filter((function(e){return e!==w})))}(e.previousId||e.nextId)&&a.legacy_resolveMissingNode(s,d,g,e)}else s[e.node.id]={node:g,mutation:e}}}};e.adds.forEach((function(e){c(e)}));for(var u=Date.now();l.length;){var d=(0,A.s6)(l);if(l.length=0,Date.now()-u>500){this.warn("Timeout in the loop, please check the resolve tree data:",d);break}try{for(var h=(r=void 0,(0,o.XA)(d)),f=h.next();!f.done;f=h.next()){var p=f.value;this.mirror.getNode(p.value.parentId)?(0,A.Fn)(p,(function(e){c(e)})):this.debug("Drop resolve tree since there is no parent for the root node.",p)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}}Object.keys(s).length&&Object.assign(this.legacy_missingNodeRetryMap,s),e.texts.forEach((function(t){var r=a.mirror.getNode(t.id);if(!r){if(e.removes.find((function(e){return e.id===t.id})))return;return a.warnNodeNotFound(e,t.id)}a.fragmentParentMap.has(r)&&(r=a.fragmentParentMap.get(r)),r.textContent=t.value})),e.attributes.forEach((function(t){var r=a.mirror.getNode(t.id);if(!r){if(e.removes.find((function(e){return e.id===t.id})))return;return a.warnNodeNotFound(e,t.id)}for(var n in a.fragmentParentMap.has(r)&&(r=a.fragmentParentMap.get(r)),t.attributes)if("string"==typeof n){var o=t.attributes[n];if(null===o)r.removeAttribute(n);else if("string"==typeof o)try{r.setAttribute(n,o)}catch(e){a.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",e)}else if("style"===n){var i=o,s=r;for(var l in i)if(!1===i[l])s.style.removeProperty(l);else if(i[l]instanceof Array){var c=i[l];s.style.setProperty(l,c[0],c[1])}else{var u=i[l];s.style.setProperty(l,u)}}}}))},e.prototype.applyScroll=function(e,t){var r=this.mirror.getNode(e.id);if(!r)return this.debugNodeNotFound(e,e.id);if(r===this.iframe.contentDocument)this.iframe.contentWindow.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if(r.__sn.type===i.Jq.Document)r.defaultView.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{r.scrollTop=e.y,r.scrollLeft=e.x}catch(e){}},e.prototype.applyInput=function(e){var t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch(e){}},e.prototype.applyText=function(e,t){var r=this.mirror.getNode(e.id);if(!r)return this.debugNodeNotFound(t,e.id);try{r.textContent=e.value}catch(e){}},e.prototype.legacy_resolveMissingNode=function(e,t,r,n){var o=n.previousId,i=n.nextId,a=o&&e[o],s=i&&e[i];if(a){var l=a,c=l.node,u=l.mutation;t.insertBefore(c,r),delete e[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(e,t,c,u)}if(s){var d=s;c=d.node,u=d.mutation,t.insertBefore(c,r.nextSibling),delete e[u.node.id],delete this.legacy_missingNodeRetryMap[u.node.id],(u.previousId||u.nextId)&&this.legacy_resolveMissingNode(e,t,c,u)}},e.prototype.moveAndHover=function(e,t,r,n,o){var i=this.mirror.getNode(r);if(!i)return this.debugNodeNotFound(o,r);var a=(0,A.vD)(i,this.iframe),s=e*a.absoluteScale+a.x,l=t*a.absoluteScale+a.y;this.mouse.style.left="".concat(s,"px"),this.mouse.style.top="".concat(l,"px"),n||this.drawMouseTail({x:s,y:l}),this.hoverElements(i)},e.prototype.drawMouseTail=function(e){var t=this;if(this.mouseTail){var r=!0===this.config.mouseTail?F:Object.assign({},F,this.config.mouseTail),n=r.lineCap,o=r.lineWidth,i=r.strokeStyle,a=r.duration,s=function(){if(t.mouseTail){var e=t.mouseTail.getContext("2d");e&&t.tailPositions.length&&(e.clearRect(0,0,t.mouseTail.width,t.mouseTail.height),e.beginPath(),e.lineWidth=o,e.lineCap=n,e.strokeStyle=i,e.moveTo(t.tailPositions[0].x,t.tailPositions[0].y),t.tailPositions.forEach((function(t){return e.lineTo(t.x,t.y)})),e.stroke())}};this.tailPositions.push(e),s(),setTimeout((function(){t.tailPositions=t.tailPositions.filter((function(t){return t!==e})),s()}),a/this.speedService.state.context.timer.speed)}},e.prototype.hoverElements=function(e){var t;null===(t=this.iframe.contentDocument)||void 0===t||t.querySelectorAll(".\\:hover").forEach((function(e){e.classList.remove(":hover")}));for(var r=e;r;)r.classList&&r.classList.add(":hover"),r=r.parentElement},e.prototype.isUserInteraction=function(e){return e.type===c.tw.IncrementalSnapshot&&e.data.source>c.yh.Mutation&&e.data.source<=c.yh.Input},e.prototype.backToNormal=function(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(c.SA.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))},e.prototype.restoreRealParent=function(e,t){this.mirror.map[t.__sn.id]=t,t.__sn.type===i.Jq.Element&&"textarea"===t.__sn.tagName&&e.textContent&&(t.value=e.textContent),t.appendChild(e),this.restoreState(t)},e.prototype.storeState=function(e){var t,r;if(e&&e.nodeType===e.ELEMENT_NODE){var n=e;(n.scrollLeft||n.scrollTop)&&this.elementStateMap.set(e,{scroll:[n.scrollLeft,n.scrollTop]}),"STYLE"===n.tagName&&function(e,t){var r;try{var n=Array.from((null===(r=e.sheet)||void 0===r?void 0:r.cssRules)||[]).map((function(e){return e.cssText}));t.set(e,[{type:E.Snapshot,cssTexts:n}])}catch(e){}}(n,this.virtualStyleRulesMap);var i=n.children;try{for(var a=(0,o.XA)(Array.from(i)),s=a.next();!s.done;s=a.next()){var l=s.value;this.storeState(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}},e.prototype.restoreState=function(e){var t,r;if(e.nodeType===e.ELEMENT_NODE){var n=e;if(this.elementStateMap.has(e)){var i=this.elementStateMap.get(e);i.scroll&&(n.scrollLeft=i.scroll[0],n.scrollTop=i.scroll[1]),this.elementStateMap.delete(e)}var a=n.children;try{for(var s=(0,o.XA)(Array.from(a)),l=s.next();!l.done;l=s.next()){var c=l.value;this.restoreState(c)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}}},e.prototype.restoreNodeSheet=function(e){var t=this.virtualStyleRulesMap.get(e);"STYLE"===e.nodeName&&t&&function(e,t){var r=t.sheet;r&&e.forEach((function(e){if(e.type===E.Insert)try{if(Array.isArray(e.index)){var n=N(e.index),i=n.positions,a=n.index;_(r.cssRules,i).insertRule(e.cssText,a)}else r.insertRule(e.cssText,e.index)}catch(e){}else if(e.type===E.Remove)try{if(Array.isArray(e.index)){var s=N(e.index);i=s.positions,a=s.index,_(r.cssRules,i).deleteRule(a||0)}else r.deleteRule(e.index)}catch(e){}else e.type===E.Snapshot?function(e,t){var r;try{var n=Array.from((null===(r=t.sheet)||void 0===r?void 0:r.cssRules)||[]).map((function(e){return e.cssText})),i=Object.entries(n).reverse(),a=n.length;i.forEach((function(r){var n,i=(0,o.CR)(r,2),s=i[0],l=i[1],c=e.indexOf(l);if(-1===c||c>a)try{null===(n=t.sheet)||void 0===n||n.deleteRule(Number(s))}catch(e){}a=c})),e.forEach((function(e,r){var n,o,i;try{(null===(o=null===(n=t.sheet)||void 0===n?void 0:n.cssRules[r])||void 0===o?void 0:o.cssText)!==e&&(null===(i=t.sheet)||void 0===i||i.insertRule(e,r))}catch(e){}}))}catch(e){}}(e.cssTexts,t):e.type===E.SetProperty?_(r.cssRules,e.index).style.setProperty(e.property,e.value,e.priority):e.type===E.RemoveProperty&&_(r.cssRules,e.index).style.removeProperty(e.property)}))}(t,e)},e.prototype.warnNodeNotFound=function(e,t){this.treeIndex.idRemoved(t)?this.warn("Node with id '".concat(t,"' was previously removed. "),e):this.warn("Node with id '".concat(t,"' not found. "),e)},e.prototype.warnCanvasMutationFailed=function(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)},e.prototype.debugNodeNotFound=function(e,t){this.treeIndex.idRemoved(t)?this.debug(L,"Node with id '".concat(t,"' was previously removed. "),e):this.debug(L,"Node with id '".concat(t,"' not found. "),e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.config.showWarning&&console.warn.apply(console,(0,o.ev)([L],(0,o.CR)(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.config.showDebug&&console.log.apply(console,(0,o.ev)([L],(0,o.CR)(e),!1))},e}()}}]);
//# sourceMappingURL=../sourcemaps/vendors-node_modules_lodash_first_js-node_modules_lodash_padStart_js-node_modules_rrweb_es_rr-518aa7.678857e190c243930306d6c3023d0960.js.map