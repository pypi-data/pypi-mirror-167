"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_dashboardsV2_detail_tsx-node_modules_downsample_methods_ASAP_js"],{"./app/components/globalSdkUpdateAlert.tsx":(t,e,a)=>{a.d(e,{_:()=>w}),a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.array.includes.js");var i=a("../node_modules/react/index.js"),s=a("./app/actionCreators/prompts.tsx"),r=a("./app/components/alert.tsx"),n=a("./app/constants/pageFilters.tsx"),o=a("./app/locale.tsx"),d=a("./app/stores/sidebarPanelStore.tsx"),l=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=a("./app/utils/promptIsDismissed.tsx"),c=a("./app/utils/useApi.tsx"),p=a("./app/utils/useOrganization.tsx"),u=a("./app/utils/usePageFilters.tsx"),g=a("./app/utils/withSdkUpdates.tsx"),m=a("./app/components/sidebar/types.tsx"),b=a("./app/components/button.tsx"),f=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function v(t){var e,a;const g=(0,c.Z)(),v=(0,p.Z)(),{selection:w}=(0,u.Z)(),[Z,y]=(0,i.useState)(!1),D=(0,i.useCallback)((()=>{(0,s.Xt)(g,{organizationId:v.id,feature:"sdk_updates",status:"snoozed"}),(0,l.Z)("sdk_updates.snoozed",{organization:v}),y(!1)}),[g,v]),x=(0,i.useCallback)((()=>{d.Z.activatePanel(m.z.Broadcasts),(0,l.Z)("sdk_updates.clicked",{organization:v})}),[v]);return(0,i.useEffect)((()=>{(0,l.Z)("sdk_updates.seen",{organization:v});let t=!1;return(0,s.vu)(g,{organizationId:v.id,feature:"sdk_updates"}).then((e=>{t||y(!(0,h.IB)(e))})),()=>{t=!0}}),[g,v]),Z&&null!==(e=t.sdkUpdates)&&void 0!==e&&e.length?(0===(null==w||null===(a=w.projects)||void 0===a?void 0:a.length)||(null==w?void 0:w.projects[0])===n.mP?t.sdkUpdates:t.sdkUpdates.filter((t=>{var e;return null==w||null===(e=w.projects)||void 0===e?void 0:e.includes(parseInt(t.projectId,10))}))).every((t=>0===t.suggestions.length))?null:(0,f.tZ)(r.Z,{type:"info",showIcon:!0,className:t.className,trailingItems:(0,f.BX)(i.Fragment,{children:[(0,f.tZ)(b.ZP,{priority:"link",size:"zero",title:(0,o.t)("Dismiss for the next two weeks"),onClick:D,children:(0,o.t)("Remind me later")}),(0,f.tZ)("span",{children:"|"}),(0,f.tZ)(b.ZP,{priority:"link",size:"zero",onClick:x,children:(0,o.t)("Review updates")})]}),children:(0,o.t)("You have outdated SDKs in your projects. Update them for important fixes and features.")}):null}v.displayName="InnerGlobalSdkUpdateAlert";const w=(0,g.Z)(v)},"./app/views/dashboardsV2/detail.tsx":(t,e,a)=>{a.d(e,{R:()=>wt,Z:()=>Ct});var i=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.array.includes.js"),a("../node_modules/core-js/modules/es.string.replace.js"),a("../node_modules/react/index.js")),n=a("../node_modules/react-router/es/index.js"),o=a("../node_modules/lodash/isEqual.js"),d=a.n(o),l=a("../node_modules/lodash/omit.js"),h=a.n(l),c=a("./app/actionCreators/dashboards.tsx"),p=a("./app/actionCreators/indicator.tsx"),u=a("./app/actionCreators/modal.tsx"),g=a("./app/components/breadcrumbs.tsx"),m=a("./app/components/datePageFilter.tsx"),b=a("./app/components/environmentPageFilter.tsx"),f=a("./app/components/hookOrDefault.tsx"),v=a("./app/components/layouts/thirds.tsx"),w=a("./app/components/modals/widgetViewerModal/utils.tsx"),Z=a("./app/components/noProjectMessage.tsx"),y=a("./app/components/organizations/pageFilterBar.tsx"),D=a("./app/components/organizations/pageFilters/container.tsx"),x=a("./app/components/projectPageFilter.tsx"),E=a("./app/components/sentryDocumentTitle.tsx"),S=a("./app/locale.tsx"),C=a("./app/styles/organization.tsx"),k=a("./app/styles/space.tsx"),P=a("./app/utils.tsx"),I=a("./app/utils/analytics.tsx"),z=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),A=a("./app/utils/discover/eventView.tsx"),j=a("./app/utils/performance/contexts/metricsCardinality.tsx"),_=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),W=a("./app/utils/withApi.tsx"),M=a("./app/utils/withOrganization.tsx"),q=a("./app/utils/withProjects.tsx"),R=a("./app/views/dashboardsV2/utils.tsx"),U=a("./app/views/performance/landing/metricsDataSwitcherAlert.tsx"),V=a("./app/views/performance/data.tsx"),N=a("./app/views/performance/landing/metricsDataSwitcher.tsx"),T=a("./app/views/dashboardsV2/widgetViewer/widgetViewerContext.tsx"),L=a("./app/components/acl/feature.tsx"),B=a("./app/components/acl/featureDisabled.tsx"),$=a("./app/components/assistant/guideAnchor.tsx"),F=a("./app/components/button.tsx"),X=a("./app/components/buttonBar.tsx"),K=a("./app/components/confirm.tsx"),O=a("./app/components/hovercard.tsx"),Y=a("./app/components/tooltip.tsx"),H=a("./app/icons/index.tsx"),G=a("./app/views/dashboardsV2/types.tsx"),J=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Q(t){let{organization:e,dashboardState:a,dashboards:i,hasUnsavedFilters:s,widgetLimitReached:n,onEdit:o,onCommit:d,onDelete:l,onCancel:h,onAddWidget:c}=t;function p(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,S.t)("Cancel");return(0,J.tZ)(F.ZP,{"data-test-id":"dashboard-cancel",onClick:t=>{t.preventDefault(),h()},children:t})}return[G.n3.EDIT,G.n3.PENDING_DELETE].includes(a)?(0,J.BX)(et,{gap:1,children:[p(),(0,J.tZ)(K.Z,{priority:"danger",message:(0,S.t)("Are you sure you want to delete this dashboard?"),onConfirm:l,disabled:i.length<=1,children:(0,J.tZ)(F.ZP,{"data-test-id":"dashboard-delete",priority:"danger",children:(0,S.t)("Delete")})}),(0,J.tZ)(F.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),d()},priority:"primary",children:(0,S.t)("Save and Finish")})]},"edit-controls"):a===G.n3.CREATE?(0,J.BX)(et,{gap:1,children:[p(),(0,J.tZ)(F.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),d()},priority:"primary",children:(0,S.t)("Save and Finish")})]},"create-controls"):a===G.n3.PREVIEW?(0,J.BX)(et,{gap:1,children:[p((0,S.t)("Go Back")),(0,J.tZ)(F.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),d()},priority:"primary",children:(0,S.t)("Add Dashboard")})]},"preview-controls"):(0,J.tZ)(et,{gap:1,children:(0,J.tZ)(tt,{children:t=>(0,J.BX)(r.Fragment,{children:[(0,J.tZ)(F.ZP,{"data-test-id":"dashboard-edit",onClick:t=>{t.preventDefault(),o()},icon:(0,J.tZ)(H.yl,{}),disabled:!t||s,title:s&&wt,priority:"default",children:(0,S.t)("Edit Dashboard")}),t?(0,J.tZ)(Y.Z,{title:(0,S._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:G.ZU}),disabled:!n,children:(0,J.tZ)($.Z,{disabled:!e.features.includes("dashboards-releases"),target:"releases_widget",children:(0,J.tZ)(F.ZP,{"data-test-id":"add-widget-library",priority:"primary",disabled:n,icon:(0,J.tZ)(H.N_,{isCircled:!0}),onClick:()=>{(0,z.Z)("dashboards_views.widget_library.opened",{organization:e}),c()},children:(0,S.t)("Add Widget")})})}):null]})})},"controls")}Q.displayName="Controls";const tt=t=>{let{children:e}=t;return(0,J.tZ)(L.Z,{hookName:"feature-disabled:dashboards-edit",features:["organizations:dashboards-edit"],renderDisabled:t=>(0,J.tZ)(O.uI,{body:(0,J.tZ)(B.Z,{features:t.features,hideHelpToggle:!0,featureName:(0,S.t)("Dashboard Editing")}),children:t.children(t)}),children:t=>{let{hasFeature:a}=t;return e(a)}})};tt.displayName="DashboardEditFeature";const et=(0,s.Z)(X.ZP,{target:"e78awt50"})("@media (max-width: ",(t=>t.theme.breakpoints.small),"){grid-auto-flow:row;grid-row-gap:",(0,k.Z)(1),";width:100%;}"),at=Q;var it=a("./app/views/dashboardsV2/dashboard.tsx"),st=a("./app/views/dashboardsV2/data.tsx"),rt=a("./app/utils/queryString.tsx"),nt=a("./app/utils/releases/releasesProvider.tsx"),ot=a("./app/utils/useOrganization.tsx"),dt=a("./app/utils/usePageFilters.tsx"),lt=a("./app/views/dashboardsV2/releasesSelectControl.tsx");function ht(t){var e,a;let{filters:i,hasUnsavedChanges:s,isEditingDashboard:n,isPreview:o,location:d,onCancel:l,onDashboardFilterChange:h,onSave:c}=t;const{selection:p}=(0,dt.Z)(),u=(0,ot.Z)(),g=null!==(e=(0,P.ri)(null===(a=d.query)||void 0===a?void 0:a[G.qA.RELEASE])?(0,rt.qP)(d.query[G.qA.RELEASE]):null==i?void 0:i[G.qA.RELEASE])&&void 0!==e?e:[];return(0,J.BX)(ct,{children:[(0,J.BX)(y.Z,{condensed:!0,children:[(0,J.tZ)(x.Z,{disabled:n}),(0,J.tZ)(b.Z,{disabled:n}),(0,J.tZ)(m.Z,{alignDropdown:"left",disabled:n})]}),(0,J.tZ)(L.Z,{features:["dashboards-top-level-filter"],children:(0,J.BX)(r.Fragment,{children:[(0,J.tZ)(pt,{children:(0,J.tZ)(ut,{children:(0,J.tZ)(nt.lR,{organization:u,selection:p,children:(0,J.tZ)(lt.Z,{handleChangeFilter:h,selectedReleases:g,isDisabled:n})})})}),s&&!n&&!o&&(0,J.BX)(pt,{children:[(0,J.tZ)(F.ZP,{priority:"primary",onClick:c,children:(0,S.t)("Save")}),(0,J.tZ)(F.ZP,{onClick:l,children:(0,S.t)("Cancel")})]})]})})]})}ht.displayName="FiltersBar";const ct=(0,s.Z)("div",{target:"eecuk2e2"})("display:flex;flex-direction:row;gap:",(0,k.Z)(1.5),";margin-bottom:",(0,k.Z)(2),";@media (max-width: ",(t=>t.theme.breakpoints.small),"){display:grid;grid-auto-flow:row;}"),pt=(0,s.Z)(X.ZP,{target:"eecuk2e1"})("display:grid;gap:",(0,k.Z)(1.5),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){display:flex;align-items:flex-start;gap:",(0,k.Z)(1.5),";}"),ut=(0,s.Z)("div",{target:"eecuk2e0"})("@media (min-width: ",(t=>t.theme.breakpoints.small),"){max-width:300px;}");var gt=a("./app/views/dashboardsV2/layoutUtils.tsx"),mt=a("./app/components/editableText.tsx");function bt(t){let{dashboard:e,isEditing:a,onUpdate:i}=t;return(0,J.tZ)("div",{children:e?(0,J.tZ)(mt.Z,{isDisabled:!a,value:e.title,onChange:t=>i({...e,title:t}),errorMessage:(0,S.t)("Please set a title for this dashboard"),autoSelect:!0}):(0,S.t)("Dashboards")})}bt.displayName="DashboardTitle";const ft=bt,vt=(0,S.t)("You have unsaved changes, are you sure you want to leave?"),wt=(0,S.t)("You have unsaved dashboard filters. You can save or discard them."),Zt=(0,f.Z)({hookName:"component:dashboards-header"});class yt extends r.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{dashboardState:this.props.initialState,modifiedDashboard:this.updateModifiedDashboard(this.props.initialState),widgetLimitReached:this.props.dashboard.widgets.length>=G.ZU,setData:t=>{this.setState(t)}}),(0,i.Z)(this,"onEdit",(()=>{const{dashboard:t}=this.props;(0,I.ec)({eventKey:"dashboards2.edit.start",eventName:"Dashboards2: Edit start",organization_id:parseInt(this.props.organization.id,10)}),this.setState({dashboardState:G.n3.EDIT,modifiedDashboard:(0,R.qk)(t)})})),(0,i.Z)(this,"onRouteLeave",(()=>{const{dashboard:t}=this.props,{modifiedDashboard:e}=this.state;if(![G.n3.VIEW,G.n3.PENDING_DELETE,G.n3.PREVIEW].includes(this.state.dashboardState)&&!d()(e,t))return vt})),(0,i.Z)(this,"onUnload",(t=>{const{dashboard:e}=this.props,{modifiedDashboard:a}=this.state;[G.n3.VIEW,G.n3.PENDING_DELETE,G.n3.PREVIEW].includes(this.state.dashboardState)||d()(a,e)||(t.preventDefault(),t.returnValue=vt)})),(0,i.Z)(this,"onDelete",(t=>()=>{const{api:e,organization:a,location:i}=this.props;if(null==t||!t.id)return;const s=this.state.dashboardState;this.setState({dashboardState:G.n3.PENDING_DELETE},(()=>{(0,c.iM)(e,a.slug,t.id).then((()=>{(0,p.S9)((0,S.t)("Dashboard deleted")),(0,I.ec)({eventKey:"dashboards2.delete",eventName:"Dashboards2: Delete",organization_id:parseInt(this.props.organization.id,10)}),n.browserHistory.replace({pathname:`/organizations/${a.slug}/dashboards/`,query:i.query})})).catch((()=>{this.setState({dashboardState:s})}))}))})),(0,i.Z)(this,"onCancel",(()=>{const{organization:t,dashboard:e,location:a,params:i}=this.props,{modifiedDashboard:s}=this.state;let r=!d()(s,e);if(e.widgets.every((t=>{let{layout:e}=t;return!(0,P.ri)(e)}))&&(r=!d()({...s,widgets:null==s?void 0:s.widgets.map((t=>h()(t,"layout")))},{...e,widgets:e.widgets.map((t=>h()(t,"layout")))})),!r||this.isPreview||confirm(vt)){if(i.dashboardId)return(0,I.ec)({eventKey:"dashboards2.edit.cancel",eventName:"Dashboards2: Edit cancel",organization_id:parseInt(this.props.organization.id,10)}),void this.setState({dashboardState:G.n3.VIEW,modifiedDashboard:null});(0,I.ec)({eventKey:"dashboards2.create.cancel",eventName:"Dashboards2: Create cancel",organization_id:parseInt(this.props.organization.id,10)}),n.browserHistory.replace({pathname:`/organizations/${t.slug}/dashboards/`,query:a.query})}})),(0,i.Z)(this,"handleChangeFilter",(t=>{const{dashboard:e,location:a}=this.props,{modifiedDashboard:i}=this.state,s=i||e;if(Object.keys(t).every((e=>{var a;return!(null!==(a=s.filters)&&void 0!==a&&a[e])&&0===t[e].length})))return;const r={};Object.keys(t).forEach((e=>{r[e]=t[e].length?t[e]:""})),d()(t,e.filters)||n.browserHistory.push({...a,query:{...a.query,...r}})})),(0,i.Z)(this,"handleUpdateWidgetList",(t=>{const{organization:e,dashboard:a,api:i,onDashboardUpdate:s,location:r}=this.props,{modifiedDashboard:o}=this.state,d=(0,gt.RI)(t),l=(0,gt.Sp)(d),h={...(0,R.qk)(o||a),widgets:(0,gt._F)(t,l)};this.setState({modifiedDashboard:h,widgetLimitReached:t.length>=G.ZU}),this.isEditing||this.isPreview||(0,c.Y)(i,e.slug,h).then((t=>{s&&(s(t),this.setState({modifiedDashboard:null})),(0,p.S9)((0,S.t)("Dashboard updated")),a&&t.id!==a.id&&n.browserHistory.replace({pathname:`/organizations/${e.slug}/dashboard/${t.id}/`,query:{...r.query}})}),(()=>{}))})),(0,i.Z)(this,"handleAddCustomWidget",(t=>{const{dashboard:e}=this.props,{modifiedDashboard:a}=this.state,i=a||e;this.onUpdateWidget([...i.widgets,t])})),(0,i.Z)(this,"onAddWidget",(()=>{const{organization:t,dashboard:e,router:a,location:i,params:{dashboardId:s}}=this.props;this.setState({modifiedDashboard:(0,R.qk)(e)}),s&&a.push({pathname:`/organizations/${t.slug}/dashboard/${s}/widget/new/`,query:{...i.query,source:G.EN.DASHBOARDS}})})),(0,i.Z)(this,"onCommit",(()=>{const{api:t,organization:e,location:a,dashboard:i,onDashboardUpdate:s}=this.props,{modifiedDashboard:r,dashboardState:o}=this.state;switch(o){case G.n3.PREVIEW:case G.n3.CREATE:if(r){this.isPreview&&(0,z.Z)("dashboards_manage.templates.add",{organization:e,dashboard_id:i.id,dashboard_title:i.title,was_previewed:!0});let s=r;var l;e.features.includes("dashboards-top-level-filter")&&(s={...(0,R.qk)(r),...(0,R.EK)(a),filters:null!==(l=(0,R.lM)(a))&&void 0!==l?l:r.filters}),(0,c.JR)(t,e.slug,s,this.isPreview).then((t=>{(0,p.S9)((0,S.t)("Dashboard created")),(0,I.ec)({eventKey:"dashboards2.create.complete",eventName:"Dashboards2: Create complete",organization_id:parseInt(e.id,10)}),this.setState({dashboardState:G.n3.VIEW}),n.browserHistory.replace({pathname:`/organizations/${e.slug}/dashboard/${t.id}/`,query:{query:h()(a.query,Object.values(G.qA))}})}),(()=>{}))}break;case G.n3.EDIT:if(r)return d()(i,r)?void this.setState({dashboardState:G.n3.VIEW,modifiedDashboard:null}):void(0,c.Y)(t,e.slug,r).then((t=>{s&&s(t),(0,p.S9)((0,S.t)("Dashboard updated")),(0,I.ec)({eventKey:"dashboards2.edit.complete",eventName:"Dashboards2: Edit complete",organization_id:parseInt(e.id,10)}),this.setState({dashboardState:G.n3.VIEW,modifiedDashboard:null}),i&&t.id!==i.id&&n.browserHistory.replace({pathname:`/organizations/${e.slug}/dashboard/${t.id}/`,query:{...a.query}})}),(()=>{}));this.setState({dashboardState:G.n3.VIEW,modifiedDashboard:null});break;case G.n3.VIEW:default:this.setState({dashboardState:G.n3.VIEW,modifiedDashboard:null})}})),(0,i.Z)(this,"setModifiedDashboard",(t=>{this.setState({modifiedDashboard:t})})),(0,i.Z)(this,"onUpdateWidget",(t=>{this.setState((e=>({...e,widgetLimitReached:t.length>=G.ZU,modifiedDashboard:{...e.modifiedDashboard||this.props.dashboard,widgets:t}})))}))}componentDidMount(){const{route:t,router:e}=this.props;e.setRouteLeaveHook(t,this.onRouteLeave),window.addEventListener("beforeunload",this.onUnload),this.checkIfShouldMountWidgetViewerModal()}componentDidUpdate(t){this.checkIfShouldMountWidgetViewerModal(),t.initialState!==this.props.initialState&&this.setState({dashboardState:this.props.initialState})}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}checkIfShouldMountWidgetViewerModal(){const{params:{widgetId:t,dashboardId:e},organization:a,dashboard:i,location:s,router:r}=this.props,{seriesData:n,tableData:o,pageLinks:d,totalIssuesCount:l,seriesResultsType:c}=this.state;if((0,w.X)(s.pathname)){var g;const b=(0,P.ri)(t)&&(null!==(g=i.widgets.find((e=>{let{id:a}=e;return a===String(t)})))&&void 0!==g?g:i.widgets[t]);var m;b?((0,u.openWidgetViewerModal)({organization:a,widget:b,seriesData:n,seriesResultsType:c,tableData:o,pageLinks:d,totalIssuesCount:l,onClose:()=>{const t=h()(s.query,Object.values(w.R));r.push({pathname:s.pathname.replace(/widget\/[0-9]+\/$/,""),query:t})},onEdit:()=>{const t=i.widgets.indexOf(b);e&&r.push({pathname:`/organizations/${a.slug}/dashboard/${e}/widget/${t}/edit/`,query:{...s.query,source:G.EN.DASHBOARDS}})}}),(0,z.Z)("dashboards_views.widget_viewer.open",{organization:a,widget_type:null!==(m=b.widgetType)&&void 0!==m?m:G.l9.DISCOVER,display_type:b.displayType})):(r.replace({pathname:`/organizations/${a.slug}/dashboard/${i.id}/`,query:s.query}),(0,p.Iw)((0,S.t)("Widget not found")))}}updateModifiedDashboard(t){const{dashboard:e}=this.props;switch(t){case G.n3.PREVIEW:case G.n3.CREATE:case G.n3.EDIT:return(0,R.qk)(e);default:return null}}get isPreview(){const{dashboardState:t}=this.state;return G.n3.PREVIEW===t}get isEditing(){const{dashboardState:t}=this.state;return[G.n3.EDIT,G.n3.CREATE,G.n3.PENDING_DELETE].includes(t)}get isWidgetBuilderRouter(){const{location:t,params:e,organization:a}=this.props,{dashboardId:i,widgetIndex:s}=e;return[`/organizations/${a.slug}/dashboards/new/widget/new/`,`/organizations/${a.slug}/dashboard/${i}/widget/new/`,`/organizations/${a.slug}/dashboards/new/widget/${s}/edit/`,`/organizations/${a.slug}/dashboard/${i}/widget/${s}/edit/`].includes(t.pathname)}get dashboardTitle(){const{dashboard:t}=this.props,{modifiedDashboard:e}=this.state;return e?e.title:t.title}renderWidgetBuilder(){const{children:t,dashboard:e}=this.props,{modifiedDashboard:a}=this.state;return(0,r.isValidElement)(t)?(0,r.cloneElement)(t,{dashboard:null!=a?a:e,onSave:this.isEditing?this.onUpdateWidget:this.handleUpdateWidgetList}):t}renderDefaultDashboardDetail(){const{organization:t,dashboard:e,dashboards:a,params:i,router:s,location:r}=this.props,{modifiedDashboard:n,dashboardState:o,widgetLimitReached:d}=this.state,{dashboardId:l}=i;return(0,J.tZ)(D.Z,{defaultSelection:{datetime:{start:null,end:null,utc:!1,period:st.GY}},children:(0,J.tZ)(C.JH,{children:(0,J.BX)(Z.Z,{organization:t,children:[(0,J.BX)(Dt,{children:[(0,J.tZ)(xt,{children:(0,J.tZ)(ft,{dashboard:null!=n?n:e,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing})}),(0,J.tZ)(at,{organization:t,dashboards:a,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(e),dashboardState:o,widgetLimitReached:d})]}),(0,J.tZ)(Zt,{organization:t}),(0,J.BX)(St,{condensed:!0,children:[(0,J.tZ)(x.Z,{}),(0,J.tZ)(b.Z,{}),(0,J.tZ)(m.Z,{alignDropdown:"left"})]}),(0,J.tZ)(j.BT,{organization:t,location:r,children:(0,J.tZ)(N.d,{organization:t,eventView:A.ZP.fromLocation(r),location:r,hideLoadingIndicator:!0,children:a=>(0,J.tZ)(_.kP,{location:r,forceTransactions:a.forceTransactionsOnly,children:(0,J.tZ)(it.ZP,{paramDashboardId:l,dashboard:null!=n?n:e,organization:t,isEditing:this.isEditing,widgetLimitReached:d,onUpdate:this.onUpdateWidget,handleUpdateWidgetList:this.handleUpdateWidgetList,handleAddCustomWidget:this.handleAddCustomWidget,isPreview:this.isPreview,router:s,location:r})})})})]})})})}getBreadcrumbLabel(){const{dashboardState:t}=this.state;let e=this.dashboardTitle;return t===G.n3.CREATE?e=(0,S.t)("Create Dashboard"):this.isPreview&&(e=(0,S.t)("Preview Dashboard")),e}renderDashboardDetail(){const{api:t,organization:e,dashboard:a,dashboards:i,params:s,router:r,location:o,newWidget:d,onSetNewWidget:l,onDashboardUpdate:u,projects:m}=this.props,{modifiedDashboard:b,dashboardState:f,widgetLimitReached:w,seriesData:y,setData:x}=this.state,{dashboardId:C}=s,k=e.features.includes("dashboards-top-level-filter")&&"default-overview"!==a.id&&f!==G.n3.CREATE&&(0,R.S$)(a,o),P=(0,V.C)(o,m),I=a.widgets.some(R.Gx);return(0,J.tZ)(E.Z,{title:a.title,orgSlug:e.slug,children:(0,J.tZ)(D.Z,{defaultSelection:{datetime:{start:null,end:null,utc:!1,period:st.GY}},children:(0,J.tZ)(Et,{children:(0,J.BX)(Z.Z,{organization:e,children:[(0,J.BX)(v.h4,{children:[(0,J.BX)(v.oB,{children:[(0,J.tZ)(g.Z,{crumbs:[{label:(0,S.t)("Dashboards"),to:`/organizations/${e.slug}/dashboards/`},{label:this.getBreadcrumbLabel()}]}),(0,J.tZ)(v.Dx,{children:(0,J.tZ)(ft,{dashboard:null!=b?b:a,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing})})]}),(0,J.tZ)(v.kP,{children:(0,J.tZ)(at,{organization:e,dashboards:i,hasUnsavedFilters:k,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(a),dashboardState:f,widgetLimitReached:w})})]}),(0,J.tZ)(v.uT,{children:(0,J.tZ)(v.or,{fullWidth:!0,children:(0,J.tZ)(j.BT,{organization:e,location:o,children:(0,J.tZ)(N.d,{organization:e,eventView:P,location:o,hideLoadingIndicator:!0,children:i=>(0,J.BX)(_.kP,{location:o,forceTransactions:i.forceTransactionsOnly,children:[I?(0,J.tZ)(U.v,{organization:e,eventView:P,projects:m,location:o,router:r,...i}):null,(0,J.tZ)(ht,{filters:(null!=b?b:a).filters,location:o,hasUnsavedChanges:k,isEditingDashboard:f!==G.n3.CREATE&&this.isEditing,isPreview:this.isPreview,onDashboardFilterChange:this.handleChangeFilter,onCancel:()=>{(0,R.Z5)(a,o),this.setState({modifiedDashboard:{...null!=b?b:a,filters:a.filters}})},onSave:()=>{var i;const s={...(0,R.qk)(null!=b?b:a),...(0,R.EK)(o),filters:null!==(i=(0,R.lM)(o))&&void 0!==i?i:(null!=b?b:a).filters};(0,c.Y)(t,e.slug,s).then((t=>{u&&(u(t),this.setState({modifiedDashboard:null})),(0,p.S9)((0,S.t)("Dashboard filters updated")),n.browserHistory.replace({pathname:`/organizations/${e.slug}/dashboard/${t.id}/`,query:h()(o.query,Object.values(G.qA))})}),(()=>{}))}}),(0,J.tZ)(T.M.Provider,{value:{seriesData:y,setData:x},children:(0,J.tZ)(it.ZP,{paramDashboardId:C,dashboard:null!=b?b:a,organization:e,isEditing:this.isEditing,widgetLimitReached:w,onUpdate:this.onUpdateWidget,handleUpdateWidgetList:this.handleUpdateWidgetList,handleAddCustomWidget:this.handleAddCustomWidget,router:r,location:o,newWidget:d,onSetNewWidget:l,isPreview:this.isPreview})})]})})})})})]})})})})}render(){const{organization:t}=this.props;return this.isWidgetBuilderRouter?this.renderWidgetBuilder():t.features.includes("dashboards-edit")?this.renderDashboardDetail():this.renderDefaultDashboardDetail()}}yt.displayName="DashboardDetail";const Dt=(0,s.Z)("div",{target:"e1anno2f3"})("display:grid;grid-template-columns:minmax(0, 1fr);grid-row-gap:",(0,k.Z)(2),";align-items:center;margin-bottom:",(0,k.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints.medium),"){grid-template-columns:minmax(0, 1fr) max-content;grid-column-gap:",(0,k.Z)(2),";height:40px;}"),xt=(0,s.Z)(v.Dx,{target:"e1anno2f2"})({name:"1i9vogi",styles:"margin-top:0"}),Et=(0,s.Z)(C.JH,{target:"e1anno2f1"})({name:"1hcx8jb",styles:"padding:0"}),St=(0,s.Z)(y.Z,{target:"e1anno2f0"})("margin-bottom:",(0,k.Z)(2),";"),Ct=(0,q.Z)((0,W.Z)((0,M.Z)(yt)))},"./app/views/performance/landing/metricsDataSwitcherAlert.tsx":(t,e,a)=>{a.d(e,{v:()=>b}),a("../node_modules/core-js/modules/es.array.includes.js");var i=a("../node_modules/react/index.js"),s=a("./app/actionCreators/pageFilters.tsx"),r=a("./app/components/alert.tsx"),n=a("./app/components/globalSdkUpdateAlert.tsx"),o=a("./app/components/links/externalLink.tsx"),d=a("./app/components/links/link.tsx"),l=a("./app/components/sidebar/types.tsx"),h=a("./app/locale.tsx"),c=a("./app/stores/sidebarPanelStore.tsx"),p=a("./app/views/performance/utils.tsx"),u=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=["javascript","node","python","ruby","native","react-native","dotnet","unity","flutter","dart","java","android"],m=["javascript.cordova","javascript.nextjs","native.minidumps"];function b(t){const e=(0,i.useCallback)((()=>{c.Z.activatePanel(l.z.Broadcasts)}),[]),a=(0,i.useMemo)((()=>{const e=(0,p.bY)(t.location,t.projects);if(e.length<1)return null;const a=e[0];if(m.includes(a))return null;const i=g.find((t=>a.includes(t)));return i?`https://docs.sentry.io/platforms/${i}/enriching-events/transaction-name/`:null}),[t.location,t.projects]),b=(0,i.useCallback)((()=>{(0,s.id)(t.compatibleProjects||[],t.router)}),[t.compatibleProjects,t.router]);if(!t.shouldNotifyUnnamedTransactions&&!t.shouldWarnIncompatibleSDK)return(0,u.tZ)(n._,{});const f=(0,p.uq)(t);if(t.shouldWarnIncompatibleSDK){const a=(0,u.tZ)(d.Z,{to:"",onClick:e,children:(0,h.t)("update your SDK version")});var v;return(0,p.rL)(t.eventView)?0===(null!==(v=t.compatibleProjects)&&void 0!==v?v:[]).length?(0,u.tZ)(r.Z,{type:"warning",showIcon:!0,"data-test-id":"landing-mep-alert-multi-project-all-incompatible",children:(0,h._N)("A few projects are incompatible with server side sampling. To enable this feature [updateSDK].",{updateSDK:a})}):(0,u.tZ)(r.Z,{type:"warning",showIcon:!0,"data-test-id":"landing-mep-alert-multi-project-incompatible",children:(0,h._N)("A few projects are incompatible with server side sampling. You can either [updateSDK] or [onlyViewCompatible]",{updateSDK:a,onlyViewCompatible:(0,u.tZ)(d.Z,{to:"",onClick:b,children:(0,h.t)("only view compatible projects.")})})}):(0,u.tZ)(r.Z,{type:"warning",showIcon:!0,"data-test-id":"landing-mep-alert-single-project-incompatible",children:(0,h._N)("Your project has an outdated SDK which is incompatible with server side sampling. To enable this feature [updateSDK].",{updateSDK:a})})}if(t.shouldNotifyUnnamedTransactions){const t=(0,u.tZ)(d.Z,{to:f,children:(0,h.t)("open them in Discover.")});return a?(0,u.tZ)(r.Z,{type:"warning",showIcon:!0,"data-test-id":"landing-mep-alert-unnamed-discover-or-set",children:(0,h._N)("You have some unparameterized transactions which are incompatible with server side sampling. You can either [setNames] or [discover]",{setNames:(0,u.tZ)(o.Z,{href:a,children:(0,h.t)("set names manually")}),discover:t})}):(0,u.tZ)(r.Z,{type:"warning",showIcon:!0,"data-test-id":"landing-mep-alert-unnamed-discover",children:(0,h._N)("You have some unparameterized transactions which are incompatible with server side sampling. You can [discover]",{discover:t})})}return null}},"../node_modules/downsample/methods/ASAP.js":(t,e)=>{function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var i={"PointValueExtractor<unknown>":t=>"function"==typeof t,XYDataPoint:t=>null!=t&&i.X(t.x)&&"number"==typeof t.y,X:t=>"number"==typeof t||t instanceof Date},s=t=>{for(var e=0,a=0;a<t.length;a+=1)e+=t[a];return e/t.length},r=(t,e)=>{for(var a=t.length,i=new Array(a),s=0;s<a;s++)i[s]=e(t[s],s);return i},n=t=>i["PointValueExtractor<unknown>"](t)?t:e=>e[t],o=(t,e)=>({x:t,y:e}),d=()=>({x:t=>{var e=i.XYDataPoint(t)?t.x:t[0];return e instanceof Date?e.getTime():e},y:t=>"y"in t?t.y:t[1],toPoint:o}),l=(t,e)=>new t.constructor(e),h=function(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],s=0,r=0;r<e;r++)s+=t[r];for(var n=e;n<=t.length;n++)(n-e)%a==0&&i.push(s/e),s+=t[n]-t[n-e];return i},c=t=>{var e=n(t.x),a=n(t.y),i=t.toPoint;return function(t,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===t.length)return t;for(var o,d=r(t,a),h=r(t,e),c=l(t,0),p=0,u=0;u<s;u++)p+=d[u];for(var g=s;g<=d.length;g++)(g-s)%n==0&&(o=i((h[g-s]+h[g-1])/2,p/s,g-s),c[c.length]=o),p+=d[g]-d[g-s];return c}};function p(t,e){if(t.length!=e.length)throw"Mismatched lengths";var a=t.length;0!=a&&(0==(a&a-1)?function(t,e){if(t.length!=e.length)throw"Mismatched lengths";var a=t.length;if(1!=a){for(var i=-1,s=0;s<32;s++)1<<s==a&&(i=s);if(-1==i)throw"Length is not a power of 2";for(var r=new Array(a/2),n=new Array(a/2),o=0;o<a/2;o++)r[o]=Math.cos(2*Math.PI*o/a),n[o]=Math.sin(2*Math.PI*o/a);for(var d=0;d<a;d++){var l=g(d,i);if(l>d){var h=t[d];t[d]=t[l],t[l]=h,h=e[d],e[d]=e[l],e[l]=h}}for(var c=2;c<=a;c*=2)for(var p=c/2,u=a/c,m=0;m<a;m+=c)for(var b=m,f=0;b<m+p;b++,f+=u){var v=t[b+p]*r[f]+e[b+p]*n[f],w=-t[b+p]*n[f]+e[b+p]*r[f];t[b+p]=t[b]-v,e[b+p]=e[b]-w,t[b]+=v,e[b]+=w}}}(t,e):function(t,e){if(t.length!=e.length)throw"Mismatched lengths";for(var a=t.length,i=1;i<2*a+1;)i*=2;for(var s=new Array(a),r=new Array(a),n=0;n<a;n++){var o=n*n%(2*a);s[n]=Math.cos(Math.PI*o/a),r[n]=Math.sin(Math.PI*o/a)}for(var d=new Array(i),l=new Array(i),h=0;h<a;h++)d[h]=t[h]*s[h]+e[h]*r[h],l[h]=-t[h]*r[h]+e[h]*s[h];for(var c=a;c<i;c++)d[c]=l[c]=0;var g=new Array(i),m=new Array(i);g[0]=s[0],m[0]=r[0];for(var b=1;b<a;b++)g[b]=g[i-b]=s[b],m[b]=m[i-b]=r[b];for(var f=a;f<=i-a;f++)g[f]=m[f]=0;var v=new Array(i),w=new Array(i);!function(t,e,a,i,s,r){if(t.length!=e.length||t.length!=a.length||a.length!=i.length||t.length!=s.length||s.length!=r.length)throw"Mismatched lengths";var n=t.length;t=t.slice(),e=e.slice(),a=a.slice(),i=i.slice(),p(t,e),p(a,i);for(var o=0;o<n;o++){var d=t[o]*a[o]-e[o]*i[o];e[o]=e[o]*a[o]+t[o]*i[o],t[o]=d}u(t,e);for(var l=0;l<n;l++)s[l]=t[l]/n,r[l]=e[l]/n}(d,l,g,m,v,w);for(var Z=0;Z<a;Z++)t[Z]=v[Z]*s[Z]+w[Z]*r[Z],e[Z]=-v[Z]*r[Z]+w[Z]*s[Z]}(t,e))}function u(t,e){p(e,t)}function g(t,e){for(var a=0,i=0;i<e;i++)a=a<<1|1&t,t>>>=1;return a}c(d());var m,b,f,v=t=>(t=>{for(var e=s(t),a=0,i=0;i<t.length;i+=1)a+=(t[i]-e)*(t[i]-e);return Math.sqrt(a/t.length)})((t=>{var e=t.length-1;if(e<1)return[];for(var a=new Array(e),i=0;i<e;i++)a[i]=t[i+1]-t[i];return a})(t)),w=t=>{for(var e,a,i=t.length,r=s(t),n=0,o=0,d=0;d<i;d++)n+=(a=(e=t[d]-r)*e)*a,o+=a;return i*n/(o*o)},Z=(m=d(),b=n(m.y),f=c(m),function t(e,i){if(0===e.length)return e;if(i<=0)throw new Error("Supplied non-positive resolution parameter to ASAP: ".concat(i));if(e.length>=2*i){var n=Math.trunc(e.length/i);return t(f(e,n,n),i)}for(var o=r(e,b),d=((t,e)=>{for(var i=t.length,r=s(t),n=Math.pow(2,Math.trunc(Math.log2(i))+1),o=new Array(n).fill(0),d=new Array(n).fill(0),l=0;l<i;l+=1)o[l]=t[l]-r;p(o,d);for(var h=0;h<o.length;h+=1)o[h]=Math.pow(o[h],2)+Math.pow(d[h],2),d[h]=0;u(o,d);for(var c=[],g=1;g<e;g++)c[g]=o[g]/o[0];var m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,a=t.length;if(a<=1)return[[],0];var i=0,s=[];if(t.length>1)for(var r=t[1]>t[0],n=1,o=2;o<t.length;o+=1)!r&&t[o]>t[o-1]?(n=o,r=!r):r&&t[o]>t[n]?n=o:r&&t[o]<t[o-1]&&(n>1&&t[n]>e&&(s.push(n),t[n]>i&&(i=t[n])),r=!r);if(s.length<=1)for(var d=2;d<a;d+=1)s.push(d);return[s,i]}(c),b=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var a=[],i=!0,s=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(s)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(m,2);return{correlations:c,peaks:b[0],maxCorrelation:b[1]}})(o,Math.round(o.length/10)),l=d.correlations,c=d.peaks,g=d.maxCorrelation,m=w(o),Z=v(o),y=1,D=1,x=-1,E=o.length/10,S=c.length-1;S>=0;S-=1){var C=c[S];if(C<D||1===C)break;if(!(Math.sqrt(1-l[C])*y>Math.sqrt(1-l[y])*C)){var k=h(o,C,1),P=w(k),I=v(k);P>=m&&(I<Z&&(Z=I,y=C),D=Math.round(Math.max(C*Math.sqrt((g-1)/(l[C]-1)),D)),x<0&&(x=S))}}return x>0&&(x<c.length-2&&(E=c[x+1]),D=Math.max(D,c[x]+1)),y=((t,e,a,i,s,r)=>{for(;t<=e;){var n=Math.round((t+e)/2),o=h(a,n,1);if(w(o)>=s){var d=v(o);d<i&&(r=n,i=d),t=n+1}else e=n-1}return r})(D,E,o,Z,m,y),f(e,y,1)});e.Cl=Z}}]);
//# sourceMappingURL=../sourcemaps/app_views_dashboardsV2_detail_tsx-node_modules_downsample_methods_ASAP_js.aaacf1cc90c3f7eb73af34e34240396e.js.map