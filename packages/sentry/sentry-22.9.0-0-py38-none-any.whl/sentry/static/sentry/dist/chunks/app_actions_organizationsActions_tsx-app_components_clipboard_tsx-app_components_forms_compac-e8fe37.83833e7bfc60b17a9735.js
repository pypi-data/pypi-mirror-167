"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actions_organizationsActions_tsx-app_components_clipboard_tsx-app_components_forms_compac-e8fe37"],{"./app/actions/organizationsActions.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const o=(0,s("../node_modules/reflux/src/index.js").createActions)(["update","setActive","changeSlug","remove","removeSuccess","removeError"])},"./app/actions/projectActions.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const o=(0,s("../node_modules/reflux/src/index.js").createActions)(["addTeam","addTeamError","addTeamSuccess","changeSlug","createSuccess","loadProjects","loadStats","loadStatsError","loadStatsForProjectSuccess","loadStatsSuccess","removeProject","removeProjectError","removeProjectSuccess","removeTeam","removeTeamError","removeTeamSuccess","reset","setActive","update","updateError","updateSuccess"])},"./app/components/badge.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/styles/space.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,o.Z)((e=>{let{children:t,text:s,...o}=e;return(0,n.tZ)("span",{...o,children:null!=t?t:s})}),{target:"e1gotaso0"})("display:inline-block;height:20px;min-width:20px;line-height:20px;border-radius:20px;padding:0 5px;margin-left:",(0,r.Z)(.5),";font-size:75%;font-weight:600;text-align:center;color:",(e=>{var t;return e.theme.badge[null!==(t=e.type)&&void 0!==t?t:"default"].color}),";background:",(e=>{var t;return e.theme.badge[null!==(t=e.type)&&void 0!==t?t:"default"].background}),";transition:background 100ms linear;position:relative;")},"./app/components/clipboard.tsx":(e,t,s)=>{s.d(t,{Z:()=>l}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("../node_modules/react/index.js"),r=s("../node_modules/react-dom/profiling.js"),n=s("../node_modules/copy-text-to-clipboard/index.js"),i=s("./app/actionCreators/indicator.tsx"),a=s("./app/locale.tsx");const l=function(e){let{hideMessages:t=!1,successMessage:s=(0,a.t)("Copied to clipboard"),errorMessage:l=(0,a.t)("Error copying to clipboard"),value:c,onSuccess:d,onError:u,hideUnsupported:p,children:h}=e;const[m,g]=(0,o.useState)(),f=(0,o.useCallback)((()=>{if(!(0,n.Z)(c))return t||(0,i.Iw)(l),void(null==u||u());t||(0,i.S9)(s),null==d||d()}),[c,u,d,l,s,t]);(0,o.useEffect)((()=>(null==m||m.addEventListener("click",f),()=>null==m?void 0:m.removeEventListener("click",f))),[f,m]);const j=(0,o.useCallback)((e=>{g((0,r.findDOMNode)(e))}),[]);return(!p||null!==(x=(y=document).queryCommandSupported)&&void 0!==x&&x.call(y,"copy"))&&(0,o.isValidElement)(h)?(0,o.cloneElement)(h,{ref:j}):null;var x,y}},"./app/components/forms/compactSelect.tsx":(e,t,s)=>{s.d(t,{Z:()=>Z});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("../node_modules/react-select/dist/index-4322c0ed.browser.esm.js"),i=s("../node_modules/@react-aria/button/dist/module.js"),a=s("../node_modules/@react-aria/focus/dist/module.js"),l=s("../node_modules/@react-aria/menu/dist/module.js"),c=s("../node_modules/@react-aria/overlays/dist/module.js"),d=s("../node_modules/@react-aria/utils/dist/module.js"),u=s("../node_modules/@react-stately/menu/dist/module.js"),p=s("./app/components/badge.tsx"),h=s("./app/components/button.tsx"),m=s("./app/components/dropdownButton.tsx"),g=s("./app/components/forms/selectControl.tsx"),f=s("./app/components/loadingIndicator.tsx"),j=s("./app/styles/space.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function y(e,t){return e.reduce(((e,s)=>s.options?e.concat(y(s.options,t)):s.value===t?e.concat(s):e),[])}const v=e=>{let{innerProps:t,...s}=e;const{hasValue:o,selectProps:i}=s,{isSearchable:a,menuTitle:l,isClearable:c,isLoading:d}=i;return(0,x.BX)(r.Fragment,{children:[(l||c||d)&&(0,x.BX)(I,{children:[(0,x.tZ)(T,{children:(0,x.tZ)("span",{children:l})}),d&&(0,x.tZ)(E,{size:12,mini:!0}),o&&c&&!d&&(0,x.tZ)(A,{type:"button",size:"zero",borderless:!0,onClick:()=>s.clearValue(),tabIndex:a?-1:void 0,children:"Clear"})]}),(0,x.tZ)(n.y.Control,{...s,innerProps:{...t,...!a&&{"aria-hidden":!0}}})]})};function S(e){var t,s;let{targetRef:o,onClose:n,offset:i=8,crossOffset:l=0,containerPadding:u=8,placement:p="bottom left",shouldCloseOnBlur:h=!0,isDismissable:m=!0,maxMenuHeight:g=400,minMenuWidth:f,children:j}=e;const y=(0,r.useRef)(null),{overlayProps:v}=(0,c.Ir)({isOpen:!0,onClose:n,shouldCloseOnBlur:h,isDismissable:m,shouldCloseOnInteractOutside:e=>{var t;return e&&o.current!==e&&!(null!==(t=o.current)&&void 0!==t&&t.contains(e))}},y),{overlayProps:S}=(0,c.tN)({targetRef:o,overlayRef:y,offset:i,crossOffset:l,placement:p,containerPadding:u,isOpen:!0}),b=null!==(t=S.style)&&void 0!==t&&t.maxHeight?Math.min(+(null===(s=S.style)||void 0===s?void 0:s.maxHeight),g):"none";return(0,x.tZ)(_,{ref:y,minWidth:f,...(0,d.dG)(v,S),children:(0,x.tZ)(a.MT,{restoreFocus:!0,autoFocus:!0,children:j(b)})})}function b(e){let{options:t,onChange:s,defaultValue:o,value:n,isDisabled:a,isSearchable:c=!1,multiple:p,placeholder:h="Searchâ€¦",onChangeValueMap:f,trigger:j,triggerLabel:b,triggerProps:Z,size:_="md",className:I,renderWrapAs:T,closeOnSelect:E=!0,menuTitle:A,onClose:M,...k}=e;const L=a||0===(null==t?void 0:t.length),q=(0,r.useRef)(null),z=(0,u.W)(k),{menuTriggerProps:B}=(0,l.u4)({type:"listbox",isDisabled:L},z,q),{buttonProps:O}=(0,i.U)({onPress:()=>z.toggle(),isDisabled:L,...B},q),[N,R]=(0,r.useState)(null!=n?n:o),F=(0,r.useCallback)((()=>{var e,s;const o=null!=n?n:N,i=(Array.isArray(o)?o:[o]).map((e=>y(t,e))).flat();return(0,x.BX)(r.Fragment,{children:[(0,x.tZ)(w,{children:null!==(e=null===(s=i[0])||void 0===s?void 0:s.label)&&void 0!==e?e:""}),i.length>1&&(0,x.tZ)(C,{text:"+"+(i.length-1)})]})}),[t,n,N]),[D,H]=(0,r.useState)(null);function $(e){const t=null!=f?f:e=>e.map((e=>e.value)),o=Array.isArray(e)?t(e):null==e?void 0:e.value;R(o),null==s||s(e),E&&!p&&z.close()}(0,r.useEffect)((()=>{H(F())}),[F]);const[U,V]=(0,r.useState)(),W=(0,r.useCallback)((async()=>{var e;await new Promise((e=>window.setTimeout(e)));const t=null===(e=q.current)||void 0===e?void 0:e.offsetWidth;t&&V(t)}),[q]);return(0,d.yU)({ref:q,onResize:W}),(0,r.useEffect)((()=>{void 0===window.ResizeObserver&&W()}),[W]),(0,x.BX)(P,{className:I,as:T,role:"presentation",children:[j?j({props:{size:_,isOpen:z.isOpen,...Z,...O},ref:q}):(0,x.tZ)(m.Z,{ref:q,size:_,isOpen:z.isOpen,...Z,...O,children:null!=b?b:D}),z.isOpen?(0,x.tZ)(S,{targetRef:q,onClose:function(){null==M||M(),z.close()},minMenuWidth:U,...k,children:e=>(0,x.tZ)(g.Z,{components:{Control:v,ClearIndicator:null},...k,options:t,value:null!=n?n:N,multiple:p,onChange:$,size:_,menuTitle:A,placeholder:h,isSearchable:c,menuHeight:e,menuPlacement:"bottom",menuIsOpen:!0,isCompact:!0,controlShouldRenderValue:!1,hideSelectedOptions:!1,menuShouldScrollIntoView:!1,blurInputOnSelect:!1,closeMenuOnSelect:!1,closeMenuOnScroll:!1,openMenuOnFocus:!0})}):null]})}v.displayName="CompactSelectControl",S.displayName="Menu",b.displayName="CompactSelect";const Z=b,P=(0,o.Z)("div",{target:"eqx4e0q7"})(""),w=(0,o.Z)("span",{target:"eqx4e0q6"})((e=>e.theme.overflowEllipsis)," text-align:left;"),C=(0,o.Z)(p.Z,{target:"eqx4e0q5"})({name:"enavay",styles:"flex-shrink:0;top:auto"}),_=(0,o.Z)("div",{target:"eqx4e0q4"})("max-width:calc(100% - ",(0,j.Z)(2),");border-radius:",(e=>e.theme.borderRadius),";background:",(e=>e.theme.backgroundElevated),";box-shadow:0 0 0 1px ",(e=>e.theme.translucentBorder),",",(e=>e.theme.dropShadowHeavy),";font-size:",(e=>e.theme.fontSizeMedium),";overflow:hidden;z-index:",(e=>e.theme.zIndex.dropdown),"!important;",(e=>e.minWidth&&`min-width: ${e.minWidth}px;`),";"),I=(0,o.Z)("div",{target:"eqx4e0q3"})("position:relative;display:flex;align-items:center;justify-content:space-between;padding:",(0,j.Z)(.75)," ",(0,j.Z)(1)," ",(0,j.Z)(.75)," ",(0,j.Z)(1.5),";box-shadow:0 1px 0 ",(e=>e.theme.translucentInnerBorder),";z-index:1;"),T=(0,o.Z)("span",{target:"eqx4e0q2"})("font-weight:600;font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.headingColor),";white-space:nowrap;margin-right:",(0,j.Z)(2),";"),E=(0,o.Z)(f.Z,{target:"eqx4e0q1"})("&&{margin:",(0,j.Z)(.5)," ",(0,j.Z)(.5)," ",(0,j.Z)(.5)," ",(0,j.Z)(1),";height:",(0,j.Z)(1.5),";width:",(0,j.Z)(1.5),";}"),A=(0,o.Z)(h.ZP,{target:"eqx4e0q0"})("font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.subText),";")},"./app/components/globalSelectionLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var o=s("../node_modules/react-router/es/index.js"),r=s("../node_modules/query-string/index.js"),n=s("./app/components/links/link.tsx"),i=s("./app/components/organizations/pageFilters/utils.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){const{location:t,to:s}=e,o=(0,i.GN)(null==t?void 0:t.query),l=Object.keys(o).length>0,c="object"==typeof s&&s.query?{...o,...s.query}:o;if(t){const t=l?"string"==typeof s?{pathname:s,query:c}:{...s,query:c}:{},o=l?{...e,to:t}:{...e,to:s};return(0,a.tZ)(n.Z,{...o})}let d={};"object"==typeof s&&s.search&&(d=r.parse(s.search)),d={...d,...o},"object"==typeof s&&s.query&&(d={...d,...s.query});const u=r.stringify(d),p=("string"==typeof s?s:s.pathname)+(u?`?${u}`:"");return(0,a.tZ)("a",{...e,href:p})}l.displayName="GlobalSelectionLink";const c=(0,o.withRouter)(l)},"./app/components/hovercard.tsx":(e,t,s)=>{s.d(t,{h4:()=>m,iz:()=>f,uI:()=>p,uT:()=>g});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("../node_modules/react-dom/profiling.js"),i=s("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),a=s("../node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs"),l=s("./app/components/overlay.tsx"),c=s("./app/styles/space.tsx"),d=s("./app/utils/useHoverOverlay.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{body:t,bodyClassName:s,children:o,className:c,containerClassName:p,header:f,offset:j=12,displayTimeout:x=100,tipBorderColor:y="translucentBorder",tipColor:v="backgroundElevated",...S}=e;const b=(0,i.a)(),{wrapTrigger:Z,isOpen:P,overlayProps:w,placement:C,arrowData:_,arrowProps:I}=(0,d._)("hovercard",{offset:j,displayTimeout:x,isHoverable:!0,className:p,...S});if(!t&&!f)return(0,u.tZ)(r.Fragment,{children:Z(o)});const T=P&&(0,u.tZ)(l.w,{zIndex:b.zIndex.hovercard,...w,children:(0,u.BX)(h,{animated:!0,arrowProps:{...I,size:20,background:v,border:y},originPoint:_,placement:C,className:c,children:[f?(0,u.tZ)(m,{children:f}):null,t?(0,u.tZ)(g,{className:s,children:t}):null]})});return(0,u.BX)(r.Fragment,{children:[Z(o),(0,n.createPortal)((0,u.tZ)(a.M,{children:T}),document.body)]})}p.displayName="Hovercard";const h=(0,o.Z)(l.a,{target:"e19qyv1k3"})("width:295px;line-height:1.2;h6{color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeExtraSmall),";margin-bottom:",(0,c.Z)(1),";text-transform:uppercase;}"),m=(0,o.Z)("div",{target:"e19qyv1k2"})("font-size:",(e=>e.theme.fontSizeMedium),";background:",(e=>e.theme.backgroundSecondary),";border-bottom:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadiusTop),";font-weight:600;word-wrap:break-word;padding:",(0,c.Z)(1.5),";"),g=(0,o.Z)("div",{target:"e19qyv1k1"})("padding:",(0,c.Z)(2),";min-height:30px;"),f=(0,o.Z)("div",{target:"e19qyv1k0"})("position:relative;margin-top:",(0,c.Z)(1.5),";margin-bottom:",(0,c.Z)(1),";&:before{display:block;position:absolute;content:'';height:1px;top:50%;left:",(0,c.Z)(2),";right:",(0,c.Z)(2),";background:",(e=>e.theme.innerBorder),";z-index:-1;}h6{display:inline;padding-right:",(0,c.Z)(1),";background:",(e=>e.theme.background),";}")},"./app/constants/pageFilters.tsx":(e,t,s)=>{s.d(t,{Nw:()=>n,V:()=>r,mP:()=>i,nF:()=>o}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");const o={START:"start",END:"end",UTC:"utc",PERIOD:"statsPeriod",PROJECT:"project",ENVIRONMENT:"environment"},r={PAGE_START:"pageStart",PAGE_END:"pageEnd",PAGE_UTC:"pageUtc",PAGE_PERIOD:"pageStatsPeriod"},n=[...Object.values({START:"start",END:"end",PERIOD:"period",UTC:"utc"}),"statsPeriod"],i=-1},"./app/stores/projectsStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>l}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("../node_modules/reflux/src/index.js"),r=s("./app/actions/projectActions.tsx"),n=s("./app/actions/teamActions.tsx"),i=s("./app/utils/makeSafeRefluxStore.ts");const a={itemsById:{},loading:!0,unsubscribeListeners:[],init(){this.reset(),this.unsubscribeListeners.push(this.listenTo(r.Z.addTeamSuccess,this.onAddTeam)),this.unsubscribeListeners.push(this.listenTo(r.Z.changeSlug,this.onChangeSlug)),this.unsubscribeListeners.push(this.listenTo(r.Z.createSuccess,this.onCreateSuccess)),this.unsubscribeListeners.push(this.listenTo(r.Z.loadProjects,this.loadInitialData)),this.unsubscribeListeners.push(this.listenTo(r.Z.loadStatsSuccess,this.onStatsLoadSuccess)),this.unsubscribeListeners.push(this.listenTo(r.Z.removeTeamSuccess,this.onRemoveTeam)),this.unsubscribeListeners.push(this.listenTo(r.Z.reset,this.reset)),this.unsubscribeListeners.push(this.listenTo(r.Z.updateSuccess,this.onUpdateSuccess)),this.unsubscribeListeners.push(this.listenTo(n.Z.removeTeamSuccess,this.onDeleteTeam))},reset(){this.itemsById={},this.loading=!0},loadInitialData(e){const t=e.map((e=>[e.id,e]));this.itemsById=Object.fromEntries(t),this.loading=!1,this.trigger(new Set(Object.keys(this.itemsById)))},onChangeSlug(e,t){const s=this.getBySlug(e);if(!s)return;const o={...s,slug:t};this.itemsById={...this.itemsById,[o.id]:o},this.trigger(new Set([s.id]))},onCreateSuccess(e){this.itemsById={...this.itemsById,[e.id]:e},this.trigger(new Set([e.id]))},onUpdateSuccess(e){const t=this.getById(e.id);if(!t)return;const s={...t,...e};this.itemsById={...this.itemsById,[t.id]:s},this.trigger(new Set([e.id]))},onStatsLoadSuccess(e){const t=Object.entries(e||{}).filter((e=>{let[t]=e;return t in this.itemsById}));t.forEach((e=>{let[t,s]=e;this.itemsById[t].stats=s}));const s=t.map((e=>{let[t]=e;return t}));this.trigger(new Set(s))},onDeleteTeam(e){const t=this.getAll().filter((t=>{let{teams:s}=t;return s.find((t=>{let{slug:s}=t;return s===e}))}));t.forEach((t=>this.removeTeamFromProject(e,t)));const s=t.map((e=>e.id));this.trigger(new Set(s))},onRemoveTeam(e,t){const s=this.getBySlug(t);s&&(this.removeTeamFromProject(e,s),this.trigger(new Set([s.id])))},onAddTeam(e,t){const s=this.getBySlug(t);if(!s)return;const o={...s,teams:[...s.teams,e]};this.itemsById={...this.itemsById,[s.id]:o},this.trigger(new Set([s.id]))},removeTeamFromProject(e,t){const s=t.teams.filter((t=>{let{slug:s}=t;return s!==e})),o={...t,teams:s};this.itemsById={...this.itemsById,[t.id]:o}},isLoading(){return this.loading},getAll(){return Object.values(this.itemsById).sort(((e,t)=>e.slug.localeCompare(t.slug)))},getById(e){return this.getAll().find((t=>t.id===e))},getBySlug(e){return this.getAll().find((t=>t.slug===e))},getState(){return{projects:this.getAll(),loading:this.loading}}},l=(0,o.createStore)((0,i.Y)(a))},"./app/utils/parseLinkHeader.tsx":(e,t,s)=>{function o(e){if(null===e||""===e)return{};const t=e.split(","),s={};return t.forEach((e=>{const t=/<([^>]+)>; rel="([^"]+)"(?:; results="([^"]+)")?(?:; cursor="([^"]+)")?/g.exec(e),o="true"===t[3]||"false"!==t[3]&&null;s[t[2]]={href:t[1],results:o,cursor:t[4]}})),s}s.d(t,{Z:()=>o})},"./app/utils/projects.tsx":(e,t,s)=>{s.d(t,{Z:()=>x});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("../node_modules/lodash/memoize.js"),i=s.n(n),a=s("../node_modules/lodash/partition.js"),l=s.n(a),c=s("../node_modules/lodash/uniqBy.js"),d=s.n(c),u=s("./app/actions/projectActions.tsx"),p=s("./app/stores/projectsStore.tsx"),h=s("./app/utils.tsx"),m=s("./app/utils/parseLinkHeader.tsx"),g=s("./app/utils/withApi.tsx"),f=s("./app/utils/withProjects.tsx");class j extends r.Component{constructor(){var e;super(...arguments),e=this,(0,o.Z)(this,"state",{fetchedProjects:[],projectsFromStore:[],initiallyLoaded:!1,fetching:!1,isIncomplete:null,hasMore:null,prevSearch:null,nextCursor:null,fetchError:null}),(0,o.Z)(this,"fetchQueue",new Set),(0,o.Z)(this,"getProjectsMap",i()((e=>new Map(e.map((e=>[e.slug,e])))))),(0,o.Z)(this,"getProjectsIdMap",i()((e=>new Map(e.map((e=>[parseInt(e.id,10),e])))))),(0,o.Z)(this,"loadSpecificProjects",(()=>{const{slugs:e,projects:t}=this.props,s=this.getProjectsMap(t),[o,r]=l()(e,(e=>s.has(e))),n=o.map((e=>s.get(e))).filter(h.ri);r.forEach((e=>this.fetchQueue.add(e))),this.setState({fetchedProjects:r.map((e=>({slug:e}))),initiallyLoaded:!!o.length,projectsFromStore:n}),r.length&&this.fetchSpecificProjects()})),(0,o.Z)(this,"loadSpecificProjectsFromIds",(()=>{const{projectIds:e,projects:t}=this.props,s=this.getProjectsIdMap(t),[o,r]=l()(e,(e=>s.has(e)));if(r.length)return void this.loadAllProjects();const n=o.map((e=>s.get(e))).filter(h.ri);this.setState({initiallyLoaded:!!o.length,projectsFromStore:n})})),(0,o.Z)(this,"fetchSpecificProjects",(async()=>{const{api:e,orgId:t,passthroughPlaceholderProject:s}=this.props;if(!this.fetchQueue.size)return;this.setState({fetching:!0});let o=[],r=null;try{const{results:s}=await y(e,t,{slugs:Array.from(this.fetchQueue)});o=s}catch(e){console.error(e),r=e}const n=this.getProjectsMap(o),i=Array.from(this.fetchQueue).map((e=>n.has(e)?n.get(e):s?{slug:e}:null)).filter(h.ri);this.setState({fetchedProjects:i,isIncomplete:this.fetchQueue.size!==o.length,initiallyLoaded:!0,fetching:!1,fetchError:r}),this.fetchQueue.clear()})),(0,o.Z)(this,"loadAllProjects",(async()=>{const{api:e,orgId:t,limit:s,allProjects:o}=this.props;this.setState({fetching:!0});try{const{results:r,hasMore:n,nextCursor:i}=await y(e,t,{limit:s,allProjects:o});this.setState({fetching:!1,fetchedProjects:r,initiallyLoaded:!0,hasMore:n,nextCursor:i})}catch(e){console.error(e),this.setState({fetching:!1,fetchedProjects:[],initiallyLoaded:!0,fetchError:e})}})),(0,o.Z)(this,"handleSearch",(async function(t){let{append:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{api:o,orgId:r,limit:n}=e.props,{prevSearch:i}=e.state,a=e.state.nextCursor;e.setState({fetching:!0});try{const{results:l,hasMore:c,nextCursor:u}=await y(o,r,{search:t,limit:n,prevSearch:i,cursor:a});e.setState((e=>{let o;return o=s?d()([...e.fetchedProjects,...l],(e=>{let{slug:t}=e;return t})):l,{fetchedProjects:o,hasMore:c,fetching:!1,prevSearch:t,nextCursor:u}}))}catch(t){console.error(t),e.setState({fetching:!1,fetchError:t})}}))}componentDidMount(){const{slugs:e,projectIds:t}=this.props;null!=e&&e.length?this.loadSpecificProjects():null!=t&&t.length?this.loadSpecificProjectsFromIds():this.loadAllProjects()}componentDidUpdate(e){const{projects:t}=this.props;t!==e.projects&&this.updateProjectsFromStore()}updateProjectsFromStore(){const{allProjects:e,projects:t,slugs:s}=this.props;if(e)this.setState({fetchedProjects:t});else if(null!=s&&s.length){const e=this.getProjectsMap(t),o=s.map((t=>e.get(t))).filter(h.ri);this.setState({projectsFromStore:o})}}render(){const{slugs:e,children:t}=this.props;return t({projects:this.state.initiallyLoaded?[...this.state.fetchedProjects,...this.state.projectsFromStore]:e&&e.map((e=>({slug:e})))||[],isIncomplete:this.state.isIncomplete,fetching:this.state.fetching,hasMore:this.state.hasMore,onSearch:this.handleSearch,initiallyLoaded:this.state.initiallyLoaded,fetchError:this.state.fetchError})}}j.displayName="BaseProjects",(0,o.Z)(j,"defaultProps",{passthroughPlaceholderProject:!0});const x=(0,f.Z)((0,g.Z)(j));async function y(e,t){let{slugs:s,search:o,limit:r,prevSearch:n,cursor:i,allProjects:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l={collapse:["latestDeploys"]};if(s&&s.length&&(l.query=s.map((e=>`slug:${e}`)).join(" ")),o&&(l.query=`${l.query?`${l.query} `:""}${o}`),(n||o)&&n!==o||!i||(l.cursor=i),r&&(l.per_page=r),a){const e=p.Z.getAll();if(!p.Z.isLoading())return{results:e,hasMore:!1};l.all_projects=1}let c=!1,d=null;const[h,,g]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:l}),f=null==g?void 0:g.getResponseHeader("Link");if(f){const e=(0,m.Z)(f);c=e&&(e.next.results||e.previous.results),d=e.next.cursor}return a&&u.Z.loadProjects(h),{results:h,hasMore:c,nextCursor:d}}},"./app/utils/selectText.tsx":(e,t,s)=>{function o(e){if(e instanceof HTMLInputElement&&"text"===e.type)e.select();else if(e instanceof Node&&window.getSelection){const t=document.createRange();t.selectNode(e);const s=window.getSelection();s&&(s.removeAllRanges(),s.addRange(t))}}s.d(t,{e:()=>o})},"./app/utils/useApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var o=s("../node_modules/react/index.js"),r=s("./app/api.tsx");const n=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(0,o.useRef)();void 0===s.current&&void 0===t&&(s.current=new r.KU);const n=null!=t?t:s.current,i=(0,o.useCallback)((()=>{e||n.clear()}),[n,e]);return(0,o.useEffect)((()=>i),[i]),n}},"./app/utils/useProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>h}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js");var o=s("../node_modules/react/index.js"),r=s("../node_modules/lodash/uniqBy.js"),n=s.n(r),i=s("./app/actions/projectActions.tsx"),a=s("./app/stores/organizationStore.tsx"),l=s("./app/stores/projectsStore.tsx"),c=s("./app/stores/useLegacyStore.tsx"),d=s("./app/utils/parseLinkHeader.tsx"),u=s("./app/utils/useApi.tsx");async function p(e,t){let{slugs:s,search:o,limit:r,lastSearch:n,cursor:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={collapse:["latestDeploys"]};var l;void 0!==s&&s.length>0&&(a.query=s.map((e=>`slug:${e}`)).join(" ")),o&&(a.query=`${null!==(l=a.query)&&void 0!==l?l:""}${o}`.trim());const c=!n&&!o||n===o;c&&i&&(a.cursor=i),void 0!==r&&(a.per_page=r);let u=!1,p=null;const[h,,m]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:a}),g=null==m?void 0:m.getResponseHeader("Link");if(g){var f,j,x;const e=(0,d.Z)(g);u=(null==e||null===(f=e.next)||void 0===f?void 0:f.results)||(null==e||null===(j=e.previous)||void 0===j?void 0:j.results),p=null==e||null===(x=e.next)||void 0===x?void 0:x.cursor}return{results:h,hasMore:u,nextCursor:p}}const h=function(){var e;let{limit:t,slugs:s,orgId:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=(0,u.Z)(),{organization:h}=(0,c.X)(a.Z),m=(0,c.X)(l.Z),g=null!=r?r:null==h?void 0:h.slug,f=new Set(m.projects.map((e=>e.slug))),j=null!==(e=null==s?void 0:s.filter((e=>!f.has(e))))&&void 0!==e?e:[],x=j.length>0,[y,v]=(0,o.useState)({initiallyLoaded:!m.loading&&!x,fetching:x,hasMore:null,lastSearch:null,nextCursor:null,fetchError:null}),S=(0,o.useRef)(null);async function b(){if(void 0!==g){v({...y,fetching:!0});try{const{results:e,hasMore:s,nextCursor:o}=await p(d,g,{slugs:j,limit:t}),r=n()([...m.projects,...e],(e=>{let{slug:t}=e;return t}));i.Z.loadProjects(r),v({...y,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:o})}catch(e){console.error(e),v({...y,fetching:!1,initiallyLoaded:!m.loading,fetchError:e})}}else console.error("Cannot use useProjects({slugs}) without an organization in context")}async function Z(e){const{lastSearch:s}=y,o=y.nextCursor;if(""!==e)if(void 0!==g){v({...y,fetching:!0});try{d.clear();const{results:r,hasMore:a,nextCursor:l}=await p(d,g,{search:e,limit:t,lastSearch:s,cursor:o}),c=n()([...m.projects,...r],(e=>{let{slug:t}=e;return t}));c.length>m.projects.length&&i.Z.loadProjects(c),v({...y,hasMore:a,fetching:!1,lastSearch:e,nextCursor:l})}catch(e){console.error(e),v({...y,fetching:!1,fetchError:e})}}else console.error("Cannot use useProjects.onSearch without an organization in context")}void 0!==s&&(null===S.current&&(S.current=new Set(s)),(s.length!==S.current.size||s.some((e=>{var t;return!(null!==(t=S.current)&&void 0!==t&&t.has(e))})))&&(S.current=new Set(s))),(0,o.useEffect)((()=>{x&&b()}),[S.current]),(0,o.useEffect)((()=>{const e=!m.loading;y.initiallyLoaded!==e&&(x||v({...y,initiallyLoaded:e}))}),[m.loading]);const{initiallyLoaded:P,fetching:w,fetchError:C,hasMore:_}=y,I=s?m.projects.filter((e=>s.includes(e.slug))):m.projects,T=j.map((e=>({slug:e}))),E={projects:I,placeholders:T,fetching:w||m.loading,initiallyLoaded:P,fetchError:C,hasMore:_,onSearch:Z};return E}},"./app/utils/withApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./app/utils/getDisplayName.tsx"),r=s("./app/utils/useApi.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=s=>{let{api:o,...i}=s;const a=(0,r.Z)({api:o,...t});return(0,n.tZ)(e,{...i,api:a})};return s.displayName=`withApi(${(0,o.Z)(e)})`,s}},"./app/utils/withProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./app/utils/getDisplayName.tsx"),r=s("./app/utils/useProjects.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){const t=t=>{const{projects:s,initiallyLoaded:o}=(0,r.Z)(),i=!o;return(0,n.tZ)(e,{...t,projects:s,loadingProjects:i})};return t.displayName=`withProjects(${(0,o.Z)(e)})`,t}}}]);
//# sourceMappingURL=../sourcemaps/app_actions_organizationsActions_tsx-app_components_clipboard_tsx-app_components_forms_compac-e8fe37.1984420be9dcbd776c4a8b35f45a02db.js.map