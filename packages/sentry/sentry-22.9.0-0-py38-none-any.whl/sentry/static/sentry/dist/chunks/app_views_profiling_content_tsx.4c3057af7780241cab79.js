"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_content_tsx"],{"./app/components/charts/areaChart.tsx":(e,t,n)=>{n.d(t,{T:()=>s});var r=n("./app/components/charts/series/lineSeries.tsx"),o=n("./app/components/charts/baseChart.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){let{series:t,stacked:n,colors:s,...a}=e;return(0,i.tZ)(o.Z,{...a,"data-test-id":"area-chart",colors:s,series:t.map(((e,t)=>{let{seriesName:o,data:i,...a}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.Z)({...e})}({stack:n?"area":void 0,name:o,data:i.map((e=>{let{name:t,value:n}=e;return[t,n]})),lineStyle:{color:null==s?void 0:s[t],opacity:1,width:.4},areaStyle:{color:null==s?void 0:s[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...a})}))})}s.displayName="AreaChart"},"./app/components/charts/chartZoom.tsx":(e,t,n)=>{n.d(t,{Z:()=>y});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),i=n("../node_modules/moment/moment.js"),s=n.n(i),a=n("../node_modules/query-string/index.js"),l=n("./app/actionCreators/pageFilters.tsx"),d=n("./app/components/charts/components/dataZoomInside.tsx");n("../node_modules/echarts/lib/component/dataZoomSlider.js");const c={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function p(e){return e&&Array.isArray(e)?e:[{...c,...e}]}var u=n("./app/components/charts/components/toolBox.tsx"),m=n("./app/utils/callIfFunction.tsx"),h=n("./app/utils/dates.tsx");const g=e=>e?s().utc(e).format(s().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class f extends o.Component{constructor(e){var t;super(e),t=this,(0,r.Z)(this,"history",void 0),(0,r.Z)(this,"currentPeriod",void 0),(0,r.Z)(this,"zooming",null),(0,r.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,r.Z)(this,"setPeriod",(function(e){let{period:n,start:r,end:o}=e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:s,onZoom:d,usePageDate:c}=t.props,p=g(r),u=g(o);i&&t.history.push(t.currentPeriod),(0,m.g)(d,{period:n,start:p,end:u}),t.zooming=()=>{if(c&&s){const e={...s.location.query,pageStart:r?(0,h.v5)(r):void 0,pageEnd:o?(0,h.v5)(o):void 0,pageStatsPeriod:null!=n?n:void 0};a.stringify(e)!==a.stringify(s.location.query)&&s.push({pathname:s.location.pathname,query:e})}else(0,l.dR)({period:n,start:p?(0,h.hC)(p):p,end:u?(0,h.hC)(u):u},s);t.saveCurrentPeriod({period:n,start:r,end:o})}})),(0,r.Z)(this,"handleChartReady",(e=>{(0,m.g)(this.props.onChartReady,e)})),(0,r.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],(0,m.g)(this.props.onRestore,e,t))})),(0,r.Z)(this,"handleDataZoom",((e,t)=>{const n=t.getModel(),{startValue:r,endValue:o}=n._payload.batch[0];if(null===r&&null===o){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=s().utc(r),t=s().utc(o);this.setPeriod({period:null,start:e,end:t},!0)}(0,m.g)(this.props.onDataZoom,e,t)})),(0,r.Z)(this,"handleChartFinished",((e,t)=>{var n;"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const r=null===(n=t._componentsViews)||void 0===n?void 0:n.find((e=>e._features&&e._features.dataZoom));r&&!r._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:n,disabled:r,children:o,xAxisIndex:i,router:s,onZoom:a,onRestore:l,onChartReady:c,onDataZoom:m,onFinished:g,showSlider:f,chartZoomOptions:y,...Z}=this.props,x=null!=e?e:void 0,v=t?(0,h.hC)(t):void 0,b=n?(0,h.hC)(n):void 0;return o(r?{utc:x,start:v,end:b,...Z}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:x,start:v,end:b,dataZoom:f?[...p({xAxisIndex:i,...y}),...(0,d.Z)({xAxisIndex:i,...y})]:(0,d.Z)({xAxisIndex:i,...y}),showTimeInTooltip:!0,toolBox:(0,u.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...Z})}}f.displayName="ChartZoom";const y=f},"./app/components/charts/components/dataZoomInside.tsx":(e,t,n)=>{n.d(t,{Z:()=>o}),n("../node_modules/echarts/lib/component/dataZoomInside.js");const r={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function o(e){return e&&Array.isArray(e)?e:[{...r,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,n)=>{function r(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function o(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:r(t),...e}}n.d(t,{Z:()=>o})},"./app/components/gridEditable/sortLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>h});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/react-router/es/index.js")),i=n("../node_modules/lodash/omit.js"),s=n.n(i),a=n("./app/components/links/link.tsx"),l=n("./app/icons/index.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{align:t,title:n,canSort:r,generateSortLink:i,onClick:s,direction:a,replace:l}=e;const c=i();if(!c||!r)return(0,d.tZ)(u,{align:t,children:n});const h=a?(0,d.tZ)(m,{size:"xs",direction:"desc"===a?"down":"up"}):null;return(0,d.BX)(p,{align:t,to:c,onClick:e=>{l&&(e.preventDefault(),o.browserHistory.replace(c)),null==s||s(e)},children:[n," ",h]})}c.displayName="SortLink";const p=(0,r.Z)((e=>{const t=s()(e,["align","css"]);return(0,d.tZ)(a.Z,{...t})}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),u=(0,r.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),m=(0,r.Z)(l.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"}),h=c},"./app/components/onboardingPanel.tsx":(e,t,n)=>{n.d(t,{Z:()=>p});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("./app/components/panels/index.tsx"),i=n("./app/styles/space.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{className:t,image:n,children:r}=e;return(0,s.tZ)(o.s_,{className:t,children:(0,s.BX)(l,{children:[(0,s.tZ)(c,{children:n}),(0,s.tZ)(d,{children:r})]})})}a.displayName="OnboardingPanel";const l=(0,r.Z)("div",{target:"e19tujos2"})("padding:",(0,i.Z)(3),";position:relative;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){min-height:350px;}"),d=(0,r.Z)("div",{target:"e19tujos1"})("z-index:1;@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:2;}"),c=(0,r.Z)(d,{target:"e19tujos0"})("position:relative;min-height:100px;max-width:300px;margin:",(0,i.Z)(2)," auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:1;margin:",(0,i.Z)(3),";max-width:auto;}"),p=a},"./app/components/performanceDuration.tsx":(e,t,n)=>{n.d(t,{Z:()=>a});var r=n("./app/components/duration.tsx"),o=n("./app/utils.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){const t=function(e){return(0,o.ri)(e.nanoseconds)}(e)?e.nanoseconds/1e9:function(e){return(0,o.ri)(e.milliseconds)}(e)?e.milliseconds/1e3:e.seconds;return(0,i.tZ)(r.Z,{abbreviation:e.abbreviation,seconds:t,fixedDigits:2})}s.displayName="PerformanceDuration";const a=s},"./app/utils/discover/charts.tsx":(e,t,n)=>{n.d(t,{CX:()=>s,Xp:()=>p,gu:()=>l,x1:()=>d}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("./app/locale.tsx"),o=n("./app/utils.tsx"),i=n("./app/utils/formatters.tsx");function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,o.ri)(e)?a(e,t):"—"}function a(e,t){if(!(0,o.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,i.rl)(e,2);case"duration":return(0,i.g9)(e/1e3,2,!0);case"size":return(0,o.F)(e);default:return e.toString()}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return d(e,t,n,r)}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return n?(0,i.Du)(e):e.toLocaleString();case"percentage":return(0,i.rl)(e,0);case"duration":return c(e,r);case"size":return(0,o.F)(e,0);default:return e.toString()}}function c(e,t){var n;if(null!==(n=t)&&void 0!==n||(t=u(e)),0===e)return"0";switch(t){case i.ps:{const t=(e/i.ps).toFixed(0);return(0,r.t)("%swk",t)}case i.x4:{const t=(e/i.x4).toFixed(0);return(0,r.t)("%sd",t)}case i.kr:{const t=(e/i.kr).toFixed(0);return(0,r.t)("%shr",t)}case i.EB:{const t=(e/i.EB).toFixed(0);return(0,r.t)("%smin",t)}case i.sh:{const t=(e/i.sh).toFixed(0);return(0,r.t)("%ss",t)}default:const t=e.toFixed(0);return(0,r.t)("%sms",t)}}function p(e,t){let n=0;const r=function(e,t){var n;let r;if(null!==(n=e[0])&&void 0!==n&&n.data){var o;let n,i=e[0];e.forEach(((r,o)=>{var s;let{seriesName:a,data:l}=r;var d;!1!==(null==t||null===(s=t.selected)||void 0===s?void 0:s[a])&&l.length&&(i=e[o],null!==(d=n)&&void 0!==d||(n=e[o]))})),null!==(o=n)&&void 0!==o&&o.data&&(r={max:Math.max(...n.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...i.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return r}(e,t);if(r){const e=(r.max+r.min)/2;n=u((r.max-r.min)/5),(e/n).toFixed(0).length>6&&(n=u(e))}return n}function u(e){return e>=i.ps?i.ps:e>=i.x4?i.x4:e>=i.kr?i.kr:e>=i.EB?i.EB:e>=i.sh?i.sh:1}},"./app/utils/profiling/hooks/useProfileFilters.tsx":(e,t,n)=>{n.d(t,{J:()=>a}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react/index.js"),o=n("./app/components/organizations/pageFilters/parse.tsx"),i=n("./app/utils/useApi.tsx"),s=n("./app/utils/useOrganization.tsx");function a(e){let{query:t,selection:n}=e;const a=(0,i.Z)(),l=(0,s.Z)(),[d,c]=(0,r.useState)({});return(0,r.useEffect)((()=>{if(n)return function(e,t,n,r){return e.requestPromise(`/organizations/${t.slug}/profiling/filters/`,{method:"GET",query:{query:n,project:r.projects,environment:r.environments,...(0,o.fK)(r.datetime)}})}(a,l,t,n).then((e=>{const t=e.reduce(((e,t)=>(e[t.key]={...t,predefined:!0},e)),{});c(t)})),()=>a.clear()}),[a,l,t,n]),d}},"./app/utils/profiling/routes.tsx":(e,t,n)=>{function r(e){let{orgSlug:t,projectSlug:n,profileId:r}=e;return`/organizations/${t}/profiling/profile/${n}/${r}/flamechart/`}function o(e){let{orgSlug:t,query:n}=e;const r=function(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/`}({orgSlug:t});return{pathname:r,query:{...n}}}function i(e){let{orgSlug:t,projectSlug:n,transaction:r,query:o}=e;const i=function(e){let{orgSlug:t,projectSlug:n}=e;return`/organizations/${t}/profiling/summary/${n}/`}({orgSlug:t,projectSlug:n});return{pathname:i,query:{...o,transaction:r}}}function s(e){let{orgSlug:t,projectSlug:n,profileId:o,query:i}=e;return{pathname:r({orgSlug:t,projectSlug:n,profileId:o}),query:{...i}}}function a(e){let{orgSlug:t,projectSlug:n,profileId:r,query:o}=e;const i=function(e){let{orgSlug:t,projectSlug:n,profileId:r}=e;return`/organizations/${t}/profiling/profile/${n}/${r}/details/`}({orgSlug:t,projectSlug:n,profileId:r});return{pathname:i,query:{...o}}}n.d(t,{O$:()=>r,Qy:()=>a,R0:()=>i,TH:()=>s,XR:()=>o})},"./app/utils/profiling/tableRenderer.tsx":(e,t,n)=>{n.d(t,{w:()=>i});var r=n("./app/components/gridEditable/sortLink.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{currentSort:t,generateSortLink:n,rightAlignedColumns:i,sortableColumns:s,onClick:a}=e;return(e,l)=>{var d;return(0,o.tZ)(r.Z,{onClick:t=>null==a?void 0:a(e,t),align:null!=i&&i.has(e.key)?"right":"left",title:e.name,direction:(null==t?void 0:t.key)===e.key?null==t?void 0:t.order:void 0,canSort:(null==s?void 0:s.has(e.key))||!1,generateSortLink:null!==(d=null==n?void 0:n(e.key))&&void 0!==d?d:()=>{},replace:!0})}}},"./app/utils/useLocation.tsx":(e,t,n)=>{n.d(t,{T:()=>o});var r=n("./app/utils/useRouteContext.tsx");function o(){return(0,r.s)().location}},"./app/views/profiling/content.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>We});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react/index.js"),i=n("../node_modules/react-router/es/index.js"),s=n("./app/actionCreators/modal.tsx"),a=n("./app/components/button.tsx"),l=n("./app/components/datePageFilter.tsx"),d=n("./app/components/environmentPageFilter.tsx"),c=n("./app/components/layouts/thirds.tsx"),p=n("./app/components/noProjectMessage.tsx"),u=n("./app/components/organizations/pageFilterBar.tsx"),m=n("./app/components/organizations/pageFilters/container.tsx"),h=n("./app/components/pageHeading.tsx"),g=n("./app/components/pagination.tsx"),f=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("./app/components/count.tsx")),y=n("./app/components/dateTime.tsx"),Z=n("./app/components/gridEditable/index.tsx"),x=n("./app/components/idBadge/projectBadge.tsx"),v=n("./app/components/links/link.tsx"),b=n("./app/components/performanceDuration.tsx"),w=n("./app/locale.tsx"),S=n("./app/utils.tsx"),j=n("./app/utils/discover/styles.tsx"),k=n("./app/utils/profiling/routes.tsx"),P=n("./app/utils/profiling/tableRenderer.tsx"),B=n("./app/utils/useLocation.tsx"),C=n("./app/utils/useOrganization.tsx"),_=n("./app/utils/useProjects.tsx"),X=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function q(e){const t=(0,B.T)(),n=(0,C.Z)(),{projects:r}=(0,_.Z)(),[i,s]=(0,o.useState)((()=>{if(t.query.orderBy){const[e,n]=t.query.orderBy.split(",");return{key:e,order:n}}return null})),a=(0,o.useMemo)((()=>new Set(["transaction","project","lastSeen","p75","p95","count"])),[]),l=(0,o.useMemo)((()=>{const o=e.transactions.map((e=>{const o=r.find((t=>t.id===e.project_id));return{_transactionName:e.name,transaction:o?(0,X.tZ)(v.Z,{to:(0,k.R0)({query:t.query,orgSlug:n.slug,projectSlug:o.slug,transaction:e.name}),children:e.name}):e.name,count:e.profiles_count,project:o,p50:e.duration_ms.p50,p75:e.duration_ms.p75,p90:e.duration_ms.p90,p95:e.duration_ms.p95,p99:e.duration_ms.p99,lastSeen:e.last_profile_at}}));return i&&(o.sort(((e,t)=>{var n,r;switch(i.key){case"transaction":return e._transactionName.localeCompare(t._transactionName);case"lastSeen":return new Date(e.lastSeen).getTime()-new Date(t.lastSeen).getTime();case"project":return null!==(n=e.project)&&void 0!==n&&n.slug&&null!==(r=t.project)&&void 0!==r&&r.slug?e.project.slug.localeCompare(t.project.slug):1;case"count":return e.count-t.count;case"p75":return e.p75-t.p75;case"p95":return e.p95-t.p95;default:return 1}})),"desc"===i.order&&o.reverse()),o}),[e.transactions,t,n,r,i]);return(0,X.tZ)(Z.ZP,{isLoading:e.isLoading,error:e.error,data:l,columnOrder:D.map((e=>T[e])),columnSortBy:i?[i]:[],grid:{renderHeadCell:(0,P.w)({generateSortLink:e=>()=>{let n="asc";return e===(null==i?void 0:i.key)&&"asc"===i.order&&(n="desc"),{...t,query:{...t.query,orderBy:`${e},${n}`}}},onClick:e=>{(null==i?void 0:i.key)!==e.key?s({key:e.key,order:"asc"}):s({key:e.key,order:"asc"===i.order?"desc":"asc"})},sortableColumns:a,currentSort:i,rightAlignedColumns:z}),renderBodyCell:F},location:t})}q.displayName="ProfileTransactionsTable";const z=new Set(["count","p50","p75","p90","p95","p99"]);function F(e,t,n,r){return(0,X.tZ)(I,{column:e,dataRow:t,rowIndex:n,columnIndex:r})}function I(e){let{column:t,dataRow:n}=e;const r=n[t.key];switch(t.key){case"project":return(0,S.ri)(r)?(0,X.tZ)(j.W2,{children:(0,X.tZ)(x.Z,{project:r,avatarSize:16})}):(0,X.tZ)(j.W2,{children:(0,w.t)("n/a")});case"count":return(0,X.tZ)(j.Hw,{children:(0,X.tZ)(f.Z,{value:r})});case"p50":case"p75":case"p90":case"p95":case"p99":return(0,X.tZ)(j.Hw,{children:(0,X.tZ)(b.Z,{milliseconds:r,abbreviation:!0})});case"lastSeen":return(0,X.tZ)(j.W2,{children:(0,X.tZ)(y.Z,{date:r})});default:return(0,X.tZ)(j.W2,{children:r})}}F.displayName="renderTableBody";const D=["transaction","project","lastSeen","p75","p95","count"],T={transaction:{key:"transaction",name:(0,w.t)("Transaction"),width:Z.z7},count:{key:"count",name:(0,w.t)("Count"),width:Z.z7},project:{key:"project",name:(0,w.t)("Project"),width:Z.z7},p50:{key:"p50",name:(0,w.t)("P50"),width:Z.z7},p75:{key:"p75",name:(0,w.t)("P75"),width:Z.z7},p90:{key:"p90",name:(0,w.t)("P90"),width:Z.z7},p95:{key:"p95",name:(0,w.t)("P95"),width:Z.z7},p99:{key:"p99",name:(0,w.t)("P99"),width:Z.z7},lastSeen:{key:"lastSeen",name:(0,w.t)("Last Seen"),width:Z.z7}};n("../node_modules/core-js/modules/es.error.cause.js");var N=n("../node_modules/platformicons/build/index.js"),A=n("./app/components/forms/index.tsx"),L=n("./app/components/links/externalLink.tsx"),R=n("./app/components/list/index.tsx"),E=n("./app/components/tag.tsx"),M=n("./app/icons/index.tsx"),$=n("./app/styles/space.tsx");function O(e){const[t,n]=function(e){const[t,n]=(0,o.useState)(e);return[t,(0,o.useCallback)((e=>{null!==e&&n((t=>{const n={...e,next:null,previous:t};return t.next=n,n.previous=t,n}))}),[])]}({previous:null,current:H,next:null}),[r,i]=(0,o.useState)(null);return(0,X.tZ)(t.current,{...e,toStep:n,step:t,project:r,setProject:i})}function U(e,t){return{label:e.name,value:e,disabled:t.disabled,leadingItems:e.platform?(0,X.tZ)(N.v,{platform:e.platform}):null}}O.displayName="ProfilingOnboardingModal";const G={android:Q,"apple-ios":Y};function H(e){let{Body:t,Header:n,Footer:r,closeModal:i,toStep:s,step:a,project:l,setProject:d}=e;const{projects:c}=(0,_.Z)(),p=(0,o.useCallback)((e=>{if(e.preventDefault(),null==l||!l.platform)return;const t=G[l.platform];if(void 0===t)throw new TypeError("Platform doesn't have a onboarding step, user should not be able to select it");s({previous:a,current:t,next:null})}),[l,a,s]),u=(0,o.useMemo)((()=>{const{supported:e,unsupported:t}=function(e){const t=[],n=[];for(const r of e)r.platform&&G[r.platform]?t.push(r):n.push(r);return{supported:t,unsupported:n}}(c);return[{label:(0,w.t)("Supported"),options:e.map((e=>U(e,{disabled:!1})))},{label:(0,w.t)("Unsupported"),options:t.map((e=>U(e,{disabled:!0})))}]}),[c]);return(0,X.BX)(t,{children:[(0,X.tZ)(n,{children:(0,X.tZ)("h3",{children:(0,w.t)("Set Up Profiling")})}),(0,X.BX)("form",{onSubmit:p,children:[(0,X.BX)(W,{symbol:"colored-numeric",children:[(0,X.BX)("li",{children:[(0,X.tZ)(ce,{children:(0,X.tZ)("label",{htmlFor:"project-select",children:(0,w.t)("Select a project")})}),(0,X.tZ)("div",{children:(0,X.tZ)(J,{id:"project-select",name:"select",options:u,onChange:d})})]}),"android"===(null==l?void 0:l.platform)?(0,X.tZ)(K,{}):null,"apple-ios"===(null==l?void 0:l.platform)?(0,X.tZ)(V,{}):null]}),(0,X.tZ)(r,{children:(0,X.BX)(re,{children:[(0,X.tZ)(ne,{}),(0,X.BX)("div",{children:[(0,X.tZ)(pe,{children:(0,w.t)("Step 1 of 2")}),(0,X.tZ)(te,{type:"button",onClick:i}),(0,X.tZ)(ee,{disabled:!(null!=l&&l.platform&&G[l.platform]),type:"submit"})]})]})})]})]})}function K(){return(0,X.BX)(o.Fragment,{children:[(0,X.BX)("li",{children:[(0,X.tZ)(ce,{children:(0,w.t)("Update your projects SDK version")}),(0,X.tZ)("p",{children:(0,w.t)("Make sure your SDKs are upgraded to at least version 6.0.0 (sentry-android).")})]}),(0,X.BX)("li",{children:[(0,X.tZ)(ce,{children:(0,w.t)("Setup Performance Monitoring")}),(0,w.t)("For Sentry to ingest profiles, we first require you to setup performance monitoring. To set up performance monitoring,")," ",(0,X.tZ)(L.Z,{openInNewTab:!0,href:"https://docs.sentry.io/platforms/android/performance/",children:(0,w.t)("follow our step by step instructions here.")})]}),(0,X.BX)("li",{children:[(0,X.tZ)(ce,{children:(0,w.t)("Set Up Profiling")}),(0,X.tZ)(me,{children:'<application>\n  <meta-data android:name="io.sentry.dsn" android:value="..." />\n  <meta-data android:name="io.sentry.traces.sample-rate" android:value="1.0" />\n  <meta-data android:name="io.sentry.traces.profiling.enable" android:value="true" />\n</application>'})]})]})}function V(){return(0,X.BX)(o.Fragment,{children:[(0,X.BX)("li",{children:[(0,X.tZ)(ce,{children:(0,w.t)("Update your projects SDK version")}),(0,X.tZ)("p",{children:(0,w.t)("Make sure your SDKs are upgraded to at least version 7.23.0 (sentry-cocoa).")})]}),(0,X.BX)("li",{children:[(0,X.tZ)(ce,{children:(0,w.t)("Setup Performance Monitoring")}),(0,w.t)("For Sentry to ingest profiles, we first require you to setup performance monitoring. To set up performance monitoring,")," ",(0,X.tZ)(L.Z,{openInNewTab:!0,href:"https://docs.sentry.io/platforms/apple/guides/ios/performance/",children:(0,w.t)("follow our step by step instructions here.")})]}),(0,X.BX)("li",{children:[(0,X.tZ)(ce,{children:(0,w.t)("Enable profiling in your app by configuring the SDKs like below:")}),(0,X.tZ)(me,{children:'SentrySDK.start { options in\n    options.dsn = "..."\n    options.tracesSampleRate = 1.0 // Make sure transactions are enabled\n    options.enableProfiling = true\n}'})]})]})}H.displayName="SelectProjectStep",K.displayName="AndroidInstallSteps",V.displayName="IOSInstallSteps";const W=(0,r.Z)(R.Z,{target:"ewfgfp910"})("position:relative;li{margin-bottom:",(0,$.Z)(3),";}"),J=(0,r.Z)(A.mg,{target:"ewfgfp99"})({name:"9nn1p6",styles:"padding:0;border-bottom:0;>div{width:100%;padding-left:0;}"});function Q(e){let{Body:t,Header:n,Footer:r,closeModal:o,toStep:i,step:s}=e;return(0,X.BX)(t,{children:[(0,X.tZ)(n,{children:(0,X.tZ)("h3",{children:(0,w.t)("Set Up Profiling")})}),(0,X.BX)("p",{children:[(0,w.t)("If you want to see de-obfuscated stack traces, you'll need to use ProGuard with Sentry. To do so, upload the ProGuard mapping files by either the recommended method of using our Gradle integration or manually by using sentry-cli.")," ",(0,X.tZ)(L.Z,{href:"https://docs.sentry.io/product/cli/dif/",children:(0,w.t)("Learn more about Debug Information Files.")})]}),(0,X.BX)(le,{children:[(0,X.BX)(oe,{children:[(0,X.tZ)(ie,{children:(0,w.t)("Option 1")})," ",(0,X.tZ)(E.Z,{children:(0,w.t)("Recommended")})]}),(0,X.tZ)(oe,{children:(0,X.tZ)(ie,{children:(0,w.t)("Option 2")})})]}),(0,X.BX)(le,{children:[(0,X.BX)(ae,{children:[(0,X.BX)(se,{href:"https://docs.sentry.io/platforms/android/proguard/",children:[(0,w.t)("Proguard and DexGuard"),(0,X.tZ)(M.V$,{})]}),(0,X.tZ)("p",{children:(0,w.t)("Upload ProGuard files using our Gradle plugin.")})]}),(0,X.BX)(ae,{children:[(0,X.BX)(se,{href:"https://docs.sentry.io/product/cli/dif/#uploading-files",children:[(0,w.t)("Sentry-cli"),(0,X.tZ)(M.V$,{})]}),(0,X.tZ)("p",{children:(0,w.t)("Validate and upload debug files using our cli tool.")})]})]}),(0,X.tZ)(r,{children:(0,X.BX)(re,{children:[(0,X.tZ)(ne,{}),(0,X.BX)("div",{children:[(0,X.tZ)(pe,{children:(0,w.t)("Step 2 of 2")}),s.previous?(0,X.tZ)(te,{onClick:()=>i(s.previous)}):null,(0,X.tZ)(a.ZP,{priority:"primary",onClick:o,children:(0,w.t)("Done")})]})]})})]})}function Y(e){let{Body:t,Header:n,Footer:r,closeModal:o,toStep:i,step:s}=e;return(0,X.BX)(t,{children:[(0,X.tZ)(n,{children:(0,X.tZ)("h3",{children:(0,w.t)("Set Up Profiling")})}),(0,X.BX)("p",{children:[(0,w.t)("The most straightforward way to provide Sentry with debug information files is to\n        upload them using sentry-cli. Depending on your workflow, you may want to upload\n        as part of your build pipeline or when deploying and publishing your application.")," ",(0,X.tZ)(L.Z,{href:"https://docs.sentry.io/product/cli/dif/",children:(0,w.t)("Learn more about Debug Information Files.")})]}),(0,X.BX)(le,{children:[(0,X.BX)(oe,{children:[(0,X.tZ)(ie,{children:(0,w.t)("Option 1")})," ",(0,X.tZ)(E.Z,{children:(0,w.t)("Recommended")})]}),(0,X.tZ)(oe,{children:(0,X.tZ)(ie,{children:(0,w.t)("Option 2")})})]}),(0,X.BX)(le,{children:[(0,X.BX)(ae,{children:[(0,X.BX)(se,{href:"https://docs.sentry.io/product/cli/dif/#uploading-files",children:[(0,w.t)("Sentry-cli"),(0,X.tZ)(M.V$,{})]}),(0,X.tZ)("p",{children:(0,w.t)("Validate and upload debug files using our cli tool.")})]}),(0,X.BX)(ae,{children:[(0,X.BX)(se,{href:"https://docs.sentry.io/platforms/apple/dsym/",children:[(0,w.t)("Symbol servers"),(0,X.tZ)(M.V$,{})]}),(0,X.tZ)("p",{children:(0,w.t)("Sentry downloads debug information files from external repositories.")})]})]}),(0,X.tZ)(r,{children:(0,X.BX)(re,{children:[(0,X.tZ)(ne,{}),(0,X.BX)("div",{children:[(0,X.tZ)(pe,{children:(0,w.t)("Step 2 of 2")}),null!==s.previous?(0,X.tZ)(te,{onClick:()=>i(s.previous)}):null,(0,X.tZ)(a.ZP,{priority:"primary",onClick:o,children:(0,w.t)("Next")})]})]})})]})}function ee(e){return(0,X.tZ)(a.ZP,{priority:"primary",...e,children:(0,w.t)("Next")})}function te(e){return(0,X.tZ)(a.ZP,{...e,children:(0,w.t)("Back")})}function ne(){return(0,X.tZ)(a.ZP,{external:!0,href:"https://docs.sentry.io/product/profiling/",children:(0,w.t)("Read Docs")})}function re(e){let{children:t}=e;return(0,X.tZ)(de,{children:t})}Q.displayName="AndroidSendDebugFilesInstruction",Y.displayName="IOSSendDebugFilesInstruction",ee.displayName="NextStepButton",te.displayName="PreviousStepButton",ne.displayName="DocsLink",re.displayName="ModalActions";const oe=(0,r.Z)("div",{target:"ewfgfp98"})("margin-bottom:",(0,$.Z)(.5),";"),ie=(0,r.Z)("span",{target:"ewfgfp97"})({name:"1efi8gv",styles:"font-weight:bold"}),se=(0,r.Z)(L.Z,{target:"ewfgfp96"})("font-weight:bold;font-size:",(e=>e.theme.fontSizeLarge),";display:flex;align-items:center;margin-bottom:",(0,$.Z)(.5),";svg{margin-left:",(0,$.Z)(.5),";}"),ae=(0,r.Z)("div",{target:"ewfgfp95"})("border-radius:",(e=>e.theme.borderRadius),";border:1px solid ",(e=>e.theme.border),";padding:",(0,$.Z)(2),";margin-top:",(0,$.Z)(1),";"),le=(0,r.Z)("div",{target:"ewfgfp94"})("display:grid;grid-template-columns:1fr 1fr;gap:",(0,$.Z)(2),";>p{margin:0;}"),de=(0,r.Z)("div",{target:"ewfgfp93"})("display:flex;justify-content:space-between;align-items:center;flex:1 1 100%;button:not(:last-child){margin-right:",(0,$.Z)(1),";}"),ce=(0,r.Z)("div",{target:"ewfgfp92"})("margin-bottom:",(0,$.Z)(1),";font-weight:bold;"),pe=(0,r.Z)("span",{target:"ewfgfp91"})("color:",(e=>e.theme.subText),";margin-right:",(0,$.Z)(2),";"),ue=(0,r.Z)("pre",{target:"ewfgfp90"})({name:"jacq6p",styles:"overflow:scroll;code{white-space:pre;}"});function me(e){let{children:t}=e;return(0,X.tZ)(ue,{children:(0,X.tZ)("code",{children:t})})}me.displayName="CodeContainer";var he=n("./app/components/projectPageFilter.tsx"),ge=n("./app/components/sentryDocumentTitle.tsx"),fe=n("./app/components/smartSearchBar/index.tsx"),ye=n("./app/constants/index.tsx"),Ze=n("./app/constants/pageFilters.tsx"),xe=n("./app/styles/organization.tsx"),ve=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),be=n("./app/utils/profiling/hooks/useProfileFilters.tsx"),we=n("../node_modules/@sentry/hub/esm/exports.js"),Se=n("./app/components/organizations/pageFilters/parse.tsx"),je=n("./app/utils/useApi.tsx");var ke=n("./app/utils/queryString.tsx"),Pe=n("./app/utils/usePageFilters.tsx"),Be=n("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),Ce=n("./app/components/charts/areaChart.tsx"),_e=n("./app/components/charts/chartZoom.tsx"),Xe=n("./app/components/charts/styles.tsx"),qe=n("./app/components/panels/index.tsx"),ze=n("./app/utils/discover/charts.tsx"),Fe=n("./app/utils/discover/fields.tsx");const Ie=["count()","p99()","p75()"];function De(e){let{query:t,router:n,selection:r}=e;const i=(0,Be.a)(),s=function(e){let{query:t,selection:n}=e;const r=(0,je.Z)(),i=(0,C.Z)(),[s,a]=(0,o.useState)({type:"initial"});return(0,o.useEffect)((()=>{if((0,S.ri)(n))return a({type:"loading"}),function(e,t,n){let{query:r,selection:o}=n;return e.requestPromise(`/organizations/${t.slug}/profiling/stats/`,{method:"GET",includeAllArgs:!1,query:{query:r,project:o.projects,environment:o.environments,...(0,Se.fK)(o.datetime)}})}(r,i,{query:t,selection:n}).then((e=>{a({type:"resolved",data:e})})).catch((e=>{a({type:"errored",error:(0,w.t)("Error: Unable to load profile stats")}),we.Tb(e)})),()=>r.clear()}),[r,i,t,n]),s}({query:t,selection:r}),a=(0,o.useMemo)((()=>{if("resolved"!==s.type)return[];const e=s.data.timestamps.map((e=>1e3*e)),t=s.data.data.filter((e=>Ie.indexOf(`${e.axis}()`)>-1)).map((t=>{if(e.length!==t.values.length)throw new Error("Invalid stats response");return"count"===t.axis?{data:t.values.map(((t,n)=>({name:e[n],value:null!=t?t:0}))),seriesName:`${t.axis}()`,xAxisIndex:0,yAxisIndex:0}:{data:t.values.map(((t,n)=>({name:e[n],value:(null!=t?t:0)/1e6}))),seriesName:`${t.axis}()`,xAxisIndex:1,yAxisIndex:1}}));return t.sort(((e,t)=>Ie.indexOf(e.seriesName)-Ie.indexOf(t.seriesName))),t}),[s]);return(0,X.tZ)(_e.Z,{router:n,...null==r?void 0:r.datetime,children:e=>(0,X.BX)(Te,{children:[(0,X.BX)(Ne,{children:[(0,X.tZ)(Ae,{children:(0,w.t)("Profiles by Count")}),(0,X.tZ)(Ae,{children:(0,w.t)("Profiles by Percentiles")})]}),(0,X.tZ)(Ce.T,{height:300,series:a,grid:[{top:"32px",left:"24px",right:"52%",bottom:"16px"},{top:"32px",left:"52%",right:"24px",bottom:"16px"}],legend:{right:16,top:12,data:Ie.slice()},axisPointer:{link:[{xAxisIndex:[0,1]}]},xAxes:[{gridIndex:0,type:"time"},{gridIndex:1,type:"time"}],yAxes:[{gridIndex:0,scale:!0,axisLabel:{color:i.chartLabel,formatter:e=>(0,ze.gu)(e,"integer")}},{gridIndex:1,scale:!0,axisLabel:{color:i.chartLabel,formatter:e=>(0,ze.gu)(e,"duration")}}],tooltip:{valueFormatter:(e,t)=>(0,ze.CX)(e,(0,Fe.Px)(t))},isGroupedByDate:!0,showTimeInTooltip:!0,...e})]})})}De.displayName="ProfileCharts";const Te=(0,r.Z)(qe.s_,{target:"e16luuhi2"})("padding-top:",(0,$.Z)(2),";"),Ne=(0,r.Z)("div",{target:"e16luuhi1"})({name:"ai16bo",styles:"width:100%;display:flex;flex-direction:row"}),Ae=(0,r.Z)(Xe.Gh,{target:"e16luuhi0"})("flex-grow:1;margin-left:",(0,$.Z)(2),";");var Le=n("./images/spot/performance-empty-state.svg"),Re=n("./app/components/buttonBar.tsx"),Ee=n("./app/components/onboardingPanel.tsx");function Me(e){return(0,X.BX)(Ee.Z,{image:(0,X.tZ)($e,{src:Le}),children:[(0,X.tZ)("h3",{children:(0,w.t)("Function level insights")}),(0,X.tZ)("p",{children:(0,w.t)("Discover slow-to-execute or resource intensive functions within your application")}),(0,X.tZ)(Oe,{gap:1,children:e.children})]})}Me.displayName="ProfilingOnboardingPanel";const $e=(0,r.Z)("img",{target:"e1ye1f4w1"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width: ",(e=>e.theme.breakpoints.large),"){transform:translateX(-30%);width:380px;min-width:380px;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){transform:translateX(-30%);width:420px;min-width:420px;}"),Oe=(0,r.Z)(Re.ZP,{target:"e1ye1f4w0"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"});function Ue(e){let{location:t,router:n}=e;const r=(0,C.Z)(),{selection:h}=(0,Pe.Z)(),f=(0,ke.ro)(t.query.cursor),y=(0,ke.ro)(t.query.query,""),Z=(0,be.J)({query:"",selection:h}),x=function(e){let{cursor:t,limit:n,query:r,selection:i}=e;const s=(0,je.Z)(),a=(0,C.Z)(),[l,d]=(0,o.useState)({type:"initial"});return(0,o.useEffect)((()=>{if((0,S.ri)(i))return d({type:"loading"}),function(e,t,n){let{cursor:r,limit:o,query:i,selection:s}=n;return e.requestPromise(`/organizations/${t.slug}/profiling/transactions/`,{method:"GET",includeAllArgs:!0,query:{cursor:r,query:i,per_page:o,project:s.projects,environment:s.environments,...(0,Se.fK)(s.datetime)}})}(s,a,{cursor:t,limit:n,query:r,selection:i}).then((e=>{var t;let[n,,r]=e;d({type:"resolved",data:{transactions:n,pageLinks:null!==(t=null==r?void 0:r.getResponseHeader("Link"))&&void 0!==t?t:null}})})).catch((e=>{d({type:"errored",error:(0,w.t)("Error: Unable to load transactions")}),we.Tb(e)})),()=>s.clear()}),[s,a,t,n,r,i]),l}({cursor:f,query:y,selection:h}),{projects:v}=(0,_.Z)();(0,o.useEffect)((()=>{(0,ve.Z)("profiling_views.landing",{organization:r})}),[r]);const b=(0,o.useCallback)((e=>{i.browserHistory.push({...t,query:{...t.query,cursor:void 0,query:e||void 0}})}),[t]),j=(0,o.useCallback)((()=>{(0,s.openModal)((e=>(0,X.tZ)(O,{...e})))}),[]),k=(0,o.useMemo)((()=>!("resolved"!==x.type||x.data.transactions.length>0||function(e,t){const n=t.reduce(((e,t)=>(e[t.id]=t,e)),{});return e[0]===Ze.mP||0===e.length?void 0!==t.find((e=>{const t=n[String(e)];return!!t&&t.hasProfiles})):void 0!==e.find((e=>{const t=n[String(e)];return!!t&&t.hasProfiles}))}(h.projects,v))),[h.projects,v,x]);return(0,X.tZ)(ge.Z,{title:(0,w.t)("Profiling"),orgSlug:r.slug,children:(0,X.tZ)(m.Z,{children:(0,X.tZ)(p.Z,{organization:r,children:(0,X.BX)(Ge,{children:[(0,X.tZ)(c.h4,{children:(0,X.BX)(He,{children:[(0,X.tZ)(Ke,{children:(0,w.t)("Profiling")}),(0,X.tZ)(a.ZP,{onClick:j,children:"Set Up Profiling"})]})}),(0,X.tZ)(c.uT,{children:(0,X.BX)(c.or,{fullWidth:!0,children:[(0,X.BX)(Ve,{children:[(0,X.BX)(u.Z,{condensed:!0,children:[(0,X.tZ)(he.Z,{}),(0,X.tZ)(d.Z,{}),(0,X.tZ)(l.Z,{alignDropdown:"left"})]}),(0,X.tZ)(fe.Z,{organization:r,hasRecentSearches:!0,searchSource:"profile_landing",supportedTags:Z,query:y,onSearch:b,maxQueryLength:ye.dI})]}),k?(0,X.BX)(Me,{children:[(0,X.tZ)(a.ZP,{href:"https://docs.sentry.io/",external:!0,children:(0,w.t)("Read Docs")}),(0,X.tZ)(a.ZP,{onClick:j,priority:"primary",children:(0,w.t)("Set Up Profiling")})]}):(0,X.BX)(o.Fragment,{children:[(0,X.tZ)(De,{router:n,query:y,selection:h}),(0,X.tZ)(q,{error:"errored"===x.type?(0,w.t)("Unable to load profiles"):null,isLoading:"loading"===x.type,transactions:"resolved"===x.type?x.data.transactions:[]}),(0,X.tZ)(g.Z,{pageLinks:"resolved"===x.type?x.data.pageLinks:null})]})]})})]})})})})}Ue.displayName="ProfilingContent";const Ge=(0,r.Z)(xe.JH,{target:"eil9lws3"})({name:"1hcx8jb",styles:"padding:0"}),He=(0,r.Z)(c.oB,{target:"eil9lws2"})({name:"1iix8hw",styles:"display:flex;justify-content:space-between;flex-direction:row"}),Ke=(0,r.Z)(h.Z,{target:"eil9lws1"})({name:"ht6xsx",styles:"line-height:40px"}),Ve=(0,r.Z)("div",{target:"eil9lws0"})("display:grid;gap:",(0,$.Z)(2),";grid-template-columns:min-content auto;margin-bottom:",(0,$.Z)(2),";"),We=Ue},"./images/spot/performance-empty-state.svg":(e,t,n)=>{e.exports=n.p+"assets/performance-empty-state.8da0e336a4e99ef87edb.svg"}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_content_tsx.93a81395dbaf47b74ed2ee96bbd5f8b0.js.map