"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_landing_vitalsCards_tsx"],{"./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx":(t,e,i)=>{i.d(e,{Z:()=>c}),i("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=i("../node_modules/lodash/pick.js"),a=i.n(r),s=i("./app/utils/discover/genericDiscoverQuery.tsx"),n=i("./app/utils/performance/constants.tsx"),o=i("./app/utils/withApi.tsx"),l=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(t){const{eventView:e,vitals:i}=t,r=null==e?void 0:e.getEventsAPIPayload(t.location);return{vital:i,...a()(r,["query",...Object.values(n.s)])}}function p(t){return(0,l.tZ)(s.ZP,{getRequestPayload:d,route:"events-vitals",...t,children:e=>{let{tableData:i,...r}=e;return t.children({vitalsData:i,...r})}})}p.displayName="VitalsCardsDiscoverQuery";const c=(0,o.Z)(p)},"./app/views/performance/landing/vitalsCards.tsx":(t,e,i)=>{i.d(e,{JO:()=>E});var r=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(i("../node_modules/core-js/modules/es.array.includes.js"),i("../node_modules/react/index.js")),s=i("../node_modules/@sentry/hub/esm/exports.js"),n=i("./app/components/card.tsx"),o=i("./app/components/charts/eventsRequest.tsx"),l=i("./app/components/charts/styles.tsx"),d=i("./app/components/charts/utils.tsx"),p=i("./app/components/emptyStateWarning.tsx"),c=(i("./app/components/links/link.tsx"),i("./app/components/placeholder.tsx")),u=i("./app/components/questionTooltip.tsx"),m=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),h=i("../node_modules/react-sparklines/build/index.js"),v=i("../node_modules/prop-types/index.js");class g extends h.Sparklines{}(0,m.Z)(g,"propTypes",{children:v.node,data:v.array,limit:v.number,width:v.number,height:v.number,svgWidth:v.number,svgHeight:v.number,preserveAspectRatio:v.string,margin:v.number,style:v.object,min:v.number,max:v.number,onMouseMove:v.func});var x=i("./app/components/tooltip.tsx"),Z=i("./app/locale.tsx"),f=i("./app/styles/space.tsx"),y=i("./app/utils.tsx"),w=i("./app/utils/dates.tsx"),b=i("./app/utils/discover/discoverQuery.tsx"),k=i("./app/utils/discover/fields.tsx"),S=i("./app/utils/fields/index.ts"),j=(i("./app/utils/performance/vitals/constants.tsx"),i("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),i("./app/utils/queryString.tsx"),i("./app/utils/theme.tsx")),P=i("./app/utils/useApi.tsx"),N=i("./app/views/performance/vitalDetail/colorBar.tsx"),_=i("./app/views/performance/vitalDetail/utils.tsx"),A=i("./app/utils/formatters.tsx"),C=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function D(t,e){const i=Array.isArray(t)||t===S.Zl.CLS?"":"ms";switch(e){case _.SP.POOR:return Array.isArray(t)?(0,Z.t)("Poor"):(0,Z._N)("(>[threshold][unit])",{threshold:_.eE[t],unit:i});case _.SP.MEH:return Array.isArray(t)?(0,Z.t)("Meh"):(0,Z._N)("(>[threshold][unit])",{threshold:_.MN[t],unit:i});case _.SP.GOOD:return Array.isArray(t)?(0,Z.t)("Good"):(0,Z._N)("(<=[threshold][unit])",{threshold:_.MN[t],unit:i});default:return null}}function H(t){return(0,C.tZ)(V,{children:t.percents.map((e=>(0,C.BX)(B,{"data-test-id":"vital-status",children:[_.Np[e.vitalState],t.showVitalPercentNames&&(0,Z.t)(`${e.vitalState}`)," ",(0,A.rl)(e.percent,0),t.showVitalThresholds&&D(t.vital,e.vitalState)]},e.vitalState)))})}H.displayName="VitalPercents";const V=(0,r.Z)("div",{target:"ex3thpn1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,f.Z)(2),";"),B=(0,r.Z)("div",{target:"ex3thpn0"})("display:flex;align-items:center;gap:",(0,f.Z)(.5),";font-size:",(t=>t.theme.fontSizeMedium),";");var z=i("./app/views/performance/landing/utils.tsx");function T(t){const e=(0,P.Z)(),{eventView:i,location:r,organization:a,functions:n}=t,{query:l}=r,p=i.withColumns(n),c=p.getPageFilters(),u=c.datetime.start?(0,w.hC)(c.datetime.start):void 0,m=c.datetime.end?(0,w.hC)(c.datetime.end):void 0,h="string"==typeof l.sparkInterval?l.sparkInterval:(0,d.ZS)({start:u||null,end:m||null,period:c.datetime.period},"low"),v=p.getEventsAPIPayload(r);return(0,C.tZ)(b.Z,{location:r,eventView:p,orgSlug:a.slug,limit:1,referrer:"api.performance.vitals-cards",children:t=>{let{isLoading:i,tableData:r}=t;return(0,C.tZ)(o.Z,{api:e,organization:a,period:c.datetime.period,project:c.projects,environment:c.environments,team:v.team,start:u,end:m,interval:h,query:v.query,includePrevious:!1,yAxis:p.getFields(),partial:!0,children:t=>{let{results:e}=t;const o=null==e?void 0:e.reduce(((t,e)=>(t[e.seriesName]=e.data.map((t=>t.value)),t)),{}),l=(0,z.hv)(a);return(0,C.tZ)(q,{children:n.map((t=>{var e,a;let n=(0,k.sN)(t);n.includes("apdex")&&(n="apdex()");const d=l[n];if(!d)return s.uT(`Missing field '${n}' in vital cards.`),null;const{title:p,tooltip:c,formatter:u}=d,m=(0,k.LY)(n),h=null==r||null===(e=r.data)||void 0===e||null===(a=e[0])||void 0===a?void 0:a[m],v=null==o?void 0:o[n],g=i||!(0,y.ri)(h)?"—":u(h),x=(0,C.tZ)(O,{data:v});return(0,C.tZ)(X,{title:p,tooltip:c,value:g,chart:x,horizontal:!0,minHeight:96,isNotInteractive:!0},n)}))})}})}})}function O(t){const{data:e}=t,i=j.ZP.charts.getColorPalette(1)[0];return(0,C.tZ)(M,{"data-test-id":"sparkline",width:150,height:24,children:(0,C.tZ)(g,{data:e,width:150,height:24,children:(0,C.tZ)(h.SparklinesLine,{style:{stroke:i,fill:"none",strokeWidth:3}})})})}(0,f.Z)(1.5),T.displayName="GenericCards",O.displayName="SparklineChart";const M=(0,r.Z)("div",{target:"e1he14ku8"})("flex-grow:4;max-height:",(t=>t.height),"px;max-width:",(t=>t.width),"px;margin:",(0,f.Z)(1)," ",(0,f.Z)(0)," ",(0,f.Z)(.5)," ",(0,f.Z)(3),";"),q=(0,r.Z)("div",{target:"e1he14ku7"})("display:grid;grid-template-columns:1fr;grid-column-gap:",(0,f.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(t=>t.theme.breakpoints.large),"){grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));}");function E(t){var e;const{isLoading:i,data:r,vital:s,value:n,showBar:o=!0,showStates:l=!1,showDurationDetail:d=!1,showVitalPercentNames:p=!0,showVitalThresholds:u=!1,showDetail:m=!0,showTooltip:h=!1,barHeight:v}=t;if(i)return l?(0,C.tZ)(c.Z,{height:"48px"}):null;const g=l?(0,C.tZ)(L,{small:!0,children:(0,Z.t)("No vitals found")}):null;if(!r)return g;const x={poor:0,meh:0,good:0,total:0};if((Array.isArray(s)?s:[s]).forEach((t=>{var e;const i=null!==(e=null==r?void 0:r[t])&&void 0!==e?e:{};Object.keys(x).forEach((t=>x[t]+=i[t]))})),!x.total)return g;const f=Array.isArray(s)?null:null!=n?n:function(t,e){var i;const r=null!==(i=null==t?void 0:t.p75)&&void 0!==i?i:null;return null===r?"—":e===S.Zl.CLS?r.toFixed(2):`${r.toFixed(0)}ms`}(null!==(e=null==r?void 0:r[s])&&void 0!==e?e:null,s),y=function(t){let{poor:e,meh:i,good:r,total:a}=t;const s=e/a,n=i/a,o=r/a;return[{vitalState:_.SP.GOOD,percent:o},{vitalState:_.SP.MEH,percent:n},{vitalState:_.SP.POOR,percent:s}]}(x),w=function(t){return t.map((t=>{let{percent:e,vitalState:i}=t;return{percent:e,color:_.fL[i]}}))}(y);return(0,C.BX)(a.Fragment,{children:[o&&(0,C.tZ)(F,{title:(0,C.tZ)(H,{vital:s,percents:y,showVitalPercentNames:!1,showVitalThresholds:!1,hideTooltips:h}),disabled:!h,position:"bottom",children:(0,C.tZ)(N.Z,{barHeight:v,colorStops:w})}),m&&(0,C.BX)(G,{children:[d&&f&&(0,C.BX)("div",{children:[(0,Z.t)("The p75 for all transactions is "),(0,C.tZ)("strong",{children:f})]}),(0,C.tZ)(H,{vital:s,percents:y,showVitalPercentNames:p,showVitalThresholds:u})]})]})}E.displayName="VitalBar";const L=(0,r.Z)(p.Z,{target:"e1he14ku6"})("height:48px;padding:",(0,f.Z)(1.5)," 15%;");function X(t){const{chart:e,minHeight:i,horizontal:r,title:a,tooltip:s,value:n,isNotInteractive:o}=t;return(0,C.BX)($,{interactive:!o,minHeight:i,children:[(0,C.BX)(l.Gh,{children:[(0,C.tZ)(R,{children:(0,Z.t)(a)}),(0,C.tZ)(u.Z,{size:"sm",position:"top",title:s})]}),(0,C.BX)(I,{horizontal:r,children:[(0,C.tZ)(Q,{children:n}),e]})]})}X.displayName="VitalCard";const I=(0,r.Z)("div",{target:"e1he14ku5"})("width:100%;display:flex;flex-direction:",(t=>t.horizontal?"row":"column"),";justify-content:space-between;"),$=(0,r.Z)(n.Z,{target:"e1he14ku4"})("color:",(t=>t.theme.textColor),";padding:",(0,f.Z)(2)," ",(0,f.Z)(3),";align-items:flex-start;margin-bottom:",(0,f.Z)(2),";",(t=>t.minHeight&&`min-height: ${t.minHeight}px`),";"),F=(0,r.Z)(x.Z,{target:"e1he14ku3"})({name:"1d3w5wq",styles:"width:100%"});const G=(0,r.Z)("div",{target:"e1he14ku2"})("font-size:",(t=>t.theme.fontSizeMedium),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){display:flex;justify-content:space-between;}"),Q=(0,r.Z)("div",{target:"e1he14ku1"})("font-size:32px;margin-top:",(0,f.Z)(1),";"),R=(0,r.Z)("div",{target:"e1he14ku0"})((t=>t.theme.overflowEllipsis),";")},"./app/views/performance/vitalDetail/colorBar.tsx":(t,e,i)=>{i.d(e,{Z:()=>d});var r=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=i("./app/styles/space.tsx"),s=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=t=>(0,s.tZ)(o,{barHeight:t.barHeight,fractions:t.colorStops.map((t=>{let{percent:e}=t;return e})),children:t.colorStops.map((t=>{var e,i;const r=(0,s.tZ)(l,{color:t.color},t.color);return null!==(e=null===(i=t.renderBarStatus)||void 0===i?void 0:i.call(t,r,t.color))&&void 0!==e?e:r}))});n.displayName="ColorBar";const o=(0,r.Z)("div",{target:"etd41501"})("height:",(t=>t.barHeight?`${t.barHeight}px`:"16px"),";width:100%;overflow:hidden;position:relative;background:",(t=>t.theme.gray100),";display:grid;grid-template-columns:",(t=>t.fractions.map((t=>`${t}fr`)).join(" ")),";margin-bottom:",(t=>t.barHeight?"":(0,a.Z)(1)),";border-radius:2px;"),l=(0,r.Z)("div",{target:"etd41500"})("background-color:",(t=>{var e;return null!==(e=t.theme[t.color])&&void 0!==e?e:t.color}),";"),d=n}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_landing_vitalsCards_tsx.b0142b5c23fd9c3f1c9eb4ac7595fdab.js.map