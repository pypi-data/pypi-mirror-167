(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionSpans_index_tsx-node_modules_lodash__base-bd10c8"],{"./app/components/gridEditable/sortLink.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/react-router/es/index.js")),a=n("../node_modules/lodash/omit.js"),r=n.n(a),o=n("./app/components/links/link.tsx"),c=n("./app/icons/index.tsx"),p=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{align:t,title:n,canSort:i,generateSortLink:a,onClick:r,direction:o,replace:c}=e;const l=a();if(!l||!i)return(0,p.tZ)(m,{align:t,children:n});const g=o?(0,p.tZ)(d,{size:"xs",direction:"desc"===o?"down":"up"}):null;return(0,p.BX)(u,{align:t,to:l,onClick:e=>{c&&(e.preventDefault(),s.browserHistory.replace(l)),null==r||r(e)},children:[n," ",g]})}l.displayName="SortLink";const u=(0,i.Z)((e=>{const t=r()(e,["align","css"]);return(0,p.tZ)(o.Z,{...t})}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),m=(0,i.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),d=(0,i.Z)(c.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"}),g=l},"./app/utils/discover/discoverQuery.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n("./app/utils/withApi.tsx"),s=n("./app/utils/discover/genericDiscoverQuery.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function o(e){const t=e.useEvents?"events":"eventsv2",n=e.useEvents?(e,t)=>{var n;const{fields:i,...s}=null!==(n=e.meta)&&void 0!==n?n:{};return{...e,meta:{...i,...s}}}:void 0;return(0,a.tZ)(s.ZP,{route:t,shouldRefetchData:r,afterFetch:n,...e})}o.displayName="DiscoverQuery";const c=(0,i.Z)(o)},"./app/utils/performance/suspectSpans/suspectSpansQuery.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n("../node_modules/lodash/omit.js"),s=n.n(i),a=n("./app/utils.tsx"),r=n("./app/utils/discover/genericDiscoverQuery.tsx"),o=n("./app/utils/withApi.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){const{perSuspect:t,spanOps:n,spanGroups:i,minExclusiveTime:s,maxExclusiveTime:r}=e,o={perSuspect:t,spanOp:n,spanGroup:i,min_exclusive_time:s,max_exclusive_time:r};(0,a.ri)(o.perSuspect)||delete o.perSuspect,(0,a.ri)(o.spanOp)||delete o.spanOp,(0,a.ri)(o.spanGroup)||delete o.spanGroup;const c=e.eventView.getEventsAPIPayload(e.location);return{...o,...c}}function l(e){return(0,c.tZ)(r.ZP,{route:"events-spans-performance",getRequestPayload:p,...s()(e,"children"),children:t=>{let{tableData:n,...i}=t;return e.children({suspectSpans:n,...i})}})}l.displayName="SuspectSpansQuery";const u=(0,o.Z)(l)},"./app/views/performance/transactionSummary/transactionSpans/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>H});var i=n("./app/locale.tsx"),s=n("./app/utils/withOrganization.tsx"),a=n("./app/utils/withProjects.tsx"),r=n("./app/views/performance/transactionSummary/pageLayout.tsx"),o=n("./app/views/performance/transactionSummary/tabs.tsx"),c=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=n("../node_modules/react/index.js"),l=n("../node_modules/react-router/es/index.js"),u=n("../node_modules/lodash/omit.js"),m=n.n(u),d=n("./app/components/datePageFilter.tsx"),g=n("./app/components/environmentPageFilter.tsx"),v=n("./app/components/events/searchBar.tsx"),x=n("./app/components/forms/compactSelect.tsx"),y=n("./app/components/layouts/thirds.tsx"),f=n("./app/components/organizations/pageFilterBar.tsx"),h=n("./app/components/organizations/pageFilters/parse.tsx"),S=n("./app/components/pagination.tsx"),E=n("./app/styles/space.tsx"),T=n("./app/utils.tsx"),Z=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),b=n("./app/utils/discover/discoverQuery.tsx"),w=n("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),_=n("./app/utils/queryString.tsx"),k=n("./app/utils/useProjects.tsx"),j=n("./app/components/performance/waterfall/utils.tsx"),C=n("./app/icons/index.tsx"),q=n("./app/utils/discover/genericDiscoverQuery.tsx"),P=n("./app/utils/withApi.tsx"),z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function O(e){return(0,z.tZ)(q.ZP,{route:"events-span-ops",limit:20,...m()(e,"children"),children:t=>{let{tableData:n,...i}=t;return e.children({spanOps:n,...i})}})}O.displayName="SpanOpsQuery";const L=(0,P.Z)(O);var N=n("./app/utils/tokenizeSearch.tsx");function I(e){let{spanOps:t,isLoading:n,error:s}=e;return n?[{key:"isLoading",disabled:!0,label:(0,i.t)("Loadingâ€¦")}]:s?[{key:"error",disabled:!0,label:(0,i.t)("Error loading operations"),leadingItems:(0,z.tZ)(C.FC,{color:"subText"})}]:t.map((e=>({value:e.op,label:e.op,leadingItems:(0,z.tZ)(V,{backgroundColor:(0,j.hd)(e.op)})})))}function D(e){const{location:t,eventView:n,organization:s,handleOpChange:a,transactionName:r}=e,o=new N.MY("");o.setFilterValues("event.type",["transaction"]).setFilterValues("transaction",[r]);const c=n.clone();c.query=o.formatString();const p=(0,_.ro)(t.query.spanOp);return(0,z.tZ)(L,{location:t,orgSlug:s.slug,eventView:c,cursor:"0:0:1",noPagination:!0,children:e=>(0,z.tZ)(x.Z,{isClearable:!0,maxMenuWidth:"24rem",menuTitle:(0,i.t)("Filter by operation"),options:I(e),onChange:e=>a(null==e?void 0:e.value),value:p,triggerLabel:null!=p?p:(0,i.t)("Filter"),triggerProps:{icon:(0,z.tZ)(C.wH,{})}})})}D.displayName="OpsFilter";const V=(0,c.Z)("div",{target:"eb2ydel0"})("display:block;width:",(0,E.Z)(1),";height:",(0,E.Z)(1),";border-radius:100%;background-color:",(e=>e.backgroundColor),";");var F=n("./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx"),M=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx");const B={spanOp:(e,t)=>(0,Z.Z)("performance_views.spans.change_op",{organization:e,operation_name:t}),sort:(e,t)=>(0,Z.Z)("performance_views.spans.change_sort",{organization:e,sort_column:t})};function Q(e){const{location:t,organization:n,eventView:i,projectId:s,transactionName:a}=e,r=(0,_.ro)(t.query.query,"");function o(e){return function(i){var s;null===(s=B[e])||void 0===s||s.call(B,n,i);const a=(0,h.fK)({...t.query||{},[e]:i}),r=["cursor"];(0,T.ri)(i)||r.push(e);const o=m()(a,r);l.browserHistory.push({...t,query:o})}}const c=(0,_.ro)(t.query.spanOp),u=(0,_.ro)(t.query.spanGroup),v=(0,M.KK)(i),E=function(e,t){e=e.clone();const n=M.uQ[t];return e.fields=n?n.map((e=>({field:e}))):[],e}(i,v.field),Z=(0,M.zW)(i),{projects:j}=(0,k.Z)();return(0,z.BX)(y.or,{fullWidth:!0,children:[(0,z.BX)(X,{children:[(0,z.tZ)(D,{location:t,eventView:i,organization:n,handleOpChange:o("spanOp"),transactionName:a}),(0,z.BX)(f.Z,{condensed:!0,children:[(0,z.tZ)(g.Z,{}),(0,z.tZ)(d.Z,{alignDropdown:"left",maxPickableDays:M.bc,relativeOptions:M.CS})]}),(0,z.tZ)(A,{organization:n,projectIds:i.project,query:r,fields:i.fields,onSearch:o("query")}),(0,z.tZ)(x.Z,{value:v.field,options:M.E5.map((e=>({value:e.field,label:e.label}))),onChange:e=>o("sort")(e.value),triggerProps:{prefix:v.prefix},triggerLabel:v.label})]}),(0,z.tZ)(b.Z,{eventView:Z,orgSlug:n.slug,location:t,referrer:"api.performance.transaction-spans",cursor:"0:0:1",noPagination:!0,useEvents:!0,children:e=>{var i,r;let{tableData:o}=e;const l=null!==(i=null==o||null===(r=o.data)||void 0===r?void 0:r[0])&&void 0!==i?i:null;return(0,z.tZ)(w.Z,{location:t,orgSlug:n.slug,eventView:E,limit:10,perSuspect:0,spanOps:(0,T.ri)(c)?[c]:[],spanGroups:(0,T.ri)(u)?[u]:[],children:e=>{let{suspectSpans:i,isLoading:r,pageLinks:o}=e;return(0,z.BX)(p.Fragment,{children:[(0,z.tZ)(F.Z,{location:t,organization:n,transactionName:a,project:j.find((e=>e.id===s)),isLoading:r,suspectSpans:null!=i?i:[],totals:l,sort:v.field}),(0,z.tZ)(S.Z,{pageLinks:null!=o?o:null})]})}})}})]})}Q.displayName="SpansContent";const X=(0,c.Z)("div",{target:"e782fmc1"})("display:grid;gap:",(0,E.Z)(2),";margin-bottom:",(0,E.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(3, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr auto;}"),A=(0,c.Z)(v.Z,{target:"e782fmc0"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/5;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),G=Q;function U(e){const{location:t,organization:n,projects:i}=e;return(0,z.tZ)(r.ZP,{location:t,organization:n,projects:i,tab:o.Z.Spans,getDocumentTitle:R,generateEventView:M.xz,childComponent:G})}function R(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,i.t)("Performance")].join(" - "):[(0,i.t)("Summary"),(0,i.t)("Performance")].join(" - ")}U.displayName="TransactionSpans";const H=(0,a.Z)((0,s.Z)(U))},"./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx":(e,t,n)=>{"use strict";function i(e){let{orgSlug:t,transaction:n,query:i,spanSlug:s,projectID:a}=e;const r=function(e){let{orgSlug:t,spanSlug:n}=e;return`/organizations/${t}/performance/summary/spans/${encodeURIComponent(n.op)}:${n.group}/`}({orgSlug:t,spanSlug:s});return{pathname:r,query:{transaction:n,project:a,environment:i.environment,statsPeriod:i.statsPeriod,start:i.start,end:i.end,query:i.query}}}let s;n.d(t,{BP:()=>i,wL:()=>s}),function(e){e.MIN="min",e.MAX="max"}(s||(s={}))},"./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n("./app/components/gridEditable/index.tsx"),s=n("./app/components/gridEditable/sortLink.tsx"),a=n("./app/components/links/link.tsx"),r=n("./app/locale.tsx"),o=n("./app/utils.tsx"),c=n("./app/utils/discover/fieldRenderers.tsx"),p=n("./app/utils/discover/fields.tsx"),l=n("./app/utils/discover/styles.tsx"),u=n("./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx"),m=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){const{location:t,organization:n,transactionName:s,isLoading:a,suspectSpans:r,totals:c,sort:p,project:l}=e,u=r.map((e=>({operation:e.op,group:e.group,description:e.description,totalCount:e.count,frequency:(0,o.ri)(e.frequency)&&(0,o.ri)(null==c?void 0:c["count()"])?Math.min(1,e.frequency/c["count()"]):null,avgOccurrences:e.avgOccurrences,p50ExclusiveTime:e.p50ExclusiveTime,p75ExclusiveTime:e.p75ExclusiveTime,p95ExclusiveTime:e.p95ExclusiveTime,p99ExclusiveTime:e.p99ExclusiveTime,sumExclusiveTime:e.sumExclusiveTime})));return(0,d.tZ)(i.ZP,{isLoading:a,data:u,columnOrder:y[p].map((e=>f[e])),columnSortBy:[],grid:{renderHeadCell:v,renderBodyCell:x(t,n,s,l)},location:t})}function v(e,t){const n=(0,p.qG)(e.key,h[e.key]);return(0,d.tZ)(s.Z,{title:e.name,align:n,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function x(e,t,n,i){return(s,o)=>{const p=(0,c.Js)(s.key,h);if("description"===s.key){var m;const c=(0,u.BP)({orgSlug:t.slug,transaction:n,query:e.query,spanSlug:{op:o.operation,group:o.group},projectID:null==i?void 0:i.id});return(0,d.tZ)(l.W2,{children:(0,d.tZ)(a.Z,{to:c,children:null!==(m=o[s.key])&&void 0!==m?m:(0,r.t)("(unnamed span)")})})}return p(o,{location:e,organization:t})}}g.displayName="SuspectSpansTable",v.displayName="renderHeadCell";const y={[m.g.COUNT]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[m.g.AVG_OCCURRENCE]:["operation","description","avgOccurrences","frequency","p75ExclusiveTime","sumExclusiveTime"],[m.g.SUM_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[m.p.P50_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p50ExclusiveTime","sumExclusiveTime"],[m.p.P75_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[m.p.P95_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p95ExclusiveTime","sumExclusiveTime"],[m.p.P99_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p99ExclusiveTime","sumExclusiveTime"]},f={operation:{key:"operation",name:(0,r.t)("Span Operation"),width:i.z7},description:{key:"description",name:(0,r.t)("Span Name"),width:i.z7},totalCount:{key:"totalCount",name:(0,r.t)("Total Count"),width:i.z7},frequency:{key:"frequency",name:(0,r.t)("Frequency"),width:i.z7},avgOccurrences:{key:"avgOccurrences",name:(0,r.t)("Average Occurrences"),width:i.z7},p50ExclusiveTime:{key:"p50ExclusiveTime",name:(0,r.t)("P50 Self Time"),width:i.z7},p75ExclusiveTime:{key:"p75ExclusiveTime",name:(0,r.t)("P75 Self Time"),width:i.z7},p95ExclusiveTime:{key:"p95ExclusiveTime",name:(0,r.t)("P95 Self Time"),width:i.z7},p99ExclusiveTime:{key:"p99ExclusiveTime",name:(0,r.t)("P99 Self Time"),width:i.z7},sumExclusiveTime:{key:"sumExclusiveTime",name:(0,r.t)("Total Self Time"),width:i.z7}},h={operation:"string",description:"string",totalCount:"integer",frequency:"percentage",avgOccurrences:"number",p50ExclusiveTime:"duration",p75ExclusiveTime:"duration",p95ExclusiveTime:"duration",p99ExclusiveTime:"duration",sumExclusiveTime:"duration"}},"../node_modules/lodash/_baseExtremum.js":(e,t,n)=>{var i=n("../node_modules/lodash/isSymbol.js");e.exports=function(e,t,n){for(var s=-1,a=e.length;++s<a;){var r=e[s],o=t(r);if(null!=o&&(void 0===c?o==o&&!i(o):n(o,c)))var c=o,p=r}return p}},"../node_modules/lodash/_baseGt.js":e=>{e.exports=function(e,t){return e>t}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionSpans_index_tsx-node_modules_lodash__base-bd10c8.0cc7dc233a643f300e4538c57382d070.js.map