{"version":3,"file":"chunks/app_views_monitors_details_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/views/monitors/checkInIcon.tsx","webpack:///./app/views/monitors/monitorCheckIns.tsx","webpack:///./app/views/monitors/monitorHeaderActions.tsx","webpack:///./app/utils/logging.tsx","webpack:///./app/views/monitors/monitorHeader.tsx","webpack:///./app/components/issueList.tsx","webpack:///./app/views/monitors/monitorIssues.tsx","webpack:///./app/views/monitors/monitorStats.tsx","webpack:///./app/views/monitors/details.tsx","webpack:///./app/views/monitors/monitorIcon.tsx"],"sourcesContent":["import styled from '@emotion/styled';\n\ntype Props = {\n  size: number | string;\n  status: 'error' | 'ok';\n  color?: string;\n};\n\nexport default styled('div')<Props>`\n  display: inline-block;\n  position: relative;\n  border-radius: 50%;\n  height: ${p => p.size}px;\n  width: ${p => p.size}px;\n\n  ${p =>\n    p.color\n      ? `background: ${p.color};`\n      : `background: ${\n          p.status === 'error'\n            ? p.theme.error\n            : p.status === 'ok'\n            ? p.theme.success\n            : p.theme.disabled\n        };`};\n`;\n","import styled from '@emotion/styled';\n\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport Duration from 'sentry/components/duration';\nimport {PanelBody, PanelItem} from 'sentry/components/panels';\nimport TimeSince from 'sentry/components/timeSince';\nimport space from 'sentry/styles/space';\nimport {Monitor} from 'sentry/views/monitors/types';\n\nimport CheckInIcon from './checkInIcon';\n\ntype CheckIn = {\n  dateCreated: string;\n  duration: number;\n  id: string;\n  status: 'ok' | 'error';\n};\n\ntype Props = {\n  monitor: Monitor;\n} & AsyncComponent['props'];\n\ntype State = {\n  checkInList: CheckIn[];\n} & AsyncComponent['state'];\n\nexport default class MonitorCheckIns extends AsyncComponent<Props, State> {\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    const {monitor} = this.props;\n    return [\n      ['checkInList', `/monitors/${monitor.id}/checkins/`, {query: {per_page: 10}}],\n    ];\n  }\n\n  renderError() {\n    return <ErrorWrapper>{super.renderError()}</ErrorWrapper>;\n  }\n\n  renderBody() {\n    return (\n      <PanelBody>\n        {this.state.checkInList.map(checkIn => (\n          <PanelItem key={checkIn.id}>\n            <CheckInIconWrapper>\n              <CheckInIcon status={checkIn.status} size={16} />\n            </CheckInIconWrapper>\n            <TimeSinceWrapper>\n              <TimeSince date={checkIn.dateCreated} />\n            </TimeSinceWrapper>\n            <DurationWrapper>\n              {checkIn.duration && <Duration seconds={checkIn.duration / 100} />}\n            </DurationWrapper>\n          </PanelItem>\n        ))}\n      </PanelBody>\n    );\n  }\n}\n\nconst DivMargin = styled('div')`\n  margin-right: ${space(2)};\n`;\n\nconst CheckInIconWrapper = styled(DivMargin)`\n  display: flex;\n  align-items: center;\n`;\n\nconst TimeSinceWrapper = styled(DivMargin)`\n  font-variant-numeric: tabular-nums;\n`;\n\nconst DurationWrapper = styled('div')`\n  font-variant-numeric: tabular-nums;\n`;\n\nconst ErrorWrapper = styled('div')`\n  margin: ${space(3)} ${space(3)} 0;\n`;\n","import {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {\n  addErrorMessage,\n  addLoadingMessage,\n  clearIndicators,\n} from 'sentry/actionCreators/indicator';\nimport Button from 'sentry/components/button';\nimport ButtonBar from 'sentry/components/buttonBar';\nimport Confirm from 'sentry/components/confirm';\nimport {IconDelete, IconEdit} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {logException} from 'sentry/utils/logging';\nimport useApi from 'sentry/utils/useApi';\n\nimport {Monitor} from './types';\n\ntype Props = {\n  monitor: Monitor;\n  onUpdate: (data: Monitor) => void;\n  orgId: string;\n};\n\nconst MonitorHeaderActions = ({monitor, orgId, onUpdate}: Props) => {\n  const api = useApi();\n\n  const handleDelete = () => {\n    const redirectPath = `/organizations/${orgId}/monitors/`;\n    addLoadingMessage(t('Deleting Monitor...'));\n\n    api\n      .requestPromise(`/monitors/${monitor.id}/`, {\n        method: 'DELETE',\n      })\n      .then(() => {\n        browserHistory.push(redirectPath);\n      })\n      .catch(() => {\n        addErrorMessage(t('Unable to remove monitor.'));\n      });\n  };\n\n  const updateMonitor = (data: Partial<Monitor>) => {\n    addLoadingMessage();\n    api\n      .requestPromise(`/monitors/${monitor.id}/`, {\n        method: 'PUT',\n        data,\n      })\n      .then(resp => {\n        clearIndicators();\n        onUpdate?.(resp);\n      })\n      .catch(err => {\n        logException(err);\n        addErrorMessage(t('Unable to update monitor.'));\n      });\n  };\n\n  const toggleStatus = () =>\n    updateMonitor({\n      status: monitor.status === 'disabled' ? 'active' : 'disabled',\n    });\n\n  return (\n    <ButtonContainer>\n      <ButtonBar gap={1}>\n        <Button\n          size=\"sm\"\n          icon={<IconEdit size=\"xs\" />}\n          to={`/organizations/${orgId}/monitors/${monitor.id}/edit/`}\n        >\n          &nbsp;\n          {t('Edit')}\n        </Button>\n        <Button size=\"sm\" onClick={toggleStatus}>\n          {monitor.status !== 'disabled' ? t('Pause') : t('Enable')}\n        </Button>\n        <Confirm\n          onConfirm={handleDelete}\n          message={t(\n            'Deleting this monitor is permanent. Are you sure you wish to continue?'\n          )}\n        >\n          <Button size=\"sm\" icon={<IconDelete size=\"xs\" />}>\n            {t('Delete')}\n          </Button>\n        </Confirm>\n      </ButtonBar>\n    </ButtonContainer>\n  );\n};\n\nconst ButtonContainer = styled('div')`\n  margin-bottom: ${space(3)};\n  display: flex;\n  flex-shrink: 1;\n`;\n\nexport default MonitorHeaderActions;\n","import * as Sentry from '@sentry/react';\n\nexport function logException(ex: Error, context?: any): void {\n  Sentry.withScope(scope => {\n    if (context) {\n      scope.setExtra('context', context);\n    }\n\n    Sentry.captureException(ex);\n  });\n  /* eslint no-console:0 */\n  window.console && console.error && console.error(ex);\n}\n","import TimeSince from 'sentry/components/timeSince';\nimport {t} from 'sentry/locale';\n\nimport MonitorHeaderActions from './monitorHeaderActions';\nimport MonitorIcon from './monitorIcon';\n\ntype Props = React.ComponentProps<typeof MonitorHeaderActions>;\n\nconst MonitorHeader = ({monitor, orgId, onUpdate}: Props) => (\n  <div className=\"release-details\">\n    <div className=\"row\">\n      <div className=\"col-sm-6 col-xs-10\">\n        <h3>{monitor.name}</h3>\n        <div className=\"release-meta\">{monitor.id}</div>\n      </div>\n      <div className=\"col-sm-2 hidden-xs\">\n        <h6 className=\"nav-header\">{t('Last Check-in')}</h6>\n        {monitor.lastCheckIn && <TimeSince date={monitor.lastCheckIn} />}\n      </div>\n      <div className=\"col-sm-2 hidden-xs\">\n        <h6 className=\"nav-header\">{t('Next Check-in')}</h6>\n        {monitor.nextCheckIn && <TimeSince date={monitor.nextCheckIn} />}\n      </div>\n      <div className=\"col-sm-2\">\n        <h6 className=\"nav-header\">{t('Status')}</h6>\n        <MonitorIcon status={monitor.status} size={16} />\n      </div>\n    </div>\n    <MonitorHeaderActions orgId={orgId} monitor={monitor} onUpdate={onUpdate} />\n  </div>\n);\n\nexport default MonitorHeader;\n","import {Fragment, useCallback, useEffect, useMemo, useState} from 'react';\n// eslint-disable-next-line no-restricted-imports\nimport {withRouter, WithRouterProps} from 'react-router';\n\nimport EmptyMessage from 'sentry/components/emptyMessage';\nimport CompactIssue from 'sentry/components/issues/compactIssue';\nimport LoadingError from 'sentry/components/loadingError';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport Pagination from 'sentry/components/pagination';\nimport {Panel, PanelBody} from 'sentry/components/panels';\nimport {IconSearch} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport space from 'sentry/styles/space';\nimport {Group} from 'sentry/types';\nimport useApi from 'sentry/utils/useApi';\n\ninterface IssueListProps extends WithRouterProps {\n  endpoint: string;\n  emptyText?: string;\n  noBorder?: boolean;\n  noMargin?: boolean;\n  pagination?: boolean;\n  query?: Record<string, any>;\n  renderEmpty?: () => React.ReactElement;\n}\n\ninterface IssueListState {\n  data: Array<Group>;\n  issueIds: Array<string>;\n  pageLinks: string | null;\n  status: 'loading' | 'error' | 'success';\n}\n\nfunction IssueList({\n  endpoint,\n  emptyText,\n  query,\n  location,\n  pagination,\n  renderEmpty,\n  noBorder,\n  noMargin,\n}: IssueListProps): React.ReactElement {\n  const api = useApi();\n\n  const [state, setState] = useState<IssueListState>({\n    issueIds: [],\n    status: 'loading',\n    pageLinks: null,\n    data: [],\n  });\n\n  const fetchIssueListData = useCallback(() => {\n    api.clear();\n    api.request(endpoint, {\n      method: 'GET',\n      query: {\n        ...query,\n        ...(location?.query?.cursor ? {cursor: location.query.cursor} : {}),\n      },\n      success: (data, _, resp) => {\n        setState({\n          data,\n          status: 'success',\n          issueIds: data.map(item => item.id),\n          pageLinks: resp?.getResponseHeader('Link') ?? null,\n        });\n      },\n      error: () => {\n        setState(prevState => ({...prevState, status: 'error'}));\n      },\n    });\n  }, [query, endpoint, location.query, api]);\n\n  // TODO: location should always be passed as a prop, check why we have this\n  const hasLocation = !!location;\n\n  useEffect(() => {\n    if (!hasLocation) {\n      return;\n    }\n\n    setState({issueIds: [], status: 'loading', pageLinks: null, data: []});\n    fetchIssueListData();\n  }, [fetchIssueListData, hasLocation]);\n\n  const panelStyles = useMemo(() => {\n    const styles: React.CSSProperties = {\n      ...(noBorder ? {border: 0, borderRadius: 0} : {}),\n      ...(noMargin ? {marginBottom: 0} : {}),\n    };\n\n    return styles;\n  }, [noBorder, noMargin]);\n\n  return (\n    <Fragment>\n      {state.status === 'loading' ? (\n        <div style={{margin: '18px 18px 0'}}>\n          <LoadingIndicator />\n        </div>\n      ) : state.status === 'error' ? (\n        <div style={{margin: `${space(2)} ${space(2)} 0`}}>\n          <LoadingError onRetry={fetchIssueListData} />\n        </div>\n      ) : state.issueIds.length > 0 ? (\n        <Panel style={panelStyles}>\n          <PanelBody className=\"issue-list\">\n            {state.data.map(issue => (\n              <CompactIssue key={issue.id} id={issue.id} data={issue} />\n            ))}\n          </PanelBody>\n        </Panel>\n      ) : renderEmpty ? (\n        renderEmpty()\n      ) : (\n        <Panel style={panelStyles}>\n          <EmptyMessage icon={<IconSearch size=\"xl\" />}>\n            {emptyText ?? t('Nothing to show here, move along.')}\n          </EmptyMessage>\n        </Panel>\n      )}\n\n      {pagination && state.pageLinks && <Pagination pageLinks={state.pageLinks} />}\n    </Fragment>\n  );\n}\n\nexport {IssueList};\n\nexport default withRouter(IssueList);\n","import IssueList from 'sentry/components/issueList';\nimport {t} from 'sentry/locale';\n\nimport {Monitor} from './types';\n\ntype Props = {\n  monitor: Monitor;\n  orgId: string;\n};\n\nconst MonitorIssues = ({orgId, monitor}: Props) => (\n  <IssueList\n    endpoint={`/organizations/${orgId}/issues/`}\n    query={{\n      query: 'monitor.id:\"' + monitor.id + '\"',\n      project: monitor.project.id,\n      limit: 5,\n    }}\n    pagination={false}\n    emptyText={t('No issues found')}\n    noBorder\n    noMargin\n  />\n);\n\nexport default MonitorIssues;\n","import AsyncComponent from 'sentry/components/asyncComponent';\nimport MiniBarChart from 'sentry/components/charts/miniBarChart';\nimport EmptyMessage from 'sentry/components/emptyMessage';\nimport {Panel, PanelBody} from 'sentry/components/panels';\nimport {t} from 'sentry/locale';\nimport theme from 'sentry/utils/theme';\n\nimport {Monitor, MonitorStat} from './types';\n\ntype Props = AsyncComponent['props'] & {\n  monitor: Monitor;\n};\n\ntype State = AsyncComponent['state'] & {\n  stats: MonitorStat[] | null;\n};\n\ntype Stat = {name: string; value: number};\n\nexport default class MonitorStats extends AsyncComponent<Props, State> {\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    const {monitor} = this.props;\n    const until = Math.floor(new Date().getTime() / 1000);\n    const since = until - 3600 * 24 * 30;\n    return [\n      [\n        'stats',\n        `/monitors/${monitor.id}/stats/`,\n        {\n          query: {\n            since,\n            until,\n            resolution: '1d',\n          },\n        },\n      ],\n    ];\n  }\n\n  renderBody() {\n    let emptyStats = true;\n    const success = {\n      seriesName: t('Successful'),\n      data: [] as Stat[],\n    };\n    const failed = {\n      seriesName: t('Failed'),\n      data: [] as Stat[],\n    };\n    this.state.stats?.forEach(p => {\n      if (p.ok || p.error) {\n        emptyStats = false;\n      }\n      const timestamp = p.ts * 1000;\n      success.data.push({name: timestamp.toString(), value: p.ok});\n      failed.data.push({name: timestamp.toString(), value: p.error});\n    });\n    const colors = [theme.green300, theme.red300];\n\n    return (\n      <Panel>\n        <PanelBody withPadding>\n          {!emptyStats ? (\n            <MiniBarChart\n              isGroupedByDate\n              showTimeInTooltip\n              labelYAxisExtents\n              stacked\n              colors={colors}\n              height={150}\n              series={[success, failed]}\n            />\n          ) : (\n            <EmptyMessage\n              title={t('Nothing recorded in the last 30 days.')}\n              description={t('All check-ins for this monitor.')}\n            />\n          )}\n        </PanelBody>\n      </Panel>\n    );\n  }\n}\n","import {Fragment} from 'react';\nimport {RouteComponentProps} from 'react-router';\n\nimport {Panel, PanelHeader} from 'sentry/components/panels';\nimport {t} from 'sentry/locale';\nimport AsyncView from 'sentry/views/asyncView';\n\nimport MonitorCheckIns from './monitorCheckIns';\nimport MonitorHeader from './monitorHeader';\nimport MonitorIssues from './monitorIssues';\nimport MonitorStats from './monitorStats';\nimport {Monitor} from './types';\n\ntype Props = AsyncView['props'] &\n  RouteComponentProps<{monitorId: string; orgId: string}, {}>;\n\ntype State = AsyncView['state'] & {\n  monitor: Monitor | null;\n};\n\nclass MonitorDetails extends AsyncView<Props, State> {\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    const {params, location} = this.props;\n    return [['monitor', `/monitors/${params.monitorId}/`, {query: location.query}]];\n  }\n\n  getTitle() {\n    if (this.state.monitor) {\n      return `${this.state.monitor.name} - Monitors - ${this.props.params.orgId}`;\n    }\n    return `Monitors - ${this.props.params.orgId}`;\n  }\n\n  onUpdate = (data: Monitor) =>\n    this.setState(state => ({monitor: {...state.monitor, ...data}}));\n\n  renderBody() {\n    const {monitor} = this.state;\n\n    if (monitor === null) {\n      return null;\n    }\n\n    return (\n      <Fragment>\n        <MonitorHeader\n          monitor={monitor}\n          orgId={this.props.params.orgId}\n          onUpdate={this.onUpdate}\n        />\n\n        <MonitorStats monitor={monitor} />\n\n        <Panel style={{paddingBottom: 0}}>\n          <PanelHeader>{t('Related Issues')}</PanelHeader>\n\n          <MonitorIssues monitor={monitor} orgId={this.props.params.orgId} />\n        </Panel>\n\n        <Panel>\n          <PanelHeader>{t('Recent Check-ins')}</PanelHeader>\n\n          <MonitorCheckIns monitor={monitor} />\n        </Panel>\n      </Fragment>\n    );\n  }\n}\n\nexport default MonitorDetails;\n","import styled from '@emotion/styled';\n\nimport {Status} from './types';\n\nexport default styled('div')<{size: number; status: Status}>`\n  display: inline-block;\n  position: relative;\n  border-radius: 50%;\n  height: ${p => p.size}px;\n  width: ${p => p.size}px;\n\n  ${p =>\n    p.color\n      ? `background: ${p.color};`\n      : `background: ${\n          p.status === 'error'\n            ? p.theme.error\n            : p.status === 'ok'\n            ? p.theme.success\n            : p.theme.disabled\n        };`};\n`;\n"],"names":["p","size","color","status","theme","error","success","disabled","MonitorCheckIns","AsyncComponent","getEndpoints","monitor","this","props","id","query","per_page","renderError","ErrorWrapper","super","renderBody","state","checkInList","map","checkIn","CheckInIconWrapper","TimeSinceWrapper","date","dateCreated","DurationWrapper","duration","seconds","DivMargin","space","MonitorHeaderActions","orgId","onUpdate","api","useApi","ButtonContainer","gap","icon","to","t","onClick","updateMonitor","data","addLoadingMessage","requestPromise","method","then","resp","clearIndicators","catch","err","ex","Sentry","scope","window","console","addErrorMessage","onConfirm","redirectPath","browserHistory","message","MonitorHeader","className","name","lastCheckIn","nextCheckIn","IssueList","endpoint","emptyText","location","pagination","renderEmpty","noBorder","noMargin","setState","useState","issueIds","pageLinks","fetchIssueListData","useCallback","clear","request","cursor","_","item","getResponseHeader","prevState","hasLocation","useEffect","panelStyles","useMemo","border","borderRadius","marginBottom","Fragment","style","margin","onRetry","length","issue","withRouter","MonitorIssues","project","limit","MonitorStats","until","Math","floor","Date","getTime","since","resolution","emptyStats","seriesName","failed","stats","forEach","ok","timestamp","ts","push","toString","value","colors","withPadding","title","description","isGroupedByDate","showTimeInTooltip","labelYAxisExtents","stacked","height","series","MonitorDetails","AsyncView","params","monitorId","getTitle","paddingBottom"],"sourceRoot":""}