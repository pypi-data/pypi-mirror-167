(self.webpackChunkriskflow_widgets=self.webpackChunkriskflow_widgets||[]).push([[568,144],{63:(e,t,i)=>{i(191),i(78),i(25);var n=i(337),a=n.DOMWidgetView.extend({update:function(){if(val=this.model.get("value"),""!=val){var e=$.parseJSON(val);this.renderGraph(e)}else console.log("update is null - why?");return a.__super__.update.apply(this)},render:function(){this.el.classList.add("widget-inline-hbox"),this.$label=$("<div />").addClass("widget-label").appendTo(this.el),this.$label.text(this.model.get("description")),this.$flot=$("<div/>").addClass("flotplot").appendTo(this.el),this.$table=$("<div/>").addClass("handsonplot").appendTo(this.el),this.colheaders=[],this.displayed.then(_.bind(this.update,this))},renderGraph:function(e){console.log("renderGraph");var t=this,i=$.parseJSON(this.model.get("flot_settings")),n=$.parseJSON(this.model.get("hot_settings"));table_data=function(e,t){var i,n,a,s,o=[["Index"].concat(e.map((e=>e.label)))];if(e.length>1)for(var l=0;l<e[0].data.length;l++){var d=e[0].data[l].slice(0);t&&(d[0]=(void 0,void 0,void 0,n=(i=new Date(d[0])).getFullYear().toString(),a=(i.getMonth()+1).toString(),s=i.getDate().toString(),n+"-"+(a[1]?a:"0"+a[0])+"-"+(s[1]?s:"0"+s[0])));for(var r=1;r<e.length;r++)d.push(e[r].data[l][1]);o.push(d)}else o=o.concat(e[0].data);return o}(e,"time"==_.get(i,"xaxis.mode")),n=_.extend({manualColumnMove:!0,contextMenu:!1,minSpareRows:1,width:300,height:300},n),this.colheaders=table_data[0],n.colHeaders=this.colheaders,i=_.extend({legend:{show:!0,position:"ne"},series:{lines:{show:!0},points:{show:!0},shadowSize:0},grid:{hoverable:!0},zoom:{interactive:!0},pan:{interactive:!0}},i),plt=$.plot(t.$flot,e,i),this.hot=new Handsontable(t.$table[0],_.extend({data:table_data.slice(1),afterSelection:function(){IPython.keyboard_manager.disable()},afterDeselect:function(){IPython.keyboard_manager.enable()},afterChange:function(e,i){"loadData"!==i&&t.handle_table_change(this.getData())}},n))},handle_table_change:function(e){var t=function(e,t){console.log("get");var i=[];if(t.countCols()>2)for(var n=t.getDataAtCol(0).slice(0,-1),a=e.slice(1),s=0;s<a.length;s++)i.push({label:a[s],data:_.zip(n,t.getDataAtCol(s+1).slice(0,-1))});else i=[{label:"Rate",data:t.getData().slice(0,-1)}];return i}(this.colheaders,this.hot);this.model.set("value",JSON.stringify(t)),this.touch()}}),s=n.DOMWidgetModel.extend({defaults:_.extend(n.DOMWidgetModel.prototype.defaults(),{_model_name:"FlotModel",_view_name:"FlotView",_model_module:"riskflow_widgets",_view_module:"riskflow_widgets",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"",hot_settings:"",flot_settings:"",description:""})});e.exports={FlotView:a,FlotModel:s}},568:(e,t,i)=>{i(954),i(968),i(827),e.exports={};var n=[i(928),i(303),i(63)];for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];for(var o in s)s.hasOwnProperty(o)&&(e.exports[o]=s[o])}e.exports.version=i(147).version},303:(e,t,i)=>{var n=i(337),a=n.DOMWidgetView.extend({initialize:function(e){a.__super__.initialize.apply(this,arguments),this.loaded=!1},update:function(){var e=this.model.get("value"),t=""===e?null:$.parseJSON(e);if(this.loaded)this.hot.loadData(t);else{var i=this;this.hot=new Handsontable(i.$table[0],_.extend({data:t,afterSelection:function(){IPython.keyboard_manager.disable()},afterDeselect:function(){IPython.keyboard_manager.enable()},afterChange:function(e,t){"loadData"!==t&&i.handle_table_change(e,this.getData())}},this.settings)),this.loaded=!0}return a.__super__.update.apply(this)},render:function(){var e=this.model.get("description");""!=e&&(this.el.classList.add("widget-inline-hbox"),this.$label=$("<div />").addClass("widget-label").appendTo(this.el),this.$label.text(e)),this.$table=$("<div/>").appendTo(this.el),this.settings=$.parseJSON(this.model.get("settings")),this.colHeaders="colHeaders"in this.settings?this.settings.colHeaders:[],this.label=e,this.displayed.then(_.bind(this.update,this))},handle_table_change:function(e,t){this.colHeaders.length&&t.length>1?t[0].length!=this.colHeaders.length&&"Model Configuration"!=this.model.get("description")||(this.model.set("value",JSON.stringify(t)),this.touch()):t.length>1&&(nulls_col=t[0].slice(1,-1).map((e=>null!=e)),nulls_row=!0,t.slice(1,-1).forEach(((e,t)=>{nulls_row=null!=e[0]&nulls_row&e.slice(1).some((e=>e)),e.slice(1).forEach(((e,t)=>{nulls_col[t]=nulls_col[t]&null==e}))})),!nulls_col.some((e=>e))&&nulls_row&&(this.model.set("value",JSON.stringify(t.slice(0,-1).map((e=>e.slice(0,-1).map((e=>parseFloat(e))))))),this.touch()))}}),s=n.DOMWidgetModel.extend({defaults:_.extend(n.DOMWidgetModel.prototype.defaults(),{_model_name:"TableModel",_view_name:"TableView",_model_module:"riskflow_widgets",_view_module:"riskflow_widgets",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"",settings:"",description:""})});e.exports={TableModel:s,TableView:a}},928:(e,t,i)=>{i(333);var n=i(337),a=n.DOMWidgetView.extend({initialize:function(e){a.__super__.initialize.apply(this,arguments),this.loaded=!1},generateActionMethod:function(e,t,i,n){return function(a){t=e.create_node(t,{type:i,data:n}),e.edit(t,n+".")}},generateContextMethod:function(e,t,i){var n={};for(var a in i)i.hasOwnProperty(a)&&(n[a]={separator_before:!1,separator_after:!1,label:a,action:this.generateActionMethod(e,t,i[a],a)});return n},perform_update:function(e,t,i){var n=$.parseJSON(this.model.get("settings")),a=this.model.get("plugins"),s=this;this.multiselect=a.includes("checkbox"),e.jstree({core:{data:t,check_callback:!0},types:i,plugins:a,contextmenu:a.includes("contextmenu")?{items:function(t){var i=e.jstree(!0),a={};for(const e in n.contextmenu)n.contextmenu.hasOwnProperty(e)&&(a[e]={separator_before:!1,separator_after:!1,label:e,action:!1,submenu:s.generateContextMethod(i,t,n.contextmenu[e])});var o,l={Delete:{separator_before:!0,label:"Delete Node",action:function(e){i.delete_node(t)}}};switch(t.type){case"root":o=a;break;case"group":o=$.extend({},a,l);break;default:o=l}return o}}:null}).on("select_node.jstree",this.handle_select.bind(this)),n.events.includes("create")&&e.on("rename_node.jstree",this.handle_tree_change.bind(this)),n.events.includes("delete")&&e.on("delete.jstree",this.handle_delete.bind(this)),this.multiselect&&e.on("deselect_node.jstree",this.handle_deselect.bind(this))},update:function(){if(!this.loaded&&this.model.get("value")){var e=this.$tree,t=$.parseJSON(this.model.get("value")),i=$.parseJSON(this.model.get("type_data"));this.perform_update(e,t,i),this.$search.on("keyup",this.handle_search.bind(this)).on("paste",this.handle_search.bind(this)),this.loaded=!0}return a.__super__.update.apply(this)},render:function(){this.$search=$('<input type="text" />').addClass("input").addClass("widget-text").appendTo(this.el),this.$tree=$("<div />").appendTo(this.el),this.to=!1,this.displayed.then(_.bind(this.update,this))},get_json_path:function(e){return this.$tree.jstree("get_path",e.node).slice(1)},handle_search:function(e,t){var i=this;this.to&&clearTimeout(this.to),this.to=setTimeout((function(){var e=i.$search.val();i.$tree.jstree(!0).search(e)}),250)},handle_select:function(e,t){if(null!=t){if(this.model.set("selected",this.get_json_path(t)),this.multiselect){var i=this.$tree.jstree("get_selected",!0).map((function(e){return e.text}));this.model.set("checked",i)}this.touch()}},handle_deselect:function(e,t){if(null!=t){var i=this.$tree.jstree("get_selected",!0).map((function(e){return e.text}));this.model.set("checked",i),this.touch()}},handle_tree_change:function(e,t){null!=t&&(0!=t.node.text.indexOf(t.node.data)&&this.$tree.jstree("rename_node",t.node,t.node.data+"."+t.node.text),this.model.set("created",this.get_json_path(t)),this.touch())},handle_delete:function(e,t){null!=t&&(this.model.set("deleted",this.get_json_path(t)),this.touch())}}),s=n.DOMWidgetModel.extend({defaults:_.extend(n.DOMWidgetModel.prototype.defaults(),{_model_name:"TreeModel",_view_name:"TreeView",_model_module:"riskflow_widgets",_view_module:"riskflow_widgets",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"",type_data:"",selected:[],created:[],deleted:[],plugins:[],checked:[],settings:""})});e.exports={TreeModel:s,TreeView:a}},397:(e,t,i)=>{var n=i(456);(e.exports=i(252)(!1)).push([e.id,".vakata-context {\n z-index:2999 !important;\n}\n.legendLayer .background {\n    fill: rgba(255, 255, 255, 0.85);\n    stroke: rgba(0, 0, 0, 0.85);\n    stroke-width: 1;\n}\n.legend {\n\t\tdisplay: block;\n\t\t-webkit-padding-start: 2px;\n\t\t-webkit-padding-end: 2px;\n\t\tborder-width: initial;\n\t\tborder-style: none;\n\t\tborder-color: initial;\n\t\tborder-image: initial;\n\t\tpadding-left: 10px;\n        padding-right: 10px;\n        padding-top: 10px;\n        padding-bottom: 10px;\n}\n.widget-box { overflow: visible }\n.widget-text { width: 500px !important; }\n.widget-label { align-self: baseline; min-width:35ex }\n.widget-inline-hbox { align-items: flex-end; }\n.widget-textarea  { width: auto; }\n.widget-tenor-text{width:140px;margin:0 !important}\n.widget-datepicker { width: 380px !important; }\n.widget-select { width: 450px !important; }\n.widget-tenorlistbox {width:140px; margin-bottom:0}\n.flotwrapper { position: relative; width: 800px; margin: auto; margin-top: 20px; font-size: 12pt; }\n.flottitle { color: #888; margin-left: 50px; }\n.flotgraph { position: relative; margin-top: 20px; }\n.flotplot { width: 350px; height: 300px; }\n.handsonplot { overflow: auto; height: 300px; max-width: 300px}\n.handsontable col.rowHeader {  width: 250px; }\n.container { width:95%; }\n.generictree { max-width : 450px; overflow: auto; max-height: 700px; padding : 5px; border-style:outset }\n.genericframe { padding : 5px; border-style:outset }\n.rightframe{ overflow: auto; max-height: 700px }\n.mainframe{background-image:url("+n(i(351))+");background-repeat:repeat}\n",""])},351:(e,t,i)=>{e.exports=i.p+"c1d41038c314e27127324b254cc2b844.png"},827:(e,t,i)=>{var n=i(397);"string"==typeof n&&(n=[[e.id,n,""]]);i(723)(n,{transform:void 0}),n.locals&&(e.exports=n.locals)},147:e=>{"use strict";e.exports={version:"0.1.0"}}}]);